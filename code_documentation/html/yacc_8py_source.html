<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TAPPS: ply/yacc.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TAPPS
   &#160;<span id="projectnumber">Release1</span>
   </div>
   <div id="projectbrief">Technical (Analysis) and Applied Statistics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('yacc_8py_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">yacc.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="yacc_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html">    1</a></span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"># ply: yacc.py</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"># Copyright (C) 2001-2015,</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"># David M. Beazley (Dabeaz LLC)</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"># All rights reserved.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"># Redistribution and use in source and binary forms, with or without</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"># modification, are permitted provided that the following conditions are</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"># met:</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"># * Redistributions of source code must retain the above copyright notice,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">#   this list of conditions and the following disclaimer.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"># * Redistributions in binary form must reproduce the above copyright notice,</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">#   this list of conditions and the following disclaimer in the documentation</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">#   and/or other materials provided with the distribution.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"># * Neither the name of the David Beazley or Dabeaz LLC may be used to</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">#   endorse or promote products derived from this software without</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">#  specific prior written permission.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"># THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"># &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"># LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"># A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"># OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"># SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"># LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"># DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"># THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"># (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"># OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"># This implements an LR parser that is constructed from grammar rules defined</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"># as Python functions. The grammer is specified by supplying the BNF inside</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"># Python documentation strings.  The inspiration for this technique was borrowed</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"># from John Aycock&#39;s Spark parsing system.  PLY might be viewed as cross between</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"># Spark and the GNU bison utility.</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"># The current implementation is only somewhat object-oriented. The</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"># LR parser itself is defined in terms of an object (which allows multiple</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"># parsers to co-exist).  However, most of the variables used during table</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"># construction are defined in terms of global variables.  Users shouldn&#39;t</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"># notice unless they are trying to define multiple parsers at the same</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"># time using threads (in which case they should have their head examined).</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"># This implementation supports both SLR and LALR(1) parsing.  LALR(1)</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"># support was originally implemented by Elias Ioup (ezioup@alumni.uchicago.edu),</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"># using the algorithm found in Aho, Sethi, and Ullman &quot;Compilers: Principles,</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"># Techniques, and Tools&quot; (The Dragon Book).  LALR(1) has since been replaced</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"># by the more efficient DeRemer and Pennello algorithm.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"># :::::::: WARNING :::::::</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"># Construction of LR parsing tables is fairly complicated and expensive.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"># To make this module run fast, a *LOT* of work has been put into</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"># optimization---often at the expensive of readability and what might</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"># consider to be good Python &quot;coding style.&quot;   Modify the code at your</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"># own risk!</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"># ----------------------------------------------------------------------------</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">import</span> re</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">import</span> types</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">import</span> sys</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">import</span> os.path</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">import</span> inspect</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">import</span> base64</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">import</span> warnings</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;__version__    = <span class="stringliteral">&#39;3.7&#39;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;__tabversion__ = <span class="stringliteral">&#39;3.5&#39;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">#-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">#                     === User configurable parameters ===</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"># Change these to modify the default behavior of yacc (if you wish)</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">#-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#adacfd3a0c2f5450fe61a3559a4c2ff52">   79</a></span>&#160;yaccdebug   = <span class="keyword">True</span>             <span class="comment"># Debugging mode.  If set, yacc generates a</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                               <span class="comment"># a &#39;parser.out&#39; file in the current directory</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#a9436d21b9e7acbd5e62ede3ab0c859d1">   82</a></span>&#160;debug_file  = <span class="stringliteral">&#39;parser.out&#39;</span>     <span class="comment"># Default name of the debugging file</span></div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#adc8c925682a6c8c16f2ae142f81537bc">   83</a></span>&#160;tab_module  = <span class="stringliteral">&#39;parsetab&#39;</span>       <span class="comment"># Default name of the table module</span></div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#ad5d158928a02933ed9457c2430ccc30a">   84</a></span>&#160;default_lr  = <span class="stringliteral">&#39;LALR&#39;</span>           <span class="comment"># Default LR table generation method</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#a1ee6b6c8838d62ed13b6998d6c89de1b">   86</a></span>&#160;error_count = 3                <span class="comment"># Number of symbols that must be shifted to leave recovery mode</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#a5fe9a27cc4cf6e0eace171f0cc2a4630">   88</a></span>&#160;yaccdevel   = <span class="keyword">False</span>            <span class="comment"># Set to True if developing yacc.  This turns off optimized</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                               <span class="comment"># implementations of certain functions.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#acf0a07d62c6f56b9dd713fdce03de579">   91</a></span>&#160;resultlimit = 40               <span class="comment"># Size limit of results when running in debug mode.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#a7534186d44eb23896bb61761a1a7bfdb">   93</a></span>&#160;pickle_protocol = 0            <span class="comment"># Protocol to use when writing pickle files</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"># String type-checking compatibility</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="keywordflow">if</span> sys.version_info[0] &lt; 3:</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#afa87edc53115e96dfdd4d7827a7295a3">   97</a></span>&#160;    string_types = basestring</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keywordflow">else</span>:</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    string_types = str</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#a8ed16257213f977abcfd6fbe84de13b8">  101</a></span>&#160;MAXINT = sys.maxsize</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"># This object is a stand-in for a logging object created by the</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"># logging module.   PLY will use this by default to create things</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"># such as the parser.out file.  If a user wants more detailed</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"># information, they can create their own logging object and pass</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"># it into PLY.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html">  109</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html">PlyLogger</a>(object):</div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#ab0823600d1370d25e4592e72de86ce22">  110</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#ab0823600d1370d25e4592e72de86ce22">__init__</a>(self, f):</div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a4bd815f64b6555735cbdf8df60b6e02b">  111</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a4bd815f64b6555735cbdf8df60b6e02b">f</a> = f</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a276e8cc86604d0b6d66ae51356eed7c5">  113</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a276e8cc86604d0b6d66ae51356eed7c5">debug</a>(self, msg, *args, **kwargs):</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a4bd815f64b6555735cbdf8df60b6e02b">f</a>.write((msg % args) + <span class="stringliteral">&#39;\n&#39;</span>)</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a60d872dd9a4d6f9cff9f58125cb40ee9">  116</a></span>&#160;    info = debug</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a3748a827dbd1a01ab398fc2509744a1d">  118</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a3748a827dbd1a01ab398fc2509744a1d">warning</a>(self, msg, *args, **kwargs):</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a4bd815f64b6555735cbdf8df60b6e02b">f</a>.write(<span class="stringliteral">&#39;WARNING: &#39;</span> + (msg % args) + <span class="stringliteral">&#39;\n&#39;</span>)</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#af95b84825ed397a9dc93f00445c907db">  121</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#af95b84825ed397a9dc93f00445c907db">error</a>(self, msg, *args, **kwargs):</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a4bd815f64b6555735cbdf8df60b6e02b">f</a>.write(<span class="stringliteral">&#39;ERROR: &#39;</span> + (msg % args) + <span class="stringliteral">&#39;\n&#39;</span>)</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#ae1429c0c4a951390f318aa26d5d2bc38">  124</a></span>&#160;    critical = debug</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"># Null logger is used when no output is generated. Does nothing.</span></div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_null_logger.html">  127</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_null_logger.html">NullLogger</a>(object):</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_null_logger.html#a7cda2676bf103fd06b9f7ce492b543a0">  128</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_null_logger.html#a7cda2676bf103fd06b9f7ce492b543a0">__getattribute__</a>(self, name):</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">return</span> self</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_null_logger.html#afe0989f1c2b3c4f3297a19408a33f21d">  131</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_null_logger.html#afe0989f1c2b3c4f3297a19408a33f21d">__call__</a>(self, *args, **kwargs):</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> self</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"># Exception raised for yacc-related errors</span></div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_error.html">  135</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_error.html">YaccError</a>(Exception):</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">pass</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"># Format the result message that the parser produces when running in debug mode.</span></div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#adc73e296a1379d14f16ce289adcd520a">  139</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetapps_1_1ply_1_1yacc.html#adc73e296a1379d14f16ce289adcd520a">format_result</a>(r):</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    repr_str = repr(r)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> <span class="stringliteral">&#39;\n&#39;</span> <span class="keywordflow">in</span> repr_str:</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        repr_str = repr(repr_str)</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> len(repr_str) &gt; resultlimit:</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        repr_str = repr_str[:resultlimit] + <span class="stringliteral">&#39; ...&#39;</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    result = <span class="stringliteral">&#39;&lt;%s @ 0x%x&gt; (%s)&#39;</span> % (type(r).__name__, id(r), repr_str)</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> result</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"># Format stack entries when the parser is running in debug mode</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#aafef6f7c39d13e4ddbda18ec818ff5cd">  149</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetapps_1_1ply_1_1yacc.html#aafef6f7c39d13e4ddbda18ec818ff5cd">format_stack_entry</a>(r):</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    repr_str = repr(r)</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> <span class="stringliteral">&#39;\n&#39;</span> <span class="keywordflow">in</span> repr_str:</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        repr_str = repr(repr_str)</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> len(repr_str) &lt; 16:</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">return</span> repr_str</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;&lt;%s @ 0x%x&gt;&#39;</span> % (type(r).__name__, id(r))</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"># Panic mode error recovery support.   This feature is being reworked--much of the</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"># code here is to offer a deprecation/backwards compatible transition</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;_errok = <span class="keywordtype">None</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;_token = <span class="keywordtype">None</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;_restart = <span class="keywordtype">None</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;_warnmsg = <span class="stringliteral">&#39;&#39;&#39;PLY: Don&#39;t use global functions errok(), token(), and restart() in p_error().</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="stringliteral">Instead, invoke the methods on the associated parser instance:</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="stringliteral">    def p_error(p):</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="stringliteral">        ...</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="stringliteral">        # Use parser.errok(), parser.token(), parser.restart()</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="stringliteral">        ...</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="stringliteral">    parser = yacc.yacc()</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#ac7b6fecdb1c97c83d7c1a0ce98261175">  175</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetapps_1_1ply_1_1yacc.html#ac7b6fecdb1c97c83d7c1a0ce98261175">errok</a>():</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    warnings.warn(_warnmsg)</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">return</span> _errok()</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#a1db9e7cad1226d6d8b4a8db63dfab46d">  179</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetapps_1_1ply_1_1yacc.html#a1db9e7cad1226d6d8b4a8db63dfab46d">restart</a>():</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    warnings.warn(_warnmsg)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">return</span> _restart()</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#a631fa98d1fed91fb8fc692b4e6833a18">  183</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetapps_1_1ply_1_1yacc.html#a631fa98d1fed91fb8fc692b4e6833a18">token</a>():</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    warnings.warn(_warnmsg)</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">return</span> _token()</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"># Utility function to call the p_error() function with some deprecation hacks</span></div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#ab0911ad2047883376212107c528688ea">  188</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetapps_1_1ply_1_1yacc.html#ab0911ad2047883376212107c528688ea">call_errorfunc</a>(errorfunc, token, parser):</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keyword">global</span> _errok, _token, _restart</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    _errok = parser.errok</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    _token = parser.token</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    _restart = parser.restart</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    r = errorfunc(token)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">try</span>:</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        del _errok, _token, _restart</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">except</span> NameError:</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">pass</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">return</span> r</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">#-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">#                        ===  LR Parsing Engine ===</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment"># The following classes are used for the LR parser itself.  These are not</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"># used during table construction and are independent of the actual LR</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"># table generation algorithm</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">#-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"># This class is used to hold non-terminal grammar symbols during parsing.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"># It normally has the following attributes set:</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">#        .type       = Grammar symbol type</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">#        .value      = Symbol value</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">#        .lineno     = Starting line number</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">#        .endlineno  = Ending line number (optional, set automatically)</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">#        .lexpos     = Starting lex position</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">#        .endlexpos  = Ending lex position (optional, set automatically)</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">  217</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>:</div><div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html#a8cd78b156145844b5283cb7796354979">  218</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html#a8cd78b156145844b5283cb7796354979">__str__</a>(self):</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">return</span> self.type</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html#afac400c6f473209ac91fe26fe9c20e47">  221</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html#afac400c6f473209ac91fe26fe9c20e47">__repr__</a>(self):</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">return</span> str(self)</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"># This class is a wrapper around the objects actually passed to each</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"># grammar rule.   Index lookup and assignment actually assign the</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"># .value attribute of the underlying YaccSymbol object.</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"># The lineno() method returns the line number of a given</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"># item (or 0 if not defined).   The linespan() method returns</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment"># a tuple of (startline,endline) representing the range of lines</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"># for a symbol.  The lexspan() method returns a tuple (lexpos,endlexpos)</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment"># representing the range of positional information for a symbol.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html">  233</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html">YaccProduction</a>:</div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a8abfcebcadb7cfd44faf521c7c3fa57a">  234</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a8abfcebcadb7cfd44faf521c7c3fa57a">__init__</a>(self, s, stack=None):</div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">  235</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a> = s</div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#aa66f3f657c70538a5377d30582908c49">  236</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#aa66f3f657c70538a5377d30582908c49">stack</a> = stack</div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#ab660d3e1f88569650326b6dc03ac2e51">  237</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#ab660d3e1f88569650326b6dc03ac2e51">lexer</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#abec3957edf95b7ad6767f378a2f6acae">  238</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#abec3957edf95b7ad6767f378a2f6acae">parser</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a274e5eb3e473dd18273ffe653dedf714">  240</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a274e5eb3e473dd18273ffe653dedf714">__getitem__</a>(self, n):</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">if</span> isinstance(n, slice):</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="keywordflow">return</span> [s.value <span class="keywordflow">for</span> s <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a>[n]]</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">elif</span> n &gt;= 0:</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a>[n].value</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#aa66f3f657c70538a5377d30582908c49">stack</a>[n].value</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a2bb45bf8dcaff85536fa957ad8c32bc3">  248</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a2bb45bf8dcaff85536fa957ad8c32bc3">__setitem__</a>(self, n, v):</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a>[n].value = v</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a243dbfb4d4987ccab927298caf6b6773">  251</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a243dbfb4d4987ccab927298caf6b6773">__getslice__</a>(self, i, j):</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">return</span> [s.value <span class="keywordflow">for</span> s <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a>[i:j]]</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#ab443e91f7e6c34fdfd6c8e114ba33abf">  254</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#ab443e91f7e6c34fdfd6c8e114ba33abf">__len__</a>(self):</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">return</span> len(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a>)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a300dc8e26bda1e29242b6f8ea5e8a599">  257</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a300dc8e26bda1e29242b6f8ea5e8a599">lineno</a>(self, n):</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">return</span> getattr(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a>[n], <span class="stringliteral">&#39;lineno&#39;</span>, 0)</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a023e833217057f834bae9d9dff0c5f4b">  260</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a023e833217057f834bae9d9dff0c5f4b">set_lineno</a>(self, n, lineno):</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a>[n].lineno = lineno</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a0e834f322fcee4791d9e6e1cf6ac6c4b">  263</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a0e834f322fcee4791d9e6e1cf6ac6c4b">linespan</a>(self, n):</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        startline = getattr(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a>[n], <span class="stringliteral">&#39;lineno&#39;</span>, 0)</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        endline = getattr(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a>[n], <span class="stringliteral">&#39;endlineno&#39;</span>, startline)</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">return</span> startline, endline</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#af2482d3ad311ddfec2607af4a1b49b7c">  268</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#af2482d3ad311ddfec2607af4a1b49b7c">lexpos</a>(self, n):</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">return</span> getattr(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a>[n], <span class="stringliteral">&#39;lexpos&#39;</span>, 0)</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#afca9216d04191a79227ad243692d747a">  271</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#afca9216d04191a79227ad243692d747a">lexspan</a>(self, n):</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        startpos = getattr(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a>[n], <span class="stringliteral">&#39;lexpos&#39;</span>, 0)</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        endpos = getattr(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">slice</a>[n], <span class="stringliteral">&#39;endlexpos&#39;</span>, startpos)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">return</span> startpos, endpos</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a846f350c6c309c4509f65ce2f664f172">  276</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a846f350c6c309c4509f65ce2f664f172">error</a>(self):</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">raise</span> SyntaxError</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">#                               == LRParser ==</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"># The LR Parsing engine.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html">  285</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html">LRParser</a>:</div><div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a946f7150168ffe7b218bab276066610d">  286</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a946f7150168ffe7b218bab276066610d">__init__</a>(self, lrtab, errorf):</div><div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a8d4a752236aa33c27bea6b77da081750">  287</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a8d4a752236aa33c27bea6b77da081750">productions</a> = lrtab.lr_productions</div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ad1a327d60da5dcf970c7002543318dc9">  288</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ad1a327d60da5dcf970c7002543318dc9">action</a> = lrtab.lr_action</div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a6f93ab0c66031fd92351327207e78db9">  289</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a6f93ab0c66031fd92351327207e78db9">goto</a> = lrtab.lr_goto</div><div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa1a4b0e3ab1bf948ce06d0f658d932dc">  290</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa1a4b0e3ab1bf948ce06d0f658d932dc">errorfunc</a> = errorf</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a2bb5295457bae94b815d8778386086de">set_defaulted_states</a>()</div><div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">  292</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a> = <span class="keyword">True</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a6b0bff192e9eb162005c54cad7bb1f92">  294</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a6b0bff192e9eb162005c54cad7bb1f92">errok</a>(self):</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a> = <span class="keyword">True</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a3656db4f50681c211b38b4c270dd4ad4">  297</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a3656db4f50681c211b38b4c270dd4ad4">restart</a>(self):</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        del self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a16fc20e7403f56c469f4ecae9d3125eb">statestack</a>[:]</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        del self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a778ec68fe40939c1cd7c53ce31803731">symstack</a>[:]</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        sym = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        sym.type = <span class="stringliteral">&#39;$end&#39;</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a778ec68fe40939c1cd7c53ce31803731">symstack</a>.append(sym)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a16fc20e7403f56c469f4ecae9d3125eb">statestack</a>.append(0)</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment"># Defaulted state support.</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment"># This method identifies parser states where there is only one possible reduction action.</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment"># For such states, the parser can make a choose to make a rule reduction without consuming</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment"># the next look-ahead token.  This delayed invocation of the tokenizer can be useful in</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment"># certain kinds of advanced parsing situations where the lexer and parser interact with</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment"># each other or change states (i.e., manipulation of scope, lexer states, etc.).</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment"># See:  http://www.gnu.org/software/bison/manual/html_node/Default-Reductions.html#Default-Reductions</span></div><div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a2bb5295457bae94b815d8778386086de">  313</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a2bb5295457bae94b815d8778386086de">set_defaulted_states</a>(self):</div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a3c460883a16b1e81e805f06225368834">  314</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a3c460883a16b1e81e805f06225368834">defaulted_states</a> = {}</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">for</span> state, actions <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ad1a327d60da5dcf970c7002543318dc9">action</a>.<a class="code" href="namespacetapps_1_1copads_1_1operations.html#ae0cdacee222fb11c0bd0bbe980fb6105">items</a>():</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            rules = list(actions.values())</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="keywordflow">if</span> len(rules) == 1 <span class="keywordflow">and</span> rules[0] &lt; 0:</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a3c460883a16b1e81e805f06225368834">defaulted_states</a>[state] = rules[0]</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#acbbeced44924f5a80b656f9ccb54efd9">  320</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#acbbeced44924f5a80b656f9ccb54efd9">disable_defaulted_states</a>(self):</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a3c460883a16b1e81e805f06225368834">defaulted_states</a> = {}</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa5ed36e665c7ea7d993466a6353a9e7b">  323</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa5ed36e665c7ea7d993466a6353a9e7b">parse</a>(self, input=None, lexer=None, debug=False, tracking=False, tokenfunc=None):</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">if</span> debug <span class="keywordflow">or</span> yaccdevel:</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">if</span> isinstance(debug, int):</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                debug = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html">PlyLogger</a>(sys.stderr)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ab8b0bd6c1c5d0982c022d92231460801">parsedebug</a>(input, lexer, debug, tracking, tokenfunc)</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">elif</span> tracking:</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ab6ec5fa6b00c25416f4890ed225e64ce">parseopt</a>(input, lexer, debug, tracking, tokenfunc)</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a4ff9b87ed49344d817147e0d29456369">parseopt_notrack</a>(input, lexer, debug, tracking, tokenfunc)</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment"># parsedebug().</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment"># This is the debugging enabled version of parse().  All changes made to the</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment"># parsing engine should be made here.   Optimized versions of this function</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment"># are automatically created by the ply/ygen.py script.  This script cuts out</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment"># sections enclosed in markers such as this:</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">#      #--! DEBUG</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">#      statements</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">#      #--! DEBUG</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ab8b0bd6c1c5d0982c022d92231460801">  348</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ab8b0bd6c1c5d0982c022d92231460801">parsedebug</a>(self, input=None, lexer=None, debug=False, tracking=False, tokenfunc=None):</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="comment">#--! parsedebug-start</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        lookahead = <span class="keywordtype">None</span>                         <span class="comment"># Current lookahead symbol</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        lookaheadstack = []                      <span class="comment"># Stack of lookahead symbols</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        actions = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ad1a327d60da5dcf970c7002543318dc9">action</a>                    <span class="comment"># Local reference to action table (to avoid lookup on self.)</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        goto    = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a6f93ab0c66031fd92351327207e78db9">goto</a>                      <span class="comment"># Local reference to goto table (to avoid lookup on self.)</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        prod    = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a8d4a752236aa33c27bea6b77da081750">productions</a>               <span class="comment"># Local reference to production list (to avoid lookup on self.)</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        defaulted_states = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a3c460883a16b1e81e805f06225368834">defaulted_states</a> <span class="comment"># Local reference to defaulted states</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        pslice  = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html">YaccProduction</a>(<span class="keywordtype">None</span>)           <span class="comment"># Production object passed to grammar rules</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        errorcount = 0                           <span class="comment"># Used during error recovery</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        debug.info(<span class="stringliteral">&#39;PLY: PARSE DEBUG START&#39;</span>)</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="comment"># If no lexer was given, we will try to use the lex module</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> lexer:</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keyword">from</span> . <span class="keyword">import</span> lex</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            lexer = lex.lexer</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment"># Set up the lexer and parser objects on pslice</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        pslice.lexer = lexer</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        pslice.parser = self</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="comment"># If input was supplied, pass to lexer</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">if</span> input <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            lexer.input(input)</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordflow">if</span> tokenfunc <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="comment"># Tokenize function</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            get_token = lexer.token</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            get_token = tokenfunc</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="comment"># Set the parser() token method (sometimes used in error recovery)</span></div><div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa512c95efb3b8cf6956c6c85c15098dc">  383</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa512c95efb3b8cf6956c6c85c15098dc">token</a> = get_token</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment"># Set up the state and symbol stacks</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        statestack = []                <span class="comment"># Stack of parsing states</span></div><div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a16fc20e7403f56c469f4ecae9d3125eb">  388</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a16fc20e7403f56c469f4ecae9d3125eb">statestack</a> = statestack</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        symstack   = []                <span class="comment"># Stack of grammar symbols</span></div><div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a778ec68fe40939c1cd7c53ce31803731">  390</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a778ec68fe40939c1cd7c53ce31803731">symstack</a> = symstack</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        pslice.stack = symstack         <span class="comment"># Put in the production</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        errtoken   = <span class="keywordtype">None</span>               <span class="comment"># Err token</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="comment"># The start state is assumed to be (0,$end)</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        statestack.append(0)</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        sym = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        sym.type = <span class="stringliteral">&#39;$end&#39;</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        symstack.append(sym)</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        state = 0</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">while</span> <span class="keyword">True</span>:</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="comment"># Get the next symbol on the input.  If a lookahead symbol</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="comment"># is already set, we just use that. Otherwise, we&#39;ll pull</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="comment"># the next token off of the lookaheadstack or from the lexer</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            debug.debug(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            debug.debug(<span class="stringliteral">&#39;State  : %s&#39;</span>, state)</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">if</span> state <span class="keywordflow">not</span> <span class="keywordflow">in</span> defaulted_states:</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> lookahead:</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> lookaheadstack:</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                        lookahead = get_token()     <span class="comment"># Get the next token</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                        lookahead = lookaheadstack.pop()</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> lookahead:</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        lookahead = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                        lookahead.type = <span class="stringliteral">&#39;$end&#39;</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                <span class="comment"># Check the action table</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                ltype = lookahead.type</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                t = actions[state].get(ltype)</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                t = defaulted_states[state]</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                debug.debug(<span class="stringliteral">&#39;Defaulted state %s: Reduce using %d&#39;</span>, state, -t)</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            debug.debug(<span class="stringliteral">&#39;Stack  : %s&#39;</span>,</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                        (<span class="stringliteral">&#39;%s . %s&#39;</span> % (<span class="stringliteral">&#39; &#39;</span>.join([xx.type <span class="keywordflow">for</span> xx <span class="keywordflow">in</span> symstack][1:]), str(lookahead))).lstrip())</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                <span class="keywordflow">if</span> t &gt; 0:</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    <span class="comment"># shift a symbol on the stack</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    statestack.append(t)</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    state = t</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    debug.debug(<span class="stringliteral">&#39;Action : Shift and goto state %s&#39;</span>, t)</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                    symstack.append(lookahead)</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    lookahead = <span class="keywordtype">None</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                    <span class="comment"># Decrease error count on successful shift</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                    <span class="keywordflow">if</span> errorcount:</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                        errorcount -= 1</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                <span class="keywordflow">if</span> t &lt; 0:</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    <span class="comment"># reduce a symbol on the stack, emit a production</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                    p = prod[-t]</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                    pname = p.name</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                    plen  = p.len</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                    <span class="comment"># Get production function</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                    sym = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                    sym.type = pname       <span class="comment"># Production name</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                    sym.value = <span class="keywordtype">None</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                    <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                    <span class="keywordflow">if</span> plen:</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                        debug.info(<span class="stringliteral">&#39;Action : Reduce rule [%s] with %s and goto state %d&#39;</span>, p.str,</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                                   <span class="stringliteral">&#39;[&#39;</span>+<span class="stringliteral">&#39;,&#39;</span>.join([<a class="code" href="namespacetapps_1_1ply_1_1yacc.html#aafef6f7c39d13e4ddbda18ec818ff5cd">format_stack_entry</a>(_v.value) <span class="keywordflow">for</span> _v <span class="keywordflow">in</span> symstack[-plen:]])+<span class="stringliteral">&#39;]&#39;</span>,</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                                   goto[statestack[-1-plen]][pname])</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                        debug.info(<span class="stringliteral">&#39;Action : Reduce rule [%s] with %s and goto state %d&#39;</span>, p.str, [],</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                                   goto[statestack[-1]][pname])</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                    <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                    <span class="keywordflow">if</span> plen:</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                        targ = symstack[-plen-1:]</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                        targ[0] = sym</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                        <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                        <span class="keywordflow">if</span> tracking:</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                            t1 = targ[1]</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                            sym.lineno = t1.lineno</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                            sym.lexpos = t1.lexpos</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                            t1 = targ[-1]</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                            sym.endlineno = getattr(t1, <span class="stringliteral">&#39;endlineno&#39;</span>, t1.lineno)</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                            sym.endlexpos = getattr(t1, <span class="stringliteral">&#39;endlexpos&#39;</span>, t1.lexpos)</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                        <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                        <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                        <span class="comment"># The code enclosed in this section is duplicated</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                        <span class="comment"># below as a performance optimization.  Make sure</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                        <span class="comment"># changes get made in both locations.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                        pslice.slice = targ</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                            <span class="comment"># Call the grammar rule with our special slice object</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                            del symstack[-plen:]</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                            del statestack[-plen:]</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                            p.callable(pslice)</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                            <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                            debug.info(<span class="stringliteral">&#39;Result : %s&#39;</span>, <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#adc73e296a1379d14f16ce289adcd520a">format_result</a>(pslice[0]))</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                            <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                            symstack.append(sym)</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                            state = goto[statestack[-1]][pname]</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                            statestack.append(state)</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                        <span class="keywordflow">except</span> SyntaxError:</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                            <span class="comment"># If an error was set. Enter error recovery state</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                            lookaheadstack.append(lookahead)</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                            symstack.pop()</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                            statestack.pop()</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                            state = statestack[-1]</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                            sym.type = <span class="stringliteral">&#39;error&#39;</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                            lookahead = sym</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                            errorcount = error_count</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a> = <span class="keyword">False</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                        <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                        <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                        <span class="keywordflow">if</span> tracking:</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                            sym.lineno = lexer.lineno</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                            sym.lexpos = lexer.lexpos</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                        <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                        targ = [sym]</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                        <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                        <span class="comment"># The code enclosed in this section is duplicated</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                        <span class="comment"># above as a performance optimization.  Make sure</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                        <span class="comment"># changes get made in both locations.</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                        pslice.slice = targ</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                            <span class="comment"># Call the grammar rule with our special slice object</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                            p.callable(pslice)</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                            <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                            debug.info(<span class="stringliteral">&#39;Result : %s&#39;</span>, <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#adc73e296a1379d14f16ce289adcd520a">format_result</a>(pslice[0]))</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                            <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                            symstack.append(sym)</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                            state = goto[statestack[-1]][pname]</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                            statestack.append(state)</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                        <span class="keywordflow">except</span> SyntaxError:</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                            <span class="comment"># If an error was set. Enter error recovery state</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                            lookaheadstack.append(lookahead)</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                            symstack.pop()</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                            statestack.pop()</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                            state = statestack[-1]</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                            sym.type = <span class="stringliteral">&#39;error&#39;</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                            lookahead = sym</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                            errorcount = error_count</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a> = <span class="keyword">False</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                        <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <span class="keywordflow">if</span> t == 0:</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                    n = symstack[-1]</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    result = getattr(n, <span class="stringliteral">&#39;value&#39;</span>, <span class="keywordtype">None</span>)</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                    <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                    debug.info(<span class="stringliteral">&#39;Done   : Returning %s&#39;</span>, <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#adc73e296a1379d14f16ce289adcd520a">format_result</a>(result))</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                    debug.info(<span class="stringliteral">&#39;PLY: PARSE DEBUG END&#39;</span>)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                    <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                    <span class="keywordflow">return</span> result</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                debug.error(<span class="stringliteral">&#39;Error  : %s&#39;</span>,</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                            (<span class="stringliteral">&#39;%s . %s&#39;</span> % (<span class="stringliteral">&#39; &#39;</span>.join([xx.type <span class="keywordflow">for</span> xx <span class="keywordflow">in</span> symstack][1:]), str(lookahead))).lstrip())</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <span class="comment">#--! DEBUG</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                <span class="comment"># We have some kind of parsing error here.  To handle</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="comment"># this, we are going to push the current token onto</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                <span class="comment"># the tokenstack and replace it with an &#39;error&#39; token.</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                <span class="comment"># If there are any synchronization rules, they may</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                <span class="comment"># catch it.</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                <span class="comment">#</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                <span class="comment"># In addition to pushing the error token, we call call</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                <span class="comment"># the user defined p_error() function if this is the</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                <span class="comment"># first syntax error.  This function is only called if</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                <span class="comment"># errorcount == 0.</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                <span class="keywordflow">if</span> errorcount == 0 <span class="keywordflow">or</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a>:</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                    errorcount = error_count</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a> = <span class="keyword">False</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                    errtoken = lookahead</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                    <span class="keywordflow">if</span> errtoken.type == <span class="stringliteral">&#39;$end&#39;</span>:</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                        errtoken = <span class="keywordtype">None</span>               <span class="comment"># End of file!</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                    <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa1a4b0e3ab1bf948ce06d0f658d932dc">errorfunc</a>:</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                        <span class="keywordflow">if</span> errtoken <span class="keywordflow">and</span> <span class="keywordflow">not</span> hasattr(errtoken, <span class="stringliteral">&#39;lexer&#39;</span>):</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                            errtoken.lexer = lexer</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                        tok = <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#ab0911ad2047883376212107c528688ea">call_errorfunc</a>(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa1a4b0e3ab1bf948ce06d0f658d932dc">errorfunc</a>, errtoken, self)</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a>:</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                            <span class="comment"># User must have done some kind of panic</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                            <span class="comment"># mode recovery on their own.  The</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                            <span class="comment"># returned token is the next lookahead</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                            lookahead = tok</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                            errtoken = <span class="keywordtype">None</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                            <span class="keywordflow">continue</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                        <span class="keywordflow">if</span> errtoken:</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                            <span class="keywordflow">if</span> hasattr(errtoken, <span class="stringliteral">&#39;lineno&#39;</span>):</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                lineno = lookahead.lineno</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                lineno = 0</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                            <span class="keywordflow">if</span> lineno:</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                sys.stderr.write(<span class="stringliteral">&#39;yacc: Syntax error at line %d, token=%s\n&#39;</span> % (lineno, errtoken.type))</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                sys.stderr.write(<span class="stringliteral">&#39;yacc: Syntax error, token=%s&#39;</span> % errtoken.type)</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                            sys.stderr.write(<span class="stringliteral">&#39;yacc: Parse error in input. EOF\n&#39;</span>)</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                            <span class="keywordflow">return</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                    errorcount = error_count</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                <span class="comment"># case 1:  the statestack only has 1 entry on it.  If we&#39;re in this state, the</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="comment"># entire parse has been rolled back and we&#39;re completely hosed.   The token is</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <span class="comment"># discarded and we just keep going.</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="keywordflow">if</span> len(statestack) &lt;= 1 <span class="keywordflow">and</span> lookahead.type != <span class="stringliteral">&#39;$end&#39;</span>:</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    lookahead = <span class="keywordtype">None</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    errtoken = <span class="keywordtype">None</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                    state = 0</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                    <span class="comment"># Nuke the pushback stack</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                    del lookaheadstack[:]</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                <span class="comment"># case 2: the statestack has a couple of entries on it, but we&#39;re</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <span class="comment"># at the end of the file. nuke the top entry and generate an error token</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                <span class="comment"># Start nuking entries on the stack</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="keywordflow">if</span> lookahead.type == <span class="stringliteral">&#39;$end&#39;</span>:</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                    <span class="comment"># Whoa. We&#39;re really hosed here. Bail out</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                    <span class="keywordflow">return</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                <span class="keywordflow">if</span> lookahead.type != <span class="stringliteral">&#39;error&#39;</span>:</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                    sym = symstack[-1]</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                    <span class="keywordflow">if</span> sym.type == <span class="stringliteral">&#39;error&#39;</span>:</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                        <span class="comment"># Hmmm. Error is on top of stack, we&#39;ll just nuke input</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                        <span class="comment"># symbol and continue</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                        <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                        <span class="keywordflow">if</span> tracking:</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                            sym.endlineno = getattr(lookahead, <span class="stringliteral">&#39;lineno&#39;</span>, sym.lineno)</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                            sym.endlexpos = getattr(lookahead, <span class="stringliteral">&#39;lexpos&#39;</span>, sym.lexpos)</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                        <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                        lookahead = <span class="keywordtype">None</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                    <span class="comment"># Create the error symbol for the first time and make it the new lookahead symbol</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                    t = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                    t.type = <span class="stringliteral">&#39;error&#39;</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                    <span class="keywordflow">if</span> hasattr(lookahead, <span class="stringliteral">&#39;lineno&#39;</span>):</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                        t.lineno = t.endlineno = lookahead.lineno</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                    <span class="keywordflow">if</span> hasattr(lookahead, <span class="stringliteral">&#39;lexpos&#39;</span>):</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                        t.lexpos = t.endlexpos = lookahead.lexpos</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                    t.value = lookahead</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                    lookaheadstack.append(lookahead)</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                    lookahead = t</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                    sym = symstack.pop()</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                    <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                    <span class="keywordflow">if</span> tracking:</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                        lookahead.lineno = sym.lineno</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                        lookahead.lexpos = sym.lexpos</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                    <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                    statestack.pop()</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                    state = statestack[-1]</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            <span class="comment"># Call an error function here</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&#39;yacc: internal parser error!!!\n&#39;</span>)</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="comment">#--! parsedebug-end</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="comment"># parseopt().</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment"># Optimized version of parse() method.  DO NOT EDIT THIS CODE DIRECTLY!</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="comment"># This code is automatically generated by the ply/ygen.py script. Make</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment"># changes to the parsedebug() method instead.</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ab6ec5fa6b00c25416f4890ed225e64ce">  689</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ab6ec5fa6b00c25416f4890ed225e64ce">parseopt</a>(self, input=None, lexer=None, debug=False, tracking=False, tokenfunc=None):</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="comment">#--! parseopt-start</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        lookahead = <span class="keywordtype">None</span>                         <span class="comment"># Current lookahead symbol</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        lookaheadstack = []                      <span class="comment"># Stack of lookahead symbols</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        actions = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ad1a327d60da5dcf970c7002543318dc9">action</a>                    <span class="comment"># Local reference to action table (to avoid lookup on self.)</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        goto    = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a6f93ab0c66031fd92351327207e78db9">goto</a>                      <span class="comment"># Local reference to goto table (to avoid lookup on self.)</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        prod    = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a8d4a752236aa33c27bea6b77da081750">productions</a>               <span class="comment"># Local reference to production list (to avoid lookup on self.)</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        defaulted_states = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a3c460883a16b1e81e805f06225368834">defaulted_states</a> <span class="comment"># Local reference to defaulted states</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        pslice  = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html">YaccProduction</a>(<span class="keywordtype">None</span>)           <span class="comment"># Production object passed to grammar rules</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        errorcount = 0                           <span class="comment"># Used during error recovery</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="comment"># If no lexer was given, we will try to use the lex module</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> lexer:</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            <span class="keyword">from</span> . <span class="keyword">import</span> lex</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            lexer = lex.lexer</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="comment"># Set up the lexer and parser objects on pslice</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        pslice.lexer = lexer</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        pslice.parser = self</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="comment"># If input was supplied, pass to lexer</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">if</span> input <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            lexer.input(input)</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">if</span> tokenfunc <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            <span class="comment"># Tokenize function</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            get_token = lexer.token</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            get_token = tokenfunc</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="comment"># Set the parser() token method (sometimes used in error recovery)</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa512c95efb3b8cf6956c6c85c15098dc">token</a> = get_token</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="comment"># Set up the state and symbol stacks</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        statestack = []                <span class="comment"># Stack of parsing states</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a16fc20e7403f56c469f4ecae9d3125eb">statestack</a> = statestack</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        symstack   = []                <span class="comment"># Stack of grammar symbols</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a778ec68fe40939c1cd7c53ce31803731">symstack</a> = symstack</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        pslice.stack = symstack         <span class="comment"># Put in the production</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        errtoken   = <span class="keywordtype">None</span>               <span class="comment"># Err token</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="comment"># The start state is assumed to be (0,$end)</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        statestack.append(0)</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        sym = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        sym.type = <span class="stringliteral">&#39;$end&#39;</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        symstack.append(sym)</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        state = 0</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keywordflow">while</span> <span class="keyword">True</span>:</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <span class="comment"># Get the next symbol on the input.  If a lookahead symbol</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            <span class="comment"># is already set, we just use that. Otherwise, we&#39;ll pull</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <span class="comment"># the next token off of the lookaheadstack or from the lexer</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            <span class="keywordflow">if</span> state <span class="keywordflow">not</span> <span class="keywordflow">in</span> defaulted_states:</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> lookahead:</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> lookaheadstack:</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                        lookahead = get_token()     <span class="comment"># Get the next token</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                        lookahead = lookaheadstack.pop()</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> lookahead:</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                        lookahead = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                        lookahead.type = <span class="stringliteral">&#39;$end&#39;</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                <span class="comment"># Check the action table</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                ltype = lookahead.type</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                t = actions[state].get(ltype)</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                t = defaulted_states[state]</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                <span class="keywordflow">if</span> t &gt; 0:</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                    <span class="comment"># shift a symbol on the stack</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                    statestack.append(t)</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                    state = t</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                    symstack.append(lookahead)</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                    lookahead = <span class="keywordtype">None</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                    <span class="comment"># Decrease error count on successful shift</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                    <span class="keywordflow">if</span> errorcount:</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                        errorcount -= 1</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                <span class="keywordflow">if</span> t &lt; 0:</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                    <span class="comment"># reduce a symbol on the stack, emit a production</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                    p = prod[-t]</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                    pname = p.name</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                    plen  = p.len</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                    <span class="comment"># Get production function</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                    sym = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                    sym.type = pname       <span class="comment"># Production name</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                    sym.value = <span class="keywordtype">None</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                    <span class="keywordflow">if</span> plen:</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                        targ = symstack[-plen-1:]</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                        targ[0] = sym</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                        <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                        <span class="keywordflow">if</span> tracking:</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                            t1 = targ[1]</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                            sym.lineno = t1.lineno</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                            sym.lexpos = t1.lexpos</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                            t1 = targ[-1]</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                            sym.endlineno = getattr(t1, <span class="stringliteral">&#39;endlineno&#39;</span>, t1.lineno)</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                            sym.endlexpos = getattr(t1, <span class="stringliteral">&#39;endlexpos&#39;</span>, t1.lexpos)</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                        <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                        <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                        <span class="comment"># The code enclosed in this section is duplicated</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                        <span class="comment"># below as a performance optimization.  Make sure</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                        <span class="comment"># changes get made in both locations.</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                        pslice.slice = targ</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                            <span class="comment"># Call the grammar rule with our special slice object</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                            del symstack[-plen:]</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                            del statestack[-plen:]</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                            p.callable(pslice)</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                            symstack.append(sym)</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                            state = goto[statestack[-1]][pname]</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                            statestack.append(state)</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                        <span class="keywordflow">except</span> SyntaxError:</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                            <span class="comment"># If an error was set. Enter error recovery state</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                            lookaheadstack.append(lookahead)</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                            symstack.pop()</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                            statestack.pop()</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                            state = statestack[-1]</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                            sym.type = <span class="stringliteral">&#39;error&#39;</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                            lookahead = sym</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                            errorcount = error_count</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a> = <span class="keyword">False</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                        <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                        <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                        <span class="keywordflow">if</span> tracking:</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                            sym.lineno = lexer.lineno</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                            sym.lexpos = lexer.lexpos</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                        <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                        targ = [sym]</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                        <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                        <span class="comment"># The code enclosed in this section is duplicated</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                        <span class="comment"># above as a performance optimization.  Make sure</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                        <span class="comment"># changes get made in both locations.</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                        pslice.slice = targ</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                            <span class="comment"># Call the grammar rule with our special slice object</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                            p.callable(pslice)</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                            symstack.append(sym)</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                            state = goto[statestack[-1]][pname]</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                            statestack.append(state)</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                        <span class="keywordflow">except</span> SyntaxError:</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                            <span class="comment"># If an error was set. Enter error recovery state</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                            lookaheadstack.append(lookahead)</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                            symstack.pop()</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                            statestack.pop()</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                            state = statestack[-1]</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                            sym.type = <span class="stringliteral">&#39;error&#39;</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                            lookahead = sym</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                            errorcount = error_count</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a> = <span class="keyword">False</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                        <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                <span class="keywordflow">if</span> t == 0:</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                    n = symstack[-1]</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                    result = getattr(n, <span class="stringliteral">&#39;value&#39;</span>, <span class="keywordtype">None</span>)</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                    <span class="keywordflow">return</span> result</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                <span class="comment"># We have some kind of parsing error here.  To handle</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                <span class="comment"># this, we are going to push the current token onto</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                <span class="comment"># the tokenstack and replace it with an &#39;error&#39; token.</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                <span class="comment"># If there are any synchronization rules, they may</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                <span class="comment"># catch it.</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                <span class="comment">#</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                <span class="comment"># In addition to pushing the error token, we call call</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                <span class="comment"># the user defined p_error() function if this is the</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                <span class="comment"># first syntax error.  This function is only called if</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                <span class="comment"># errorcount == 0.</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                <span class="keywordflow">if</span> errorcount == 0 <span class="keywordflow">or</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a>:</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                    errorcount = error_count</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a> = <span class="keyword">False</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                    errtoken = lookahead</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                    <span class="keywordflow">if</span> errtoken.type == <span class="stringliteral">&#39;$end&#39;</span>:</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                        errtoken = <span class="keywordtype">None</span>               <span class="comment"># End of file!</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                    <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa1a4b0e3ab1bf948ce06d0f658d932dc">errorfunc</a>:</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                        <span class="keywordflow">if</span> errtoken <span class="keywordflow">and</span> <span class="keywordflow">not</span> hasattr(errtoken, <span class="stringliteral">&#39;lexer&#39;</span>):</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                            errtoken.lexer = lexer</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                        tok = <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#ab0911ad2047883376212107c528688ea">call_errorfunc</a>(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa1a4b0e3ab1bf948ce06d0f658d932dc">errorfunc</a>, errtoken, self)</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a>:</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                            <span class="comment"># User must have done some kind of panic</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                            <span class="comment"># mode recovery on their own.  The</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                            <span class="comment"># returned token is the next lookahead</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                            lookahead = tok</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                            errtoken = <span class="keywordtype">None</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                            <span class="keywordflow">continue</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                        <span class="keywordflow">if</span> errtoken:</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                            <span class="keywordflow">if</span> hasattr(errtoken, <span class="stringliteral">&#39;lineno&#39;</span>):</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                                lineno = lookahead.lineno</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                                lineno = 0</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                            <span class="keywordflow">if</span> lineno:</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                                sys.stderr.write(<span class="stringliteral">&#39;yacc: Syntax error at line %d, token=%s\n&#39;</span> % (lineno, errtoken.type))</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                                sys.stderr.write(<span class="stringliteral">&#39;yacc: Syntax error, token=%s&#39;</span> % errtoken.type)</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                            sys.stderr.write(<span class="stringliteral">&#39;yacc: Parse error in input. EOF\n&#39;</span>)</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                            <span class="keywordflow">return</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                    errorcount = error_count</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                <span class="comment"># case 1:  the statestack only has 1 entry on it.  If we&#39;re in this state, the</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                <span class="comment"># entire parse has been rolled back and we&#39;re completely hosed.   The token is</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                <span class="comment"># discarded and we just keep going.</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                <span class="keywordflow">if</span> len(statestack) &lt;= 1 <span class="keywordflow">and</span> lookahead.type != <span class="stringliteral">&#39;$end&#39;</span>:</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                    lookahead = <span class="keywordtype">None</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                    errtoken = <span class="keywordtype">None</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                    state = 0</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                    <span class="comment"># Nuke the pushback stack</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                    del lookaheadstack[:]</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                <span class="comment"># case 2: the statestack has a couple of entries on it, but we&#39;re</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                <span class="comment"># at the end of the file. nuke the top entry and generate an error token</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                <span class="comment"># Start nuking entries on the stack</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                <span class="keywordflow">if</span> lookahead.type == <span class="stringliteral">&#39;$end&#39;</span>:</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                    <span class="comment"># Whoa. We&#39;re really hosed here. Bail out</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                    <span class="keywordflow">return</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                <span class="keywordflow">if</span> lookahead.type != <span class="stringliteral">&#39;error&#39;</span>:</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                    sym = symstack[-1]</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                    <span class="keywordflow">if</span> sym.type == <span class="stringliteral">&#39;error&#39;</span>:</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                        <span class="comment"># Hmmm. Error is on top of stack, we&#39;ll just nuke input</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                        <span class="comment"># symbol and continue</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                        <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                        <span class="keywordflow">if</span> tracking:</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                            sym.endlineno = getattr(lookahead, <span class="stringliteral">&#39;lineno&#39;</span>, sym.lineno)</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                            sym.endlexpos = getattr(lookahead, <span class="stringliteral">&#39;lexpos&#39;</span>, sym.lexpos)</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                        <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                        lookahead = <span class="keywordtype">None</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                    <span class="comment"># Create the error symbol for the first time and make it the new lookahead symbol</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                    t = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                    t.type = <span class="stringliteral">&#39;error&#39;</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                    <span class="keywordflow">if</span> hasattr(lookahead, <span class="stringliteral">&#39;lineno&#39;</span>):</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                        t.lineno = t.endlineno = lookahead.lineno</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                    <span class="keywordflow">if</span> hasattr(lookahead, <span class="stringliteral">&#39;lexpos&#39;</span>):</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                        t.lexpos = t.endlexpos = lookahead.lexpos</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                    t.value = lookahead</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                    lookaheadstack.append(lookahead)</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                    lookahead = t</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                    sym = symstack.pop()</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                    <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                    <span class="keywordflow">if</span> tracking:</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                        lookahead.lineno = sym.lineno</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                        lookahead.lexpos = sym.lexpos</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                    <span class="comment">#--! TRACKING</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                    statestack.pop()</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                    state = statestack[-1]</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            <span class="comment"># Call an error function here</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&#39;yacc: internal parser error!!!\n&#39;</span>)</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="comment">#--! parseopt-end</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="comment"># parseopt_notrack().</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="comment"># Optimized version of parseopt() with line number tracking removed.</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="comment"># DO NOT EDIT THIS CODE DIRECTLY. This code is automatically generated</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="comment"># by the ply/ygen.py script. Make changes to the parsedebug() method instead.</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a4ff9b87ed49344d817147e0d29456369">  989</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a4ff9b87ed49344d817147e0d29456369">parseopt_notrack</a>(self, input=None, lexer=None, debug=False, tracking=False, tokenfunc=None):</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="comment">#--! parseopt-notrack-start</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        lookahead = <span class="keywordtype">None</span>                         <span class="comment"># Current lookahead symbol</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        lookaheadstack = []                      <span class="comment"># Stack of lookahead symbols</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        actions = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ad1a327d60da5dcf970c7002543318dc9">action</a>                    <span class="comment"># Local reference to action table (to avoid lookup on self.)</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        goto    = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a6f93ab0c66031fd92351327207e78db9">goto</a>                      <span class="comment"># Local reference to goto table (to avoid lookup on self.)</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        prod    = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a8d4a752236aa33c27bea6b77da081750">productions</a>               <span class="comment"># Local reference to production list (to avoid lookup on self.)</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        defaulted_states = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a3c460883a16b1e81e805f06225368834">defaulted_states</a> <span class="comment"># Local reference to defaulted states</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        pslice  = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html">YaccProduction</a>(<span class="keywordtype">None</span>)           <span class="comment"># Production object passed to grammar rules</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        errorcount = 0                           <span class="comment"># Used during error recovery</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="comment"># If no lexer was given, we will try to use the lex module</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> lexer:</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <span class="keyword">from</span> . <span class="keyword">import</span> lex</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            lexer = lex.lexer</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <span class="comment"># Set up the lexer and parser objects on pslice</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        pslice.lexer = lexer</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        pslice.parser = self</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="comment"># If input was supplied, pass to lexer</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <span class="keywordflow">if</span> input <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            lexer.input(input)</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="keywordflow">if</span> tokenfunc <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            <span class="comment"># Tokenize function</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            get_token = lexer.token</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            get_token = tokenfunc</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="comment"># Set the parser() token method (sometimes used in error recovery)</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa512c95efb3b8cf6956c6c85c15098dc">token</a> = get_token</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="comment"># Set up the state and symbol stacks</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        statestack = []                <span class="comment"># Stack of parsing states</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a16fc20e7403f56c469f4ecae9d3125eb">statestack</a> = statestack</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        symstack   = []                <span class="comment"># Stack of grammar symbols</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a778ec68fe40939c1cd7c53ce31803731">symstack</a> = symstack</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        pslice.stack = symstack         <span class="comment"># Put in the production</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        errtoken   = <span class="keywordtype">None</span>               <span class="comment"># Err token</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="comment"># The start state is assumed to be (0,$end)</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        statestack.append(0)</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        sym = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        sym.type = <span class="stringliteral">&#39;$end&#39;</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        symstack.append(sym)</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        state = 0</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <span class="keywordflow">while</span> <span class="keyword">True</span>:</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            <span class="comment"># Get the next symbol on the input.  If a lookahead symbol</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <span class="comment"># is already set, we just use that. Otherwise, we&#39;ll pull</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            <span class="comment"># the next token off of the lookaheadstack or from the lexer</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <span class="keywordflow">if</span> state <span class="keywordflow">not</span> <span class="keywordflow">in</span> defaulted_states:</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> lookahead:</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> lookaheadstack:</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                        lookahead = get_token()     <span class="comment"># Get the next token</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                        lookahead = lookaheadstack.pop()</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> lookahead:</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                        lookahead = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                        lookahead.type = <span class="stringliteral">&#39;$end&#39;</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                <span class="comment"># Check the action table</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                ltype = lookahead.type</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                t = actions[state].get(ltype)</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                t = defaulted_states[state]</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                <span class="keywordflow">if</span> t &gt; 0:</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                    <span class="comment"># shift a symbol on the stack</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                    statestack.append(t)</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                    state = t</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                    symstack.append(lookahead)</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                    lookahead = <span class="keywordtype">None</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                    <span class="comment"># Decrease error count on successful shift</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                    <span class="keywordflow">if</span> errorcount:</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                        errorcount -= 1</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                <span class="keywordflow">if</span> t &lt; 0:</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                    <span class="comment"># reduce a symbol on the stack, emit a production</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                    p = prod[-t]</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                    pname = p.name</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                    plen  = p.len</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                    <span class="comment"># Get production function</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                    sym = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                    sym.type = pname       <span class="comment"># Production name</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                    sym.value = <span class="keywordtype">None</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    <span class="keywordflow">if</span> plen:</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                        targ = symstack[-plen-1:]</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                        targ[0] = sym</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                        <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                        <span class="comment"># The code enclosed in this section is duplicated</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                        <span class="comment"># below as a performance optimization.  Make sure</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                        <span class="comment"># changes get made in both locations.</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                        pslice.slice = targ</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                        <span class="keywordflow">try</span>:</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                            <span class="comment"># Call the grammar rule with our special slice object</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                            del symstack[-plen:]</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                            del statestack[-plen:]</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                            p.callable(pslice)</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                            symstack.append(sym)</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                            state = goto[statestack[-1]][pname]</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                            statestack.append(state)</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                        <span class="keywordflow">except</span> SyntaxError:</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                            <span class="comment"># If an error was set. Enter error recovery state</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                            lookaheadstack.append(lookahead)</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                            symstack.pop()</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                            statestack.pop()</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                            state = statestack[-1]</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                            sym.type = <span class="stringliteral">&#39;error&#39;</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                            lookahead = sym</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                            errorcount = error_count</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a> = <span class="keyword">False</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                        <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                        targ = [sym]</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                        <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                        <span class="comment"># The code enclosed in this section is duplicated</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                        <span class="comment"># above as a performance optimization.  Make sure</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                        <span class="comment"># changes get made in both locations.</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                        pslice.slice = targ</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                        <span class="keywordflow">try</span>:</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                            <span class="comment"># Call the grammar rule with our special slice object</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                            p.callable(pslice)</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                            symstack.append(sym)</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                            state = goto[statestack[-1]][pname]</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                            statestack.append(state)</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                        <span class="keywordflow">except</span> SyntaxError:</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                            <span class="comment"># If an error was set. Enter error recovery state</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                            lookaheadstack.append(lookahead)</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                            symstack.pop()</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                            statestack.pop()</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                            state = statestack[-1]</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                            sym.type = <span class="stringliteral">&#39;error&#39;</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                            lookahead = sym</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                            errorcount = error_count</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a> = <span class="keyword">False</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                        <span class="comment"># !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                <span class="keywordflow">if</span> t == 0:</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                    n = symstack[-1]</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                    result = getattr(n, <span class="stringliteral">&#39;value&#39;</span>, <span class="keywordtype">None</span>)</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                    <span class="keywordflow">return</span> result</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                <span class="comment"># We have some kind of parsing error here.  To handle</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                <span class="comment"># this, we are going to push the current token onto</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                <span class="comment"># the tokenstack and replace it with an &#39;error&#39; token.</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                <span class="comment"># If there are any synchronization rules, they may</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                <span class="comment"># catch it.</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                <span class="comment">#</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                <span class="comment"># In addition to pushing the error token, we call call</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                <span class="comment"># the user defined p_error() function if this is the</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                <span class="comment"># first syntax error.  This function is only called if</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                <span class="comment"># errorcount == 0.</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                <span class="keywordflow">if</span> errorcount == 0 <span class="keywordflow">or</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a>:</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                    errorcount = error_count</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a> = <span class="keyword">False</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                    errtoken = lookahead</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                    <span class="keywordflow">if</span> errtoken.type == <span class="stringliteral">&#39;$end&#39;</span>:</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                        errtoken = <span class="keywordtype">None</span>               <span class="comment"># End of file!</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                    <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa1a4b0e3ab1bf948ce06d0f658d932dc">errorfunc</a>:</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                        <span class="keywordflow">if</span> errtoken <span class="keywordflow">and</span> <span class="keywordflow">not</span> hasattr(errtoken, <span class="stringliteral">&#39;lexer&#39;</span>):</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                            errtoken.lexer = lexer</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                        tok = <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#ab0911ad2047883376212107c528688ea">call_errorfunc</a>(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa1a4b0e3ab1bf948ce06d0f658d932dc">errorfunc</a>, errtoken, self)</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">errorok</a>:</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                            <span class="comment"># User must have done some kind of panic</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                            <span class="comment"># mode recovery on their own.  The</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                            <span class="comment"># returned token is the next lookahead</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                            lookahead = tok</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                            errtoken = <span class="keywordtype">None</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                            <span class="keywordflow">continue</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                        <span class="keywordflow">if</span> errtoken:</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                            <span class="keywordflow">if</span> hasattr(errtoken, <span class="stringliteral">&#39;lineno&#39;</span>):</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                                lineno = lookahead.lineno</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                            <span class="keywordflow">else</span>:</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                                lineno = 0</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                            <span class="keywordflow">if</span> lineno:</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                                sys.stderr.write(<span class="stringliteral">&#39;yacc: Syntax error at line %d, token=%s\n&#39;</span> % (lineno, errtoken.type))</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                            <span class="keywordflow">else</span>:</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                                sys.stderr.write(<span class="stringliteral">&#39;yacc: Syntax error, token=%s&#39;</span> % errtoken.type)</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                        <span class="keywordflow">else</span>:</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                            sys.stderr.write(<span class="stringliteral">&#39;yacc: Parse error in input. EOF\n&#39;</span>)</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                            <span class="keywordflow">return</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                    errorcount = error_count</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                <span class="comment"># case 1:  the statestack only has 1 entry on it.  If we&#39;re in this state, the</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                <span class="comment"># entire parse has been rolled back and we&#39;re completely hosed.   The token is</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                <span class="comment"># discarded and we just keep going.</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                <span class="keywordflow">if</span> len(statestack) &lt;= 1 <span class="keywordflow">and</span> lookahead.type != <span class="stringliteral">&#39;$end&#39;</span>:</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                    lookahead = <span class="keywordtype">None</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                    errtoken = <span class="keywordtype">None</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                    state = 0</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                    <span class="comment"># Nuke the pushback stack</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                    del lookaheadstack[:]</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                <span class="comment"># case 2: the statestack has a couple of entries on it, but we&#39;re</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                <span class="comment"># at the end of the file. nuke the top entry and generate an error token</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                <span class="comment"># Start nuking entries on the stack</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                <span class="keywordflow">if</span> lookahead.type == <span class="stringliteral">&#39;$end&#39;</span>:</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                    <span class="comment"># Whoa. We&#39;re really hosed here. Bail out</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                    <span class="keywordflow">return</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                <span class="keywordflow">if</span> lookahead.type != <span class="stringliteral">&#39;error&#39;</span>:</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                    sym = symstack[-1]</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                    <span class="keywordflow">if</span> sym.type == <span class="stringliteral">&#39;error&#39;</span>:</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                        <span class="comment"># Hmmm. Error is on top of stack, we&#39;ll just nuke input</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                        <span class="comment"># symbol and continue</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                        lookahead = <span class="keywordtype">None</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                    <span class="comment"># Create the error symbol for the first time and make it the new lookahead symbol</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                    t = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">YaccSymbol</a>()</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                    t.type = <span class="stringliteral">&#39;error&#39;</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                    <span class="keywordflow">if</span> hasattr(lookahead, <span class="stringliteral">&#39;lineno&#39;</span>):</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                        t.lineno = t.endlineno = lookahead.lineno</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                    <span class="keywordflow">if</span> hasattr(lookahead, <span class="stringliteral">&#39;lexpos&#39;</span>):</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                        t.lexpos = t.endlexpos = lookahead.lexpos</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                    t.value = lookahead</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                    lookaheadstack.append(lookahead)</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                    lookahead = t</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                    sym = symstack.pop()</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                    statestack.pop()</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                    state = statestack[-1]</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            <span class="comment"># Call an error function here</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&#39;yacc: internal parser error!!!\n&#39;</span>)</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <span class="comment">#--! parseopt-notrack-end</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="comment">#                          === Grammar Representation ===</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="comment"># The following functions, classes, and variables are used to represent and</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="comment"># manipulate the rules that make up a grammar.</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="comment"># regex matching identifiers</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;_is_identifier = re.compile(<span class="stringliteral">r&#39;^[a-zA-Z0-9_-]+$&#39;</span>)</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment"># class Production:</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment"># This class stores the raw information about a single production or grammar rule.</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment"># A grammar rule refers to a specification such as this:</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment">#       expr : expr PLUS term</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment"># Here are the basic attributes defined on all productions</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="comment">#       name     - Name of the production.  For example &#39;expr&#39;</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;<span class="comment">#       prod     - A list of symbols on the right side [&#39;expr&#39;,&#39;PLUS&#39;,&#39;term&#39;]</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="comment">#       prec     - Production precedence level</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="comment">#       number   - Production number.</span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="comment">#       func     - Function that executes on reduce</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="comment">#       file     - File where production function is defined</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment">#       lineno   - Line number where production function is defined</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment"># The following attributes are defined or optional.</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment">#       len       - Length of the production (number of symbols on right hand side)</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="comment">#       usyms     - Set of unique symbols found in the production</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html"> 1291</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html">Production</a>(object):</div><div class="line"><a name="l01292"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad53e31f159d52c57d352d75f388ff81a"> 1292</a></span>&#160;    reduced = 0</div><div class="line"><a name="l01293"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a82ec2d1b4af4de7beca960951a2781fc"> 1293</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a82ec2d1b4af4de7beca960951a2781fc">__init__</a>(self, number, name, prod, precedence=(<span class="stringliteral">&#39;right&#39;</span>, 0), func=<span class="keywordtype">None</span>, file=<span class="stringliteral">&#39;&#39;</span>, line=0):</div><div class="line"><a name="l01294"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#aab137e68ee5406343349eefe80e89423"> 1294</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#aab137e68ee5406343349eefe80e89423">name</a>     = name</div><div class="line"><a name="l01295"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad8b611f5cf87fe11dbd97a11ec2c3372"> 1295</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad8b611f5cf87fe11dbd97a11ec2c3372">prod</a>     = tuple(prod)</div><div class="line"><a name="l01296"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad5acdc2799af23f43e60c6fe09c153d7"> 1296</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad5acdc2799af23f43e60c6fe09c153d7">number</a>   = number</div><div class="line"><a name="l01297"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a54e16873bc816c97a7efab59eac6173d"> 1297</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a54e16873bc816c97a7efab59eac6173d">func</a>     = func</div><div class="line"><a name="l01298"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#afb9cdc53c629d792311f76e37f8018cb"> 1298</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#afb9cdc53c629d792311f76e37f8018cb">callable</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l01299"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7c8e23089364bc3dea3afdfdbe5f08b2"> 1299</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7c8e23089364bc3dea3afdfdbe5f08b2">file</a>     = file</div><div class="line"><a name="l01300"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7cd4ec3d747522b0af018cec6df02735"> 1300</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7cd4ec3d747522b0af018cec6df02735">line</a>     = line</div><div class="line"><a name="l01301"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a5c80738d949196c56bf3bb17d6b56977"> 1301</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a5c80738d949196c56bf3bb17d6b56977">prec</a>     = precedence</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="comment"># Internal settings used during table construction</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div><div class="line"><a name="l01305"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad95d6e1f87e7a544e417d108fa72a295"> 1305</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad95d6e1f87e7a544e417d108fa72a295">len</a>  = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad95d6e1f87e7a544e417d108fa72a295">len</a>(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad8b611f5cf87fe11dbd97a11ec2c3372">prod</a>)   <span class="comment"># Length of the production</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="comment"># Create a list of unique production symbols used in the production</span></div><div class="line"><a name="l01308"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a6119005ba5422ef105e806fa8e900911"> 1308</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a6119005ba5422ef105e806fa8e900911">usyms</a> = []</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        <span class="keywordflow">for</span> s <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad8b611f5cf87fe11dbd97a11ec2c3372">prod</a>:</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            <span class="keywordflow">if</span> s <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a6119005ba5422ef105e806fa8e900911">usyms</a>:</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a6119005ba5422ef105e806fa8e900911">usyms</a>.append(s)</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="comment"># List of all LR items for the production</span></div><div class="line"><a name="l01314"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a82956ab85296ec1d898be66db2ac1115"> 1314</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a82956ab85296ec1d898be66db2ac1115">lr_items</a> = []</div><div class="line"><a name="l01315"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#aaf79f149fb7cc7355e3d46635498c4a7"> 1315</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#aaf79f149fb7cc7355e3d46635498c4a7">lr_next</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <span class="comment"># Create a string representation</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad8b611f5cf87fe11dbd97a11ec2c3372">prod</a>:</div><div class="line"><a name="l01319"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a84076af696f8c8bcc01ff8a9b9f4e1c1"> 1319</a></span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a84076af696f8c8bcc01ff8a9b9f4e1c1">str</a> = <span class="stringliteral">&#39;%s -&gt; %s&#39;</span> % (self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#aab137e68ee5406343349eefe80e89423">name</a>, <span class="stringliteral">&#39; &#39;</span>.join(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad8b611f5cf87fe11dbd97a11ec2c3372">prod</a>))</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a84076af696f8c8bcc01ff8a9b9f4e1c1">str</a> = <span class="stringliteral">&#39;%s -&gt; &lt;empty&gt;&#39;</span> % self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#aab137e68ee5406343349eefe80e89423">name</a></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div><div class="line"><a name="l01323"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a0b45b216a5e385106cbe78b9e33f8cd8"> 1323</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a0b45b216a5e385106cbe78b9e33f8cd8">__str__</a>(self):</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a84076af696f8c8bcc01ff8a9b9f4e1c1">str</a></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7d7e6634a0979131c2c15c595343a91f"> 1326</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7d7e6634a0979131c2c15c595343a91f">__repr__</a>(self):</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;Production(&#39;</span> + <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a84076af696f8c8bcc01ff8a9b9f4e1c1">str</a>(self) + <span class="stringliteral">&#39;)&#39;</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad964ac6aa11f03e1fd5f0ad273050700"> 1329</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad964ac6aa11f03e1fd5f0ad273050700">__len__</a>(self):</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad95d6e1f87e7a544e417d108fa72a295">len</a>(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad8b611f5cf87fe11dbd97a11ec2c3372">prod</a>)</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7034ab8e1df27949b3c9185349af8032"> 1332</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7034ab8e1df27949b3c9185349af8032">__nonzero__</a>(self):</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <span class="keywordflow">return</span> 1</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div><div class="line"><a name="l01335"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a3b9b2b59271e4ca367d0b120f7581557"> 1335</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a3b9b2b59271e4ca367d0b120f7581557">__getitem__</a>(self, index):</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad8b611f5cf87fe11dbd97a11ec2c3372">prod</a>[index]</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="comment"># Return the nth lr_item from the production (or None if at the end)</span></div><div class="line"><a name="l01339"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a1e6aab8f9a5e8ef7cb2367fc384bebe5"> 1339</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a1e6aab8f9a5e8ef7cb2367fc384bebe5">lr_item</a>(self, n):</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordflow">if</span> n &gt; <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad95d6e1f87e7a544e417d108fa72a295">len</a>(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad8b611f5cf87fe11dbd97a11ec2c3372">prod</a>):</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        p = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html">LRItem</a>(self, n)</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <span class="comment"># Precompute the list of productions immediately following.</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            p.lr_after = Prodnames[p.prod[n+1]]</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordflow">except</span> (IndexError, KeyError):</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            p.lr_after = []</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            p.lr_before = p.prod[n-1]</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <span class="keywordflow">except</span> IndexError:</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            p.lr_before = <span class="keywordtype">None</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="keywordflow">return</span> p</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="comment"># Bind the production function name to a callable</span></div><div class="line"><a name="l01355"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7e544be21abde764f7369d8971d05fe0"> 1355</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7e544be21abde764f7369d8971d05fe0">bind</a>(self, pdict):</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a54e16873bc816c97a7efab59eac6173d">func</a>:</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#afb9cdc53c629d792311f76e37f8018cb">callable</a> = pdict[self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html#a54e16873bc816c97a7efab59eac6173d">func</a>]</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment"># This class serves as a minimal standin for Production objects when</span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment"># reading table data from files.   It only contains information</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment"># actually used by the LR parsing engine, plus some additional</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment"># debugging information.</span></div><div class="line"><a name="l01363"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html"> 1363</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html">MiniProduction</a>(object):</div><div class="line"><a name="l01364"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#ae66fa2d9a342241c0e0b9223e1c5c1c2"> 1364</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#ae66fa2d9a342241c0e0b9223e1c5c1c2">__init__</a>(self, str, name, len, func, file, line):</div><div class="line"><a name="l01365"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a2285f8fe1fb5856c0a7dcb2aa1147203"> 1365</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a2285f8fe1fb5856c0a7dcb2aa1147203">name</a>     = name</div><div class="line"><a name="l01366"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#abb59e74462872f23afea56498a8472ed"> 1366</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#abb59e74462872f23afea56498a8472ed">len</a>      = len</div><div class="line"><a name="l01367"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a01e334e9ef1294c87d56d16406f27fef"> 1367</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a01e334e9ef1294c87d56d16406f27fef">func</a>     = func</div><div class="line"><a name="l01368"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a5ccdfea189a89f5c0eb29d61f084fadc"> 1368</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a5ccdfea189a89f5c0eb29d61f084fadc">callable</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l01369"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a00b40653ae83bb4e256816b989de8f18"> 1369</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a00b40653ae83bb4e256816b989de8f18">file</a>     = file</div><div class="line"><a name="l01370"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#ad40985943ff567f2e5a94ba60d2e70aa"> 1370</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#ad40985943ff567f2e5a94ba60d2e70aa">line</a>     = line</div><div class="line"><a name="l01371"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a9413932c3166e787bbc84bdb437f50db"> 1371</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a9413932c3166e787bbc84bdb437f50db">str</a>      = str</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div><div class="line"><a name="l01373"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a4c4e5829cd314e50d2bc40eab889980f"> 1373</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a4c4e5829cd314e50d2bc40eab889980f">__str__</a>(self):</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a9413932c3166e787bbc84bdb437f50db">str</a></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a6a562543341d98f1cb015a02d728cb0a"> 1376</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a6a562543341d98f1cb015a02d728cb0a">__repr__</a>(self):</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;MiniProduction(%s)&#39;</span> % self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a9413932c3166e787bbc84bdb437f50db">str</a></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="comment"># Bind the production function name to a callable</span></div><div class="line"><a name="l01380"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a6c4e6fbffdd09ad15b052b28d9ee0bd3"> 1380</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a6c4e6fbffdd09ad15b052b28d9ee0bd3">bind</a>(self, pdict):</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a01e334e9ef1294c87d56d16406f27fef">func</a>:</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a5ccdfea189a89f5c0eb29d61f084fadc">callable</a> = pdict[self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a01e334e9ef1294c87d56d16406f27fef">func</a>]</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment"># class LRItem</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment"># This class represents a specific stage of parsing a production rule.  For</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment"># example:</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment">#       expr : expr . PLUS term</span></div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment"># In the above, the &quot;.&quot; represents the current location of the parse.  Here</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment"># basic attributes:</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment">#       name       - Name of the production.  For example &#39;expr&#39;</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment">#       prod       - A list of symbols on the right side [&#39;expr&#39;,&#39;.&#39;, &#39;PLUS&#39;,&#39;term&#39;]</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">#       number     - Production number.</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment">#       lr_next      Next LR item. Example, if we are &#39; expr -&gt; expr . PLUS term&#39;</span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="comment">#                    then lr_next refers to &#39;expr -&gt; expr PLUS . term&#39;</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="comment">#       lr_index   - LR item index (location of the &quot;.&quot;) in the prod list.</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment">#       lookaheads - LALR lookahead symbols for this item</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="comment">#       len        - Length of the production (number of symbols on right hand side)</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment">#       lr_after    - List of all productions that immediately follow</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">#       lr_before   - Grammar symbol immediately before</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html"> 1409</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html">LRItem</a>(object):</div><div class="line"><a name="l01410"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a80b651b5c42a4ead29ed45d8b20a1069"> 1410</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a80b651b5c42a4ead29ed45d8b20a1069">__init__</a>(self, p, n):</div><div class="line"><a name="l01411"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a487101c9cddf8a77a0eccd1bb5a39cf2"> 1411</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a487101c9cddf8a77a0eccd1bb5a39cf2">name</a>       = p.name</div><div class="line"><a name="l01412"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#acfc50bb261cd53beeb1ebdb0d6e49529"> 1412</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#acfc50bb261cd53beeb1ebdb0d6e49529">prod</a>       = list(p.prod)</div><div class="line"><a name="l01413"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a54e6b82dc6585b1000d4e3ebf3be7dbf"> 1413</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a54e6b82dc6585b1000d4e3ebf3be7dbf">number</a>     = p.number</div><div class="line"><a name="l01414"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#ac9d80bb8eac2f55ea01571e0d2320d08"> 1414</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#ac9d80bb8eac2f55ea01571e0d2320d08">lr_index</a>   = n</div><div class="line"><a name="l01415"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a2cbd9301939208d2e66317a4cae14370"> 1415</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a2cbd9301939208d2e66317a4cae14370">lookaheads</a> = {}</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#acfc50bb261cd53beeb1ebdb0d6e49529">prod</a>.insert(n, <span class="stringliteral">&#39;.&#39;</span>)</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#acfc50bb261cd53beeb1ebdb0d6e49529">prod</a>       = tuple(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#acfc50bb261cd53beeb1ebdb0d6e49529">prod</a>)</div><div class="line"><a name="l01418"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a9056e5339a684beda3279314f8b3dd3f"> 1418</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a9056e5339a684beda3279314f8b3dd3f">len</a>        = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a9056e5339a684beda3279314f8b3dd3f">len</a>(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#acfc50bb261cd53beeb1ebdb0d6e49529">prod</a>)</div><div class="line"><a name="l01419"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a8ae3b636a898945475192ded3fdca5b7"> 1419</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a8ae3b636a898945475192ded3fdca5b7">usyms</a>      = p.usyms</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div><div class="line"><a name="l01421"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a5e4a356833fa44bc6177d71693878f73"> 1421</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a5e4a356833fa44bc6177d71693878f73">__str__</a>(self):</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#acfc50bb261cd53beeb1ebdb0d6e49529">prod</a>:</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            s = <span class="stringliteral">&#39;%s -&gt; %s&#39;</span> % (self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a487101c9cddf8a77a0eccd1bb5a39cf2">name</a>, <span class="stringliteral">&#39; &#39;</span>.join(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#acfc50bb261cd53beeb1ebdb0d6e49529">prod</a>))</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;            s = <span class="stringliteral">&#39;%s -&gt; &lt;empty&gt;&#39;</span> % self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a487101c9cddf8a77a0eccd1bb5a39cf2">name</a></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <span class="keywordflow">return</span> s</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a88ce6d85cf5cd1c2d1d77b17b4ba5e65"> 1428</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a88ce6d85cf5cd1c2d1d77b17b4ba5e65">__repr__</a>(self):</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;LRItem(&#39;</span> + str(self) + <span class="stringliteral">&#39;)&#39;</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment"># rightmost_terminal()</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment"># Return the rightmost terminal from a list of symbols.  Used in add_production()</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01436"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#ac0f2d1a87f5c536f171f20db0bd71ad9"> 1436</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetapps_1_1ply_1_1yacc.html#ac0f2d1a87f5c536f171f20db0bd71ad9">rightmost_terminal</a>(symbols, terminals):</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    i = len(symbols) - 1</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keywordflow">while</span> i &gt;= 0:</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <span class="keywordflow">if</span> symbols[i] <span class="keywordflow">in</span> terminals:</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            <span class="keywordflow">return</span> symbols[i]</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        i -= 1</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keywordflow">return</span> <span class="keywordtype">None</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment">#                           === GRAMMAR CLASS ===</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment"># The following class represents the contents of the specified grammar along</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment"># with various computed properties such as first sets, follow sets, LR items, etc.</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="comment"># This data is used for critical parts of the table generation process later.</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div><div class="line"><a name="l01452"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html"> 1452</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_error.html">YaccError</a>):</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="keywordflow">pass</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html"> 1455</a></span>&#160;<span class="keyword">class </span>Grammar(object):</div><div class="line"><a name="l01456"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a15bc4620e55f840d733f462e745f4bae"> 1456</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a15bc4620e55f840d733f462e745f4bae">__init__</a>(self, terminals):</div><div class="line"><a name="l01457"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2"> 1457</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a>  = [<span class="keywordtype">None</span>]  <span class="comment"># A list of all of the productions.  The first</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                                    <span class="comment"># entry is always reserved for the purpose of</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                                    <span class="comment"># building an augmented grammar</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div><div class="line"><a name="l01461"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa1356bc40cddc109b378156b85851fd0"> 1461</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa1356bc40cddc109b378156b85851fd0">Prodnames</a>    = {}      <span class="comment"># A dictionary mapping the names of nonterminals to a list of all</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                                    <span class="comment"># productions of that nonterminal.</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a5d6e2ee7b8da81f7829441d365868b93"> 1464</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a5d6e2ee7b8da81f7829441d365868b93">Prodmap</a>      = {}      <span class="comment"># A dictionary that is only used to detect duplicate</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                                    <span class="comment"># productions.</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208"> 1467</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a>    = {}      <span class="comment"># A dictionary mapping the names of terminal symbols to a</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                                    <span class="comment"># list of the rules where they are used.</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <span class="keywordflow">for</span> term <span class="keywordflow">in</span> terminals:</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a>[term] = []</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a>[<span class="stringliteral">&#39;error&#39;</span>] = []</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;</div><div class="line"><a name="l01475"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365"> 1475</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a> = {}      <span class="comment"># A dictionary mapping names of nonterminals to a list</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                                    <span class="comment"># of rule numbers where they are used.</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div><div class="line"><a name="l01478"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991"> 1478</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991">First</a>        = {}      <span class="comment"># A dictionary of precomputed FIRST(x) symbols</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div><div class="line"><a name="l01480"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00"> 1480</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00">Follow</a>       = {}      <span class="comment"># A dictionary of precomputed FOLLOW(x) symbols</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div><div class="line"><a name="l01482"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a072fe0cf6b141eb2ce41d1be633b84ad"> 1482</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a072fe0cf6b141eb2ce41d1be633b84ad">Precedence</a>   = {}      <span class="comment"># Precedence rules for each terminal. Contains tuples of the</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                                    <span class="comment"># form (&#39;right&#39;,level) or (&#39;nonassoc&#39;, level) or (&#39;left&#39;,level)</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div><div class="line"><a name="l01485"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a071865141104e7b86f968fafead72068"> 1485</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a071865141104e7b86f968fafead72068">UsedPrecedence</a> = set() <span class="comment"># Precedence rules that were actually used by the grammer.</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                                    <span class="comment"># This is only used to provide error checking and to generate</span></div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                                    <span class="comment"># a warning about unused precedence rules.</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div><div class="line"><a name="l01489"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aff3efd647fb2f84ba67a4ca32b84100e"> 1489</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aff3efd647fb2f84ba67a4ca32b84100e">Start</a> = <span class="keywordtype">None</span>           <span class="comment"># Starting symbol for the grammar</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;</div><div class="line"><a name="l01492"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a72610f198c360fff53105b1761e72392"> 1492</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a72610f198c360fff53105b1761e72392">__len__</a>(self):</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        <span class="keywordflow">return</span> len(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a>)</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div><div class="line"><a name="l01495"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a69f085a350fb154c1ab04797269ba56d"> 1495</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a69f085a350fb154c1ab04797269ba56d">__getitem__</a>(self, index):</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a>[index]</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="comment"># set_precedence()</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="comment"># Sets the precedence for a given terminal. assoc is the associativity such as</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="comment"># &#39;left&#39;,&#39;right&#39;, or &#39;nonassoc&#39;.  level is a numeric level.</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div><div class="line"><a name="l01506"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a6a95179ef39ea4e9d9df4d739a99b717"> 1506</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a6a95179ef39ea4e9d9df4d739a99b717">set_precedence</a>(self, term, assoc, level):</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        <span class="keyword">assert</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a> == [<span class="keywordtype">None</span>], <span class="stringliteral">&#39;Must call set_precedence() before add_production()&#39;</span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        <span class="keywordflow">if</span> term <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a072fe0cf6b141eb2ce41d1be633b84ad">Precedence</a>:</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<span class="stringliteral">&#39;Precedence already specified for terminal %r&#39;</span> % term)</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        <span class="keywordflow">if</span> assoc <span class="keywordflow">not</span> <span class="keywordflow">in</span> [<span class="stringliteral">&#39;left&#39;</span>, <span class="stringliteral">&#39;right&#39;</span>, <span class="stringliteral">&#39;nonassoc&#39;</span>]:</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<span class="stringliteral">&quot;Associativity must be one of &#39;left&#39;,&#39;right&#39;, or &#39;nonassoc&#39;&quot;</span>)</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a072fe0cf6b141eb2ce41d1be633b84ad">Precedence</a>[term] = (assoc, level)</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="comment"># add_production()</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="comment"># Given an action function, this function assembles a production rule and</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="comment"># computes its precedence level.</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="comment"># The production rule is supplied as a list of symbols.   For example,</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="comment"># a rule such as &#39;expr : expr PLUS term&#39; has a production name of &#39;expr&#39; and</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="comment"># symbols [&#39;expr&#39;,&#39;PLUS&#39;,&#39;term&#39;].</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="comment"># Precedence is determined by the precedence of the right-most non-terminal</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="comment"># or the precedence of a terminal specified by %prec.</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="comment"># A variety of error checks are performed to make sure production symbols</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="comment"># are valid and that %prec is used correctly.</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;</div><div class="line"><a name="l01531"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a80032e0a6a026ace0a1c3398df8aed4d"> 1531</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a80032e0a6a026ace0a1c3398df8aed4d">add_production</a>(self, prodname, syms, func=None, file=&#39;&#39;, line=0):</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <span class="keywordflow">if</span> prodname <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a>:</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<span class="stringliteral">&#39;%s:%d: Illegal rule name %r. Already defined as a token&#39;</span> % (file, line, prodname))</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <span class="keywordflow">if</span> prodname == <span class="stringliteral">&#39;error&#39;</span>:</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<span class="stringliteral">&#39;%s:%d: Illegal rule name %r. error is a reserved word&#39;</span> % (file, line, prodname))</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> _is_identifier.match(prodname):</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<span class="stringliteral">&#39;%s:%d: Illegal rule name %r&#39;</span> % (file, line, prodname))</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        <span class="comment"># Look for literal tokens</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        <span class="keywordflow">for</span> n, s <span class="keywordflow">in</span> enumerate(syms):</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            <span class="keywordflow">if</span> s[0] <span class="keywordflow">in</span> <span class="stringliteral">&quot;&#39;\&quot;&quot;</span>:</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                <span class="keywordflow">try</span>:</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                    c = eval(s)</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                    <span class="keywordflow">if</span> (len(c) &gt; 1):</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                        <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<span class="stringliteral">&#39;%s:%d: Literal token %s in rule %r may only be a single character&#39;</span> %</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                                           (file, line, s, prodname))</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                    <span class="keywordflow">if</span> c <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a>:</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a>[c] = []</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                    syms[n] = c</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;                <span class="keywordflow">except</span> SyntaxError:</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                    <span class="keywordflow">pass</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> _is_identifier.match(s) <span class="keywordflow">and</span> s != <span class="stringliteral">&#39;%prec&#39;</span>:</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<span class="stringliteral">&#39;%s:%d: Illegal name %r in rule %r&#39;</span> % (file, line, s, prodname))</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        <span class="comment"># Determine the precedence level</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;%prec&#39;</span> <span class="keywordflow">in</span> syms:</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;            <span class="keywordflow">if</span> syms[-1] == <span class="stringliteral">&#39;%prec&#39;</span>:</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;                <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<span class="stringliteral">&#39;%s:%d: Syntax error. Nothing follows %%prec&#39;</span> % (file, line))</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;            <span class="keywordflow">if</span> syms[-2] != <span class="stringliteral">&#39;%prec&#39;</span>:</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;                <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<span class="stringliteral">&#39;%s:%d: Syntax error. %%prec can only appear at the end of a grammar rule&#39;</span> %</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                                   (file, line))</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;            precname = syms[-1]</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;            prodprec = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a072fe0cf6b141eb2ce41d1be633b84ad">Precedence</a>.get(precname)</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> prodprec:</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<span class="stringliteral">&#39;%s:%d: Nothing known about the precedence of %r&#39;</span> % (file, line, precname))</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a071865141104e7b86f968fafead72068">UsedPrecedence</a>.add(precname)</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            del syms[-2:]     <span class="comment"># Drop %prec from the rule</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            <span class="comment"># If no %prec, precedence is determined by the rightmost terminal symbol</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;            precname = <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#ac0f2d1a87f5c536f171f20db0bd71ad9">rightmost_terminal</a>(syms, self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a>)</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;            prodprec = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a072fe0cf6b141eb2ce41d1be633b84ad">Precedence</a>.get(precname, (<span class="stringliteral">&#39;right&#39;</span>, 0))</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        <span class="comment"># See if the rule is already in the rulemap</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        map = <span class="stringliteral">&#39;%s -&gt; %s&#39;</span> % (prodname, syms)</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="keywordflow">if</span> map <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a5d6e2ee7b8da81f7829441d365868b93">Prodmap</a>:</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            m = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a5d6e2ee7b8da81f7829441d365868b93">Prodmap</a>[map]</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<span class="stringliteral">&#39;%s:%d: Duplicate rule %s. &#39;</span> % (file, line, m) +</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                               <span class="stringliteral">&#39;Previous definition at %s:%d&#39;</span> % (m.file, m.line))</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <span class="comment"># From this point on, everything is valid.  Create a new Production instance</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        pnumber  = len(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a>)</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="keywordflow">if</span> prodname <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>:</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>[prodname] = []</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        <span class="comment"># Add the production number to Terminals and Nonterminals</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        <span class="keywordflow">for</span> t <span class="keywordflow">in</span> syms:</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;            <span class="keywordflow">if</span> t <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a>:</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a>[t].append(pnumber)</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                <span class="keywordflow">if</span> t <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>:</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>[t] = []</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>[t].append(pnumber)</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <span class="comment"># Create a production and add it to the list of productions</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        p = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html">Production</a>(pnumber, prodname, syms, prodprec, func, file, line)</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a>.append(p)</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a5d6e2ee7b8da81f7829441d365868b93">Prodmap</a>[map] = p</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <span class="comment"># Add to the global productions list</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa1356bc40cddc109b378156b85851fd0">Prodnames</a>[prodname].append(p)</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <span class="keywordflow">except</span> KeyError:</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa1356bc40cddc109b378156b85851fd0">Prodnames</a>[prodname] = [p]</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="comment"># set_start()</span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <span class="comment"># Sets the starting symbol and creates the augmented grammar.  Production</span></div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="comment"># rule 0 is S&#39; -&gt; start where start is the start symbol.</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;</div><div class="line"><a name="l01615"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a55efe4afdded211dc96009d1bacc1732"> 1615</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a55efe4afdded211dc96009d1bacc1732">set_start</a>(self, start=None):</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> start:</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;            start = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a>[1].name</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        <span class="keywordflow">if</span> start <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>:</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">GrammarError</a>(<span class="stringliteral">&#39;start symbol %s undefined&#39;</span> % start)</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a>[0] = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_production.html">Production</a>(0, <span class="stringliteral">&quot;S&#39;&quot;</span>, [start])</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>[start].append(0)</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aff3efd647fb2f84ba67a4ca32b84100e">Start</a> = start</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="comment"># find_unreachable()</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="comment"># Find all of the nonterminal symbols that can&#39;t be reached from the starting</span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="comment"># symbol.  Returns a list of nonterminals that can&#39;t be reached.</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;</div><div class="line"><a name="l01631"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#afe605efca6ae16ce3484f1fa53ebde7f"> 1631</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#afe605efca6ae16ce3484f1fa53ebde7f">find_unreachable</a>(self):</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <span class="comment"># Mark all symbols that are reachable from a symbol s</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        <span class="keyword">def </span>mark_reachable_from(s):</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;            <span class="keywordflow">if</span> s <span class="keywordflow">in</span> reachable:</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                <span class="keywordflow">return</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;            reachable.add(s)</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;            <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa1356bc40cddc109b378156b85851fd0">Prodnames</a>.get(s, []):</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                <span class="keywordflow">for</span> r <span class="keywordflow">in</span> p.prod:</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                    mark_reachable_from(r)</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        reachable = set()</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        mark_reachable_from(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a>[0].prod[0])</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        <span class="keywordflow">return</span> [s <span class="keywordflow">for</span> s <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a> <span class="keywordflow">if</span> s <span class="keywordflow">not</span> <span class="keywordflow">in</span> reachable]</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="comment"># infinite_cycles()</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    <span class="comment"># This function looks at the various parsing rules and tries to detect</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="comment"># infinite recursion cycles (grammar rules where there is no possible way</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="comment"># to derive a string of only terminals).</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;</div><div class="line"><a name="l01654"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a23070aca1661004541dc7db89e9277d0"> 1654</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a23070aca1661004541dc7db89e9277d0">infinite_cycles</a>(self):</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        terminates = {}</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        <span class="comment"># Terminals:</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        <span class="keywordflow">for</span> t <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a>:</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;            terminates[t] = <span class="keyword">True</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        terminates[<span class="stringliteral">&#39;$end&#39;</span>] = <span class="keyword">True</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <span class="comment"># Nonterminals:</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        <span class="comment"># Initialize to false:</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        <span class="keywordflow">for</span> n <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>:</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;            terminates[n] = <span class="keyword">False</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <span class="comment"># Then propagate termination until no change:</span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        <span class="keywordflow">while</span> <span class="keyword">True</span>:</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            some_change = <span class="keyword">False</span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;            <span class="keywordflow">for</span> (n, pl) <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa1356bc40cddc109b378156b85851fd0">Prodnames</a>.<a class="code" href="namespacetapps_1_1copads_1_1operations.html#ae0cdacee222fb11c0bd0bbe980fb6105">items</a>():</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                <span class="comment"># Nonterminal n terminates iff any of its productions terminates.</span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                <span class="keywordflow">for</span> p <span class="keywordflow">in</span> pl:</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                    <span class="comment"># Production p terminates iff all of its rhs symbols terminate.</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                    <span class="keywordflow">for</span> s <span class="keywordflow">in</span> p.prod:</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                        <span class="keywordflow">if</span> <span class="keywordflow">not</span> terminates[s]:</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                            <span class="comment"># The symbol s does not terminate,</span></div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                            <span class="comment"># so production p does not terminate.</span></div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                            p_terminates = <span class="keyword">False</span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                            <span class="keywordflow">break</span></div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;                        <span class="comment"># didn&#39;t break from the loop,</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                        <span class="comment"># so every symbol s terminates</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                        <span class="comment"># so production p terminates.</span></div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                        p_terminates = <span class="keyword">True</span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                    <span class="keywordflow">if</span> p_terminates:</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;                        <span class="comment"># symbol n terminates!</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;                        <span class="keywordflow">if</span> <span class="keywordflow">not</span> terminates[n]:</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                            terminates[n] = <span class="keyword">True</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                            some_change = <span class="keyword">True</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                        <span class="comment"># Don&#39;t need to consider any more productions for this n.</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                        <span class="keywordflow">break</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> some_change:</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                <span class="keywordflow">break</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        infinite = []</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        <span class="keywordflow">for</span> (s, term) <span class="keywordflow">in</span> terminates.items():</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> term:</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                <span class="keywordflow">if</span> s <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa1356bc40cddc109b378156b85851fd0">Prodnames</a> <span class="keywordflow">and</span> s <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a> <span class="keywordflow">and</span> s != <span class="stringliteral">&#39;error&#39;</span>:</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                    <span class="comment"># s is used-but-not-defined, and we&#39;ve already warned of that,</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                    <span class="comment"># so it would be overkill to say that it&#39;s also non-terminating.</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                    <span class="keywordflow">pass</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                    infinite.append(s)</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="keywordflow">return</span> infinite</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="comment"># undefined_symbols()</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="comment"># Find all symbols that were used the grammar, but not defined as tokens or</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="comment"># grammar rules.  Returns a list of tuples (sym, prod) where sym in the symbol</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="comment"># and prod is the production where the symbol was used.</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01718"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a8a9125c9a2d179c7f6a7b6276566b286"> 1718</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a8a9125c9a2d179c7f6a7b6276566b286">undefined_symbols</a>(self):</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;        result = []</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a>:</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> p:</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;            <span class="keywordflow">for</span> s <span class="keywordflow">in</span> p.prod:</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                <span class="keywordflow">if</span> s <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa1356bc40cddc109b378156b85851fd0">Prodnames</a> <span class="keywordflow">and</span> s <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a> <span class="keywordflow">and</span> s != <span class="stringliteral">&#39;error&#39;</span>:</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                    result.append((s, p))</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        <span class="keywordflow">return</span> result</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="comment"># unused_terminals()</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="comment"># Find all terminals that were defined, but not used by the grammar.  Returns</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <span class="comment"># a list of all symbols.</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01735"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa12309c96eba68c45a02fcce1f5d4a12"> 1735</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa12309c96eba68c45a02fcce1f5d4a12">unused_terminals</a>(self):</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        unused_tok = []</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        <span class="keywordflow">for</span> s, v <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a>.<a class="code" href="namespacetapps_1_1copads_1_1operations.html#ae0cdacee222fb11c0bd0bbe980fb6105">items</a>():</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            <span class="keywordflow">if</span> s != <span class="stringliteral">&#39;error&#39;</span> <span class="keywordflow">and</span> <span class="keywordflow">not</span> v:</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;                unused_tok.append(s)</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        <span class="keywordflow">return</span> unused_tok</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="comment"># ------------------------------------------------------------------------------</span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="comment"># unused_rules()</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="comment"># Find all grammar rules that were defined,  but not used (maybe not reachable)</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="comment"># Returns a list of productions.</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="comment"># ------------------------------------------------------------------------------</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;</div><div class="line"><a name="l01750"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae132f7a17ef8cfbdcae3fddc6239a720"> 1750</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae132f7a17ef8cfbdcae3fddc6239a720">unused_rules</a>(self):</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        unused_prod = []</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        <span class="keywordflow">for</span> s, v <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>.<a class="code" href="namespacetapps_1_1copads_1_1operations.html#ae0cdacee222fb11c0bd0bbe980fb6105">items</a>():</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> v:</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                p = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa1356bc40cddc109b378156b85851fd0">Prodnames</a>[s][0]</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                unused_prod.append(p)</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        <span class="keywordflow">return</span> unused_prod</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="comment"># unused_precedence()</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="comment"># Returns a list of tuples (term,precedence) corresponding to precedence</span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <span class="comment"># rules that were never used by the grammar.  term is the name of the terminal</span></div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="comment"># on which precedence was applied and precedence is a string such as &#39;left&#39; or</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="comment"># &#39;right&#39; corresponding to the type of precedence.</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div><div class="line"><a name="l01767"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a0431afe9e93d9feb6f4681b1ca5b24c7"> 1767</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a0431afe9e93d9feb6f4681b1ca5b24c7">unused_precedence</a>(self):</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        unused = []</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        <span class="keywordflow">for</span> termname <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a072fe0cf6b141eb2ce41d1be633b84ad">Precedence</a>:</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> (termname <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a> <span class="keywordflow">or</span> termname <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a071865141104e7b86f968fafead72068">UsedPrecedence</a>):</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                unused.append((termname, self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a072fe0cf6b141eb2ce41d1be633b84ad">Precedence</a>[termname][0]))</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="keywordflow">return</span> unused</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <span class="comment"># -------------------------------------------------------------------------</span></div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="comment"># _first()</span></div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <span class="comment"># Compute the value of FIRST1(beta) where beta is a tuple of symbols.</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <span class="comment"># During execution of compute_first1, the result may be incomplete.</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="comment"># Afterward (e.g., when called from compute_follow()), it will be complete.</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <span class="comment"># -------------------------------------------------------------------------</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    <span class="keyword">def </span>_first(self, beta):</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="comment"># We are computing First(x1,x2,x3,...,xn)</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        result = []</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        <span class="keywordflow">for</span> x <span class="keywordflow">in</span> beta:</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            x_produces_empty = <span class="keyword">False</span></div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;            <span class="comment"># Add all the non-&lt;empty&gt; symbols of First[x] to the result.</span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <span class="keywordflow">for</span> f <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991">First</a>[x]:</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                <span class="keywordflow">if</span> f == <span class="stringliteral">&#39;&lt;empty&gt;&#39;</span>:</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;                    x_produces_empty = <span class="keyword">True</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                    <span class="keywordflow">if</span> f <span class="keywordflow">not</span> <span class="keywordflow">in</span> result:</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                        result.append(f)</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            <span class="keywordflow">if</span> x_produces_empty:</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;                <span class="comment"># We have to consider the next x in beta,</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;                <span class="comment"># i.e. stay in the loop.</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;                <span class="keywordflow">pass</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                <span class="comment"># We don&#39;t have to consider any further symbols in beta.</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;                <span class="keywordflow">break</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;            <span class="comment"># There was no &#39;break&#39; from the loop,</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            <span class="comment"># so x_produces_empty was true for all x in beta,</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;            <span class="comment"># so beta produces empty as well.</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            result.append(<span class="stringliteral">&#39;&lt;empty&gt;&#39;</span>)</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        <span class="keywordflow">return</span> result</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="comment"># -------------------------------------------------------------------------</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="comment"># compute_first()</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="comment"># Compute the value of FIRST1(X) for all symbols</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="comment"># -------------------------------------------------------------------------</span></div><div class="line"><a name="l01818"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#af700978ef56d17b46b675ed556100127"> 1818</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#af700978ef56d17b46b675ed556100127">compute_first</a>(self):</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991">First</a>:</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991">First</a></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        <span class="comment"># Terminals:</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <span class="keywordflow">for</span> t <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">Terminals</a>:</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991">First</a>[t] = [t]</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991">First</a>[<span class="stringliteral">&#39;$end&#39;</span>] = [<span class="stringliteral">&#39;$end&#39;</span>]</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        <span class="comment"># Nonterminals:</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        <span class="comment"># Initialize to the empty set:</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <span class="keywordflow">for</span> n <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>:</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991">First</a>[n] = []</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        <span class="comment"># Then propagate symbols until no change:</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <span class="keywordflow">while</span> <span class="keyword">True</span>:</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            some_change = <span class="keyword">False</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <span class="keywordflow">for</span> n <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>:</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa1356bc40cddc109b378156b85851fd0">Prodnames</a>[n]:</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                    <span class="keywordflow">for</span> f <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a518e1f3ac4dec6519d7dee95fed82f03">_first</a>(p.prod):</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                        <span class="keywordflow">if</span> f <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991">First</a>[n]:</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991">First</a>[n].append(f)</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                            some_change = <span class="keyword">True</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> some_change:</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                <span class="keywordflow">break</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991">First</a></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="comment"># ---------------------------------------------------------------------</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="comment"># compute_follow()</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <span class="comment"># Computes all of the follow sets for every non-terminal symbol.  The</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <span class="comment"># follow set is the set of all symbols that might follow a given</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <span class="comment"># non-terminal.  See the Dragon book, 2nd Ed. p. 189.</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="comment"># ---------------------------------------------------------------------</span></div><div class="line"><a name="l01855"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ab13faf99aeacf591ad69d8f70f2d40ce"> 1855</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ab13faf99aeacf591ad69d8f70f2d40ce">compute_follow</a>(self, start=None):</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="comment"># If already computed, return the result</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00">Follow</a>:</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00">Follow</a></div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <span class="comment"># If first sets not computed yet, do that first.</span></div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991">First</a>:</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#af700978ef56d17b46b675ed556100127">compute_first</a>()</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        <span class="comment"># Add &#39;$end&#39; to the follow list of the start symbol</span></div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        <span class="keywordflow">for</span> k <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>:</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00">Follow</a>[k] = []</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> start:</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;            start = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a>[1].name</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00">Follow</a>[start] = [<span class="stringliteral">&#39;$end&#39;</span>]</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        <span class="keywordflow">while</span> <span class="keyword">True</span>:</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;            didadd = <span class="keyword">False</span></div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;            <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a>[1:]:</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                <span class="comment"># Here is the production set</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                <span class="keywordflow">for</span> i, B <span class="keywordflow">in</span> enumerate(p.prod):</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                    <span class="keywordflow">if</span> B <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">Nonterminals</a>:</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                        <span class="comment"># Okay. We got a non-terminal in a production</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                        fst = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a518e1f3ac4dec6519d7dee95fed82f03">_first</a>(p.prod[i+1:])</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                        hasempty = <span class="keyword">False</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                        <span class="keywordflow">for</span> f <span class="keywordflow">in</span> fst:</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                            <span class="keywordflow">if</span> f != <span class="stringliteral">&#39;&lt;empty&gt;&#39;</span> <span class="keywordflow">and</span> f <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00">Follow</a>[B]:</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;                                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00">Follow</a>[B].append(f)</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                                didadd = <span class="keyword">True</span></div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                            <span class="keywordflow">if</span> f == <span class="stringliteral">&#39;&lt;empty&gt;&#39;</span>:</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                                hasempty = <span class="keyword">True</span></div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                        <span class="keywordflow">if</span> hasempty <span class="keywordflow">or</span> i == (len(p.prod)-1):</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                            <span class="comment"># Add elements of follow(a) to follow(b)</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                            <span class="keywordflow">for</span> f <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00">Follow</a>[p.name]:</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                                <span class="keywordflow">if</span> f <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00">Follow</a>[B]:</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00">Follow</a>[B].append(f)</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                                    didadd = <span class="keyword">True</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> didadd:</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;                <span class="keywordflow">break</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00">Follow</a></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="comment"># build_lritems()</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="comment"># This function walks the list of productions and builds a complete set of the</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="comment"># LR items.  The LR items are stored in two ways:  First, they are uniquely</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="comment"># numbered and placed in the list _lritems.  Second, a linked list of LR items</span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="comment"># is built for each production.  For example:</span></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <span class="comment">#   E -&gt; E PLUS E</span></div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="comment"># Creates the list</span></div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="comment">#  [E -&gt; . E PLUS E, E -&gt; E . PLUS E, E -&gt; E PLUS . E, E -&gt; E PLUS E . ]</span></div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;</div><div class="line"><a name="l01914"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a49a5c91caacbdcd6c8032035d9e8bd19"> 1914</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a49a5c91caacbdcd6c8032035d9e8bd19">build_lritems</a>(self):</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;        <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">Productions</a>:</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;            lastlri = p</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;            i = 0</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;            lr_items = []</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;            <span class="keywordflow">while</span> <span class="keyword">True</span>:</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                <span class="keywordflow">if</span> i &gt; len(p):</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;                    lri = <span class="keywordtype">None</span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                    lri = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html">LRItem</a>(p, i)</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;                    <span class="comment"># Precompute the list of productions immediately following</span></div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                    <span class="keywordflow">try</span>:</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                        lri.lr_after = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa1356bc40cddc109b378156b85851fd0">Prodnames</a>[lri.prod[i+1]]</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                    <span class="keywordflow">except</span> (IndexError, KeyError):</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                        lri.lr_after = []</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                    <span class="keywordflow">try</span>:</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                        lri.lr_before = lri.prod[i-1]</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                    <span class="keywordflow">except</span> IndexError:</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                        lri.lr_before = <span class="keywordtype">None</span></div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                lastlri.lr_next = lri</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> lri:</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                    <span class="keywordflow">break</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                lr_items.append(lri)</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                lastlri = lri</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                i += 1</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;            p.lr_items = lr_items</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="comment">#                            == Class LRTable ==</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment"># This basic class represents a basic table of LR parsing information.</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment"># Methods for generating the tables are not defined here.  They are defined</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment"># in the derived class LRGeneratedTable.</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;</div><div class="line"><a name="l01950"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_version_error.html"> 1950</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_version_error.html">VersionError</a>(<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_error.html">YaccError</a>):</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <span class="keywordflow">pass</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;</div><div class="line"><a name="l01953"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html"> 1953</a></span>&#160;<span class="keyword">class </span>LRTable(object):</div><div class="line"><a name="l01954"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aa924a0f990a3417b9030349eeab67533"> 1954</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aa924a0f990a3417b9030349eeab67533">__init__</a>(self):</div><div class="line"><a name="l01955"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a81d2d8ed601c9d54c987b51b574f6b50"> 1955</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a81d2d8ed601c9d54c987b51b574f6b50">lr_action</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l01956"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aef170b5fd7a315e2ab213eea43269f84"> 1956</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aef170b5fd7a315e2ab213eea43269f84">lr_goto</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l01957"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a458a786cdeb5a766723c54c1f9742c44"> 1957</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a458a786cdeb5a766723c54c1f9742c44">lr_productions</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l01958"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a17207436b1446559db7043c7520057ae"> 1958</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a17207436b1446559db7043c7520057ae">lr_method</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;</div><div class="line"><a name="l01960"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a2edf84ad6f7583961193059ef59b54ac"> 1960</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a2edf84ad6f7583961193059ef59b54ac">read_table</a>(self, module):</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <span class="keywordflow">if</span> isinstance(module, types.ModuleType):</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;            parsetab = module</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            exec(<span class="stringliteral">&#39;import %s&#39;</span> % module)</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;            parsetab = sys.modules[module]</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        <span class="keywordflow">if</span> parsetab._tabversion != __tabversion__:</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_version_error.html">VersionError</a>(<span class="stringliteral">&#39;yacc table file version is out of date&#39;</span>)</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a81d2d8ed601c9d54c987b51b574f6b50">lr_action</a> = parsetab._lr_action</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aef170b5fd7a315e2ab213eea43269f84">lr_goto</a> = parsetab._lr_goto</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a458a786cdeb5a766723c54c1f9742c44">lr_productions</a> = []</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;        <span class="keywordflow">for</span> p <span class="keywordflow">in</span> parsetab._lr_productions:</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a458a786cdeb5a766723c54c1f9742c44">lr_productions</a>.append(<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html">MiniProduction</a>(*p))</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a17207436b1446559db7043c7520057ae">lr_method</a> = parsetab._lr_method</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        <span class="keywordflow">return</span> parsetab._lr_signature</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;</div><div class="line"><a name="l01980"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a5bfb36b6a8534a0539ecd577ca97c4b0"> 1980</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a5bfb36b6a8534a0539ecd577ca97c4b0">read_pickle</a>(self, filename):</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;            <span class="keyword">import</span> cPickle <span class="keyword">as</span> pickle</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        <span class="keywordflow">except</span> ImportError:</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;            <span class="keyword">import</span> pickle</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        </div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.exists(filename):</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;          <span class="keywordflow">raise</span> ImportError</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        in_f = open(filename, <span class="stringliteral">&#39;rb&#39;</span>)</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        tabversion = pickle.load(in_f)</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        <span class="keywordflow">if</span> tabversion != __tabversion__:</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_version_error.html">VersionError</a>(<span class="stringliteral">&#39;yacc table file version is out of date&#39;</span>)</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a17207436b1446559db7043c7520057ae">lr_method</a> = pickle.load(in_f)</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        signature      = pickle.load(in_f)</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a81d2d8ed601c9d54c987b51b574f6b50">lr_action</a> = pickle.load(in_f)</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aef170b5fd7a315e2ab213eea43269f84">lr_goto</a>   = pickle.load(in_f)</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        productions    = pickle.load(in_f)</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a458a786cdeb5a766723c54c1f9742c44">lr_productions</a> = []</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        <span class="keywordflow">for</span> p <span class="keywordflow">in</span> productions:</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a458a786cdeb5a766723c54c1f9742c44">lr_productions</a>.append(<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html">MiniProduction</a>(*p))</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        in_f.close()</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        <span class="keywordflow">return</span> signature</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <span class="comment"># Bind all production function names to callable objects in pdict</span></div><div class="line"><a name="l02008"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a2ebfc64d2ce17dab26dd81a12d453b92"> 2008</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a2ebfc64d2ce17dab26dd81a12d453b92">bind_callables</a>(self, pdict):</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;        <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a458a786cdeb5a766723c54c1f9742c44">lr_productions</a>:</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;            p.bind(pdict)</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;<span class="comment">#                           === LR Generator ===</span></div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;<span class="comment"># The following classes and functions are used to generate LR parsing tables on</span></div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;<span class="comment"># a grammar.</span></div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;<span class="comment"># digraph()</span></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;<span class="comment"># traverse()</span></div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;<span class="comment"># The following two functions are used to compute set valued functions</span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="comment"># of the form:</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;<span class="comment">#     F(x) = F&#39;(x) U U{F(y) | x R y}</span></div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;<span class="comment"># This is used to compute the values of Read() sets as well as FOLLOW sets</span></div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;<span class="comment"># in LALR(1) generation.</span></div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;<span class="comment"># Inputs:  X    - An input set</span></div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;<span class="comment">#          R    - A relation</span></div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="comment">#          FP   - Set-valued function</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;</div><div class="line"><a name="l02037"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#ac2181d8e9a88efcf81d7086f24df9502"> 2037</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetapps_1_1ply_1_1yacc.html#ac2181d8e9a88efcf81d7086f24df9502">digraph</a>(X, R, FP):</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    N = {}</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keywordflow">for</span> x <span class="keywordflow">in</span> X:</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        N[x] = 0</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    stack = []</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    F = {}</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    <span class="keywordflow">for</span> x <span class="keywordflow">in</span> X:</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        <span class="keywordflow">if</span> N[x] == 0:</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;            <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#a6465bdebad26f3a83f74626384594b63">traverse</a>(x, N, stack, F, X, R, FP)</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    <span class="keywordflow">return</span> F</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;</div><div class="line"><a name="l02048"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#a6465bdebad26f3a83f74626384594b63"> 2048</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetapps_1_1ply_1_1yacc.html#a6465bdebad26f3a83f74626384594b63">traverse</a>(x, N, stack, F, X, R, FP):</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    stack.append(x)</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    d = len(stack)</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    N[x] = d</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    F[x] = FP(x)             <span class="comment"># F(X) &lt;- F&#39;(x)</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    rel = R(x)               <span class="comment"># Get y&#39;s related to x</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <span class="keywordflow">for</span> y <span class="keywordflow">in</span> rel:</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        <span class="keywordflow">if</span> N[y] == 0:</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;            <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#a6465bdebad26f3a83f74626384594b63">traverse</a>(y, N, stack, F, X, R, FP)</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;        N[x] = min(N[x], N[y])</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;        <span class="keywordflow">for</span> a <span class="keywordflow">in</span> F.get(y, []):</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;            <span class="keywordflow">if</span> a <span class="keywordflow">not</span> <span class="keywordflow">in</span> F[x]:</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                F[x].append(a)</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <span class="keywordflow">if</span> N[x] == d:</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;        N[stack[-1]] = MAXINT</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        F[stack[-1]] = F[x]</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        element = stack.pop()</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        <span class="keywordflow">while</span> element != x:</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;            N[stack[-1]] = MAXINT</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;            F[stack[-1]] = F[x]</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;            element = stack.pop()</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;</div><div class="line"><a name="l02071"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_a_l_r_error.html"> 2071</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_a_l_r_error.html">LALRError</a>(<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_error.html">YaccError</a>):</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <span class="keywordflow">pass</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="comment">#                             == LRGeneratedTable ==</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="comment"># This class implements the LR table generation algorithm.  There are no</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;<span class="comment"># public methods except for write()</span></div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;</div><div class="line"><a name="l02081"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html"> 2081</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html">LRGeneratedTable</a>(<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html">LRTable</a>):</div><div class="line"><a name="l02082"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ab94b40c01f0666797d8b96889ac32f90"> 2082</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ab94b40c01f0666797d8b96889ac32f90">__init__</a>(self, grammar, method=&#39;LALR&#39;, log=None):</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <span class="keywordflow">if</span> method <span class="keywordflow">not</span> <span class="keywordflow">in</span> [<span class="stringliteral">&#39;SLR&#39;</span>, <span class="stringliteral">&#39;LALR&#39;</span>]:</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_a_l_r_error.html">LALRError</a>(<span class="stringliteral">&#39;Unsupported method %s&#39;</span> % method)</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div><div class="line"><a name="l02086"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20"> 2086</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a> = grammar</div><div class="line"><a name="l02087"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a8bb28aa5baa330d9e637de42697e973b"> 2087</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a17207436b1446559db7043c7520057ae">lr_method</a> = method</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        <span class="comment"># Set up the logger</span></div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> log:</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            log = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_null_logger.html">NullLogger</a>()</div><div class="line"><a name="l02092"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae5fd31f431ab6a6dc0931f41b7a4546d"> 2092</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae5fd31f431ab6a6dc0931f41b7a4546d">log</a> = log</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        <span class="comment"># Internal attributes</span></div><div class="line"><a name="l02095"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#af744aed19bfc725fdcd2a911a675f0a9"> 2095</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a81d2d8ed601c9d54c987b51b574f6b50">lr_action</a>     = {}        <span class="comment"># Action table</span></div><div class="line"><a name="l02096"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ad0ab2f7585ab478ea6e53db31cc6511f"> 2096</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aef170b5fd7a315e2ab213eea43269f84">lr_goto</a>       = {}        <span class="comment"># Goto table</span></div><div class="line"><a name="l02097"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a9a9c06cbf680ac988bd75c2ab24b7224"> 2097</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a458a786cdeb5a766723c54c1f9742c44">lr_productions</a>  = grammar.Productions    <span class="comment"># Copy of grammar Production array</span></div><div class="line"><a name="l02098"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae94383ba4673170e1c1e737e52d37bc4"> 2098</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae94383ba4673170e1c1e737e52d37bc4">lr_goto_cache</a> = {}        <span class="comment"># Cache of computed gotos</span></div><div class="line"><a name="l02099"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a063a286b1cdc6a2e884c503613e9b334"> 2099</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a063a286b1cdc6a2e884c503613e9b334">lr0_cidhash</a>   = {}        <span class="comment"># Cache of closures</span></div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a55b4729fee1a416affe038771320089f">_add_count</a>    = 0         <span class="comment"># Internal counter used to detect cycles</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        <span class="comment"># Diagonistic information filled in by the table generator</span></div><div class="line"><a name="l02104"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a8f2087123227da17e56e09db8e4153cf"> 2104</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a8f2087123227da17e56e09db8e4153cf">sr_conflict</a>   = 0</div><div class="line"><a name="l02105"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a61eea3de3d019f2ce1b8a081250d223e"> 2105</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a61eea3de3d019f2ce1b8a081250d223e">rr_conflict</a>   = 0</div><div class="line"><a name="l02106"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a7c2df473dd3a059ebb426bcd83f5515d"> 2106</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a7c2df473dd3a059ebb426bcd83f5515d">conflicts</a>     = []        <span class="comment"># List of conflicts</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;</div><div class="line"><a name="l02108"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a219d0a73babfaec45a3fa3ef47e30290"> 2108</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a219d0a73babfaec45a3fa3ef47e30290">sr_conflicts</a>  = []</div><div class="line"><a name="l02109"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a5960fea09eaca58e0947002ab873eff9"> 2109</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a5960fea09eaca58e0947002ab873eff9">rr_conflicts</a>  = []</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        <span class="comment"># Build the tables</span></div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.build_lritems()</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.compute_first()</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.compute_follow()</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#abfa4f2bf45f6072bd0c1405edc58b6e1">lr_parse_table</a>()</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="comment"># Compute the LR(0) closure operation on I, where I is a set of LR(0) items.</span></div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;</div><div class="line"><a name="l02119"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#abd49d2cdc51890345ff9192d7b632caf"> 2119</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#abd49d2cdc51890345ff9192d7b632caf">lr0_closure</a>(self, I):</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a55b4729fee1a416affe038771320089f">_add_count</a> += 1</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        <span class="comment"># Add everything in I to J</span></div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        J = I[:]</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;        didadd = <span class="keyword">True</span></div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;        <span class="keywordflow">while</span> didadd:</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;            didadd = <span class="keyword">False</span></div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            <span class="keywordflow">for</span> j <span class="keywordflow">in</span> J:</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                <span class="keywordflow">for</span> x <span class="keywordflow">in</span> j.lr_after:</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                    <span class="keywordflow">if</span> getattr(x, <span class="stringliteral">&#39;lr0_added&#39;</span>, 0) == self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a55b4729fee1a416affe038771320089f">_add_count</a>:</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                    <span class="comment"># Add B --&gt; .G to J</span></div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                    J.append(x.lr_next)</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                    x.lr0_added = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a55b4729fee1a416affe038771320089f">_add_count</a></div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                    didadd = <span class="keyword">True</span></div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        <span class="keywordflow">return</span> J</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    <span class="comment"># Compute the LR(0) goto function goto(I,X) where I is a set</span></div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="comment"># of LR(0) items and X is a grammar symbol.   This function is written</span></div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <span class="comment"># in a way that guarantees uniqueness of the generated goto sets</span></div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="comment"># (i.e. the same goto set will never be returned as two different Python</span></div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="comment"># objects).  With uniqueness, we can later do fast set comparisons using</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    <span class="comment"># id(obj) instead of element-wise comparison.</span></div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div><div class="line"><a name="l02145"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ad9ce2e91dde5683ee32f1debb5116611"> 2145</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ad9ce2e91dde5683ee32f1debb5116611">lr0_goto</a>(self, I, x):</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        <span class="comment"># First we look for a previously cached entry</span></div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        g = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae94383ba4673170e1c1e737e52d37bc4">lr_goto_cache</a>.get((id(I), x))</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        <span class="keywordflow">if</span> g:</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;            <span class="keywordflow">return</span> g</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;        <span class="comment"># Now we generate the goto set in a way that guarantees uniqueness</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        <span class="comment"># of the result</span></div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        s = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae94383ba4673170e1c1e737e52d37bc4">lr_goto_cache</a>.get(x)</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> s:</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;            s = {}</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae94383ba4673170e1c1e737e52d37bc4">lr_goto_cache</a>[x] = s</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        gs = []</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <span class="keywordflow">for</span> p <span class="keywordflow">in</span> I:</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;            n = p.lr_next</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;            <span class="keywordflow">if</span> n <span class="keywordflow">and</span> n.lr_before == x:</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                s1 = s.get(id(n))</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> s1:</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;                    s1 = {}</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                    s[id(n)] = s1</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;                gs.append(n)</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                s = s1</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;        g = s.get(<span class="stringliteral">&#39;$end&#39;</span>)</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> g:</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;            <span class="keywordflow">if</span> gs:</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                g = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#abd49d2cdc51890345ff9192d7b632caf">lr0_closure</a>(gs)</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                s[<span class="stringliteral">&#39;$end&#39;</span>] = g</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                s[<span class="stringliteral">&#39;$end&#39;</span>] = gs</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae94383ba4673170e1c1e737e52d37bc4">lr_goto_cache</a>[(id(I), x)] = g</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        <span class="keywordflow">return</span> g</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="comment"># Compute the LR(0) sets of item function</span></div><div class="line"><a name="l02180"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#af3f028a894dcb872b0119f1073c5824f"> 2180</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#af3f028a894dcb872b0119f1073c5824f">lr0_items</a>(self):</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;        C = [self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#abd49d2cdc51890345ff9192d7b632caf">lr0_closure</a>([self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.Productions[0].lr_next])]</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;        i = 0</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        <span class="keywordflow">for</span> I <span class="keywordflow">in</span> C:</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a063a286b1cdc6a2e884c503613e9b334">lr0_cidhash</a>[id(I)] = i</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;            i += 1</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        <span class="comment"># Loop over the items in C and each grammar symbols</span></div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        i = 0</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        <span class="keywordflow">while</span> i &lt; len(C):</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;            I = C[i]</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;            i += 1</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;            <span class="comment"># Collect all of the symbols that could possibly be in the goto(I,X) sets</span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;            asyms = {}</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;            <span class="keywordflow">for</span> ii <span class="keywordflow">in</span> I:</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                <span class="keywordflow">for</span> s <span class="keywordflow">in</span> ii.usyms:</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                    asyms[s] = <span class="keywordtype">None</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;            <span class="keywordflow">for</span> x <span class="keywordflow">in</span> asyms:</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                g = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ad9ce2e91dde5683ee32f1debb5116611">lr0_goto</a>(I, x)</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> g <span class="keywordflow">or</span> id(g) <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a063a286b1cdc6a2e884c503613e9b334">lr0_cidhash</a>:</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a063a286b1cdc6a2e884c503613e9b334">lr0_cidhash</a>[id(g)] = len(C)</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                C.append(g)</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        <span class="keywordflow">return</span> C</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="comment">#                       ==== LALR(1) Parsing ====</span></div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <span class="comment"># LALR(1) parsing is almost exactly the same as SLR except that instead of</span></div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <span class="comment"># relying upon Follow() sets when performing reductions, a more selective</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <span class="comment"># lookahead set that incorporates the state of the LR(0) machine is utilized.</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <span class="comment"># Thus, we mainly just have to focus on calculating the lookahead sets.</span></div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="comment"># The method used here is due to DeRemer and Pennelo (1982).</span></div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    <span class="comment"># DeRemer, F. L., and T. J. Pennelo: &quot;Efficient Computation of LALR(1)</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="comment">#     Lookahead Sets&quot;, ACM Transactions on Programming Languages and Systems,</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="comment">#     Vol. 4, No. 4, Oct. 1982, pp. 615-649</span></div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="comment"># Further details can also be found in:</span></div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <span class="comment">#  J. Tremblay and P. Sorenson, &quot;The Theory and Practice of Compiler Writing&quot;,</span></div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="comment">#      McGraw-Hill Book Company, (1985).</span></div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <span class="comment"># compute_nullable_nonterminals()</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    <span class="comment"># Creates a dictionary containing all of the non-terminals that might produce</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <span class="comment"># an empty production.</span></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;</div><div class="line"><a name="l02236"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a2d321f277fb06325fa2c448073086ac6"> 2236</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a2d321f277fb06325fa2c448073086ac6">compute_nullable_nonterminals</a>(self):</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        nullable = set()</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        num_nullable = 0</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        <span class="keywordflow">while</span> <span class="keyword">True</span>:</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.Productions[1:]:</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                <span class="keywordflow">if</span> p.len == 0:</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                    nullable.add(p.name)</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                <span class="keywordflow">for</span> t <span class="keywordflow">in</span> p.prod:</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                    <span class="keywordflow">if</span> t <span class="keywordflow">not</span> <span class="keywordflow">in</span> nullable:</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                        <span class="keywordflow">break</span></div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                    nullable.add(p.name)</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;            <span class="keywordflow">if</span> len(nullable) == num_nullable:</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                <span class="keywordflow">break</span></div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;            num_nullable = len(nullable)</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;        <span class="keywordflow">return</span> nullable</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <span class="comment"># find_nonterminal_trans(C)</span></div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="comment"># Given a set of LR(0) items, this functions finds all of the non-terminal</span></div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="comment"># transitions.    These are transitions in which a dot appears immediately before</span></div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <span class="comment"># a non-terminal.   Returns a list of tuples of the form (state,N) where state</span></div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="comment"># is the state number and N is the nonterminal symbol.</span></div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="comment"># The input C is the set of LR(0) items.</span></div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;</div><div class="line"><a name="l02265"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#af0638d6d0da5cd035c60fb9a22a5342a"> 2265</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#af0638d6d0da5cd035c60fb9a22a5342a">find_nonterminal_transitions</a>(self, C):</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        trans = []</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;        <span class="keywordflow">for</span> stateno, state <span class="keywordflow">in</span> enumerate(C):</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;            <span class="keywordflow">for</span> p <span class="keywordflow">in</span> state:</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;                <span class="keywordflow">if</span> p.lr_index &lt; p.len - 1:</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;                    t = (stateno, p.prod[p.lr_index+1])</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;                    <span class="keywordflow">if</span> t[1] <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.Nonterminals:</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;                        <span class="keywordflow">if</span> t <span class="keywordflow">not</span> <span class="keywordflow">in</span> trans:</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;                            trans.append(t)</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        <span class="keywordflow">return</span> trans</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <span class="comment"># dr_relation()</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="comment"># Computes the DR(p,A) relationships for non-terminal transitions.  The input</span></div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <span class="comment"># is a tuple (state,N) where state is a number and N is a nonterminal symbol.</span></div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <span class="comment"># Returns a list of terminals.</span></div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;</div><div class="line"><a name="l02285"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a5f06ff0f2e4808f6b3b5e0b5dc6abf82"> 2285</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a5f06ff0f2e4808f6b3b5e0b5dc6abf82">dr_relation</a>(self, C, trans, nullable):</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;        dr_set = {}</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;        state, N = trans</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        terms = []</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        g = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ad9ce2e91dde5683ee32f1debb5116611">lr0_goto</a>(C[state], N)</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        <span class="keywordflow">for</span> p <span class="keywordflow">in</span> g:</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;            <span class="keywordflow">if</span> p.lr_index &lt; p.len - 1:</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;                a = p.prod[p.lr_index+1]</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;                <span class="keywordflow">if</span> a <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.Terminals:</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;                    <span class="keywordflow">if</span> a <span class="keywordflow">not</span> <span class="keywordflow">in</span> terms:</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;                        terms.append(a)</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        <span class="comment"># This extra bit is to handle the start state</span></div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;        <span class="keywordflow">if</span> state == 0 <span class="keywordflow">and</span> N == self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.Productions[0].prod[0]:</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;            terms.append(<span class="stringliteral">&#39;$end&#39;</span>)</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;        <span class="keywordflow">return</span> terms</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="comment"># reads_relation()</span></div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <span class="comment"># Computes the READS() relation (p,A) READS (t,C).</span></div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;</div><div class="line"><a name="l02310"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#afaa6b2b7daf4cde0bd7db0e813557751"> 2310</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#afaa6b2b7daf4cde0bd7db0e813557751">reads_relation</a>(self, C, trans, empty):</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        <span class="comment"># Look for empty transitions</span></div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        rel = []</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        state, N = trans</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        g = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ad9ce2e91dde5683ee32f1debb5116611">lr0_goto</a>(C[state], N)</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        j = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a063a286b1cdc6a2e884c503613e9b334">lr0_cidhash</a>.get(id(g), -1)</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        <span class="keywordflow">for</span> p <span class="keywordflow">in</span> g:</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;            <span class="keywordflow">if</span> p.lr_index &lt; p.len - 1:</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                a = p.prod[p.lr_index + 1]</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;                <span class="keywordflow">if</span> a <span class="keywordflow">in</span> empty:</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                    rel.append((j, a))</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;        <span class="keywordflow">return</span> rel</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="comment"># compute_lookback_includes()</span></div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="comment"># Determines the lookback and includes relations</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="comment"># LOOKBACK:</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="comment"># This relation is determined by running the LR(0) state machine forward.</span></div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <span class="comment"># For example, starting with a production &quot;N : . A B C&quot;, we run it forward</span></div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="comment"># to obtain &quot;N : A B C .&quot;   We then build a relationship between this final</span></div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <span class="comment"># state and the starting state.   These relationships are stored in a dictionary</span></div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <span class="comment"># lookdict.</span></div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="comment"># INCLUDES:</span></div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    <span class="comment"># Computes the INCLUDE() relation (p,A) INCLUDES (p&#39;,B).</span></div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    <span class="comment"># This relation is used to determine non-terminal transitions that occur</span></div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    <span class="comment"># inside of other non-terminal transition states.   (p,A) INCLUDES (p&#39;, B)</span></div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    <span class="comment"># if the following holds:</span></div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="comment">#       B -&gt; LAT, where T -&gt; epsilon and p&#39; -L-&gt; p</span></div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <span class="comment"># L is essentially a prefix (which may be empty), T is a suffix that must be</span></div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="comment"># able to derive an empty string.  State p&#39; must lead to state p with the string L.</span></div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;</div><div class="line"><a name="l02353"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a477e091a9c5b59800db180c07aebbfde"> 2353</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a477e091a9c5b59800db180c07aebbfde">compute_lookback_includes</a>(self, C, trans, nullable):</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        lookdict = {}          <span class="comment"># Dictionary of lookback relations</span></div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        includedict = {}       <span class="comment"># Dictionary of include relations</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;        <span class="comment"># Make a dictionary of non-terminal transitions</span></div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;        dtrans = {}</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        <span class="keywordflow">for</span> t <span class="keywordflow">in</span> trans:</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;            dtrans[t] = 1</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        <span class="comment"># Loop over all transitions and compute lookbacks and includes</span></div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        <span class="keywordflow">for</span> state, N <span class="keywordflow">in</span> trans:</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;            lookb = []</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;            includes = []</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;            <span class="keywordflow">for</span> p <span class="keywordflow">in</span> C[state]:</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                <span class="keywordflow">if</span> p.name != N:</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;                <span class="comment"># Okay, we have a name match.  We now follow the production all the way</span></div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                <span class="comment"># through the state machine until we get the . on the right hand side</span></div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;                lr_index = p.lr_index</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;                j = state</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;                <span class="keywordflow">while</span> lr_index &lt; p.len - 1:</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;                    lr_index = lr_index + 1</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;                    t = p.prod[lr_index]</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;                    <span class="comment"># Check to see if this symbol and state are a non-terminal transition</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                    <span class="keywordflow">if</span> (j, t) <span class="keywordflow">in</span> dtrans:</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;                        <span class="comment"># Yes.  Okay, there is some chance that this is an includes relation</span></div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                        <span class="comment"># the only way to know for certain is whether the rest of the</span></div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                        <span class="comment"># production derives empty</span></div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;                        li = lr_index + 1</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                        <span class="keywordflow">while</span> li &lt; p.len:</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;                            <span class="keywordflow">if</span> p.prod[li] <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.Terminals:</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;                                <span class="keywordflow">break</span>      <span class="comment"># No forget it</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                            <span class="keywordflow">if</span> p.prod[li] <span class="keywordflow">not</span> <span class="keywordflow">in</span> nullable:</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                                <span class="keywordflow">break</span></div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;                            li = li + 1</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                        <span class="keywordflow">else</span>:</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;                            <span class="comment"># Appears to be a relation between (j,t) and (state,N)</span></div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                            includes.append((j, t))</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                    g = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ad9ce2e91dde5683ee32f1debb5116611">lr0_goto</a>(C[j], t)               <span class="comment"># Go to next set</span></div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                    j = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a063a286b1cdc6a2e884c503613e9b334">lr0_cidhash</a>.get(id(g), -1)      <span class="comment"># Go to next state</span></div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;                <span class="comment"># When we get here, j is the final state, now we have to locate the production</span></div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;                <span class="keywordflow">for</span> r <span class="keywordflow">in</span> C[j]:</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;                    <span class="keywordflow">if</span> r.name != p.name:</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;                    <span class="keywordflow">if</span> r.len != p.len:</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;                    i = 0</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;                    <span class="comment"># This look is comparing a production &quot;. A B C&quot; with &quot;A B C .&quot;</span></div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                    <span class="keywordflow">while</span> i &lt; r.lr_index:</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                        <span class="keywordflow">if</span> r.prod[i] != p.prod[i+1]:</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                            <span class="keywordflow">break</span></div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                        i = i + 1</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                        lookb.append((j, r))</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> includes:</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;                <span class="keywordflow">if</span> i <span class="keywordflow">not</span> <span class="keywordflow">in</span> includedict:</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                    includedict[i] = []</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                includedict[i].append((state, N))</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;            lookdict[(state, N)] = lookb</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        <span class="keywordflow">return</span> lookdict, includedict</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="comment"># compute_read_sets()</span></div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="comment"># Given a set of LR(0) items, this function computes the read sets.</span></div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    <span class="comment"># Inputs:  C        =  Set of LR(0) items</span></div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <span class="comment">#          ntrans   = Set of nonterminal transitions</span></div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <span class="comment">#          nullable = Set of empty transitions</span></div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="comment"># Returns a set containing the read sets</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;</div><div class="line"><a name="l02433"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a017f320f91312086cd6738ac513f789e"> 2433</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a017f320f91312086cd6738ac513f789e">compute_read_sets</a>(self, C, ntrans, nullable):</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        FP = <span class="keyword">lambda</span> x: self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a5f06ff0f2e4808f6b3b5e0b5dc6abf82">dr_relation</a>(C, x, nullable)</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;        R =  <span class="keyword">lambda</span> x: self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#afaa6b2b7daf4cde0bd7db0e813557751">reads_relation</a>(C, x, nullable)</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        F = <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#ac2181d8e9a88efcf81d7086f24df9502">digraph</a>(ntrans, R, FP)</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        <span class="keywordflow">return</span> F</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    <span class="comment"># compute_follow_sets()</span></div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;    <span class="comment"># Given a set of LR(0) items, a set of non-terminal transitions, a readset,</span></div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <span class="comment"># and an include set, this function computes the follow sets</span></div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    <span class="comment"># Follow(p,A) = Read(p,A) U U {Follow(p&#39;,B) | (p,A) INCLUDES (p&#39;,B)}</span></div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    <span class="comment"># Inputs:</span></div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    <span class="comment">#            ntrans     = Set of nonterminal transitions</span></div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <span class="comment">#            readsets   = Readset (previously computed)</span></div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <span class="comment">#            inclsets   = Include sets (previously computed)</span></div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    <span class="comment"># Returns a set containing the follow sets</span></div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div><div class="line"><a name="l02455"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a119230a1088785ac61eacfd09dd59a80"> 2455</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a119230a1088785ac61eacfd09dd59a80">compute_follow_sets</a>(self, ntrans, readsets, inclsets):</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        FP = <span class="keyword">lambda</span> x: readsets[x]</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;        R  = <span class="keyword">lambda</span> x: inclsets.get(x, [])</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;        F = <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#ac2181d8e9a88efcf81d7086f24df9502">digraph</a>(ntrans, R, FP)</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;        <span class="keywordflow">return</span> F</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    <span class="comment"># add_lookaheads()</span></div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    <span class="comment"># Attaches the lookahead symbols to grammar rules.</span></div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    <span class="comment"># Inputs:    lookbacks         -  Set of lookback relations</span></div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <span class="comment">#            followset         -  Computed follow set</span></div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    <span class="comment"># This function directly attaches the lookaheads to productions contained</span></div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="comment"># in the lookbacks set</span></div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;</div><div class="line"><a name="l02473"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a8115d9e3176a70c4c88c57e70b533210"> 2473</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a8115d9e3176a70c4c88c57e70b533210">add_lookaheads</a>(self, lookbacks, followset):</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;        <span class="keywordflow">for</span> trans, lb <span class="keywordflow">in</span> lookbacks.items():</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;            <span class="comment"># Loop over productions in lookback</span></div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;            <span class="keywordflow">for</span> state, p <span class="keywordflow">in</span> lb:</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                <span class="keywordflow">if</span> state <span class="keywordflow">not</span> <span class="keywordflow">in</span> p.lookaheads:</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                    p.lookaheads[state] = []</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                f = followset.get(trans, [])</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                <span class="keywordflow">for</span> a <span class="keywordflow">in</span> f:</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                    <span class="keywordflow">if</span> a <span class="keywordflow">not</span> <span class="keywordflow">in</span> p.lookaheads[state]:</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                        p.lookaheads[state].append(a)</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    <span class="comment"># add_lalr_lookaheads()</span></div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    <span class="comment"># This function does all of the work of adding lookahead information for use</span></div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    <span class="comment"># with LALR parsing</span></div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;</div><div class="line"><a name="l02491"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae6f012aa814e5294fd049928f3ac4ef5"> 2491</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae6f012aa814e5294fd049928f3ac4ef5">add_lalr_lookaheads</a>(self, C):</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;        <span class="comment"># Determine all of the nullable nonterminals</span></div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;        nullable = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a2d321f277fb06325fa2c448073086ac6">compute_nullable_nonterminals</a>()</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        <span class="comment"># Find all non-terminal transitions</span></div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        trans = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#af0638d6d0da5cd035c60fb9a22a5342a">find_nonterminal_transitions</a>(C)</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;        <span class="comment"># Compute read sets</span></div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        readsets = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a017f320f91312086cd6738ac513f789e">compute_read_sets</a>(C, trans, nullable)</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        <span class="comment"># Compute lookback/includes relations</span></div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;        lookd, included = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a477e091a9c5b59800db180c07aebbfde">compute_lookback_includes</a>(C, trans, nullable)</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        <span class="comment"># Compute LALR FOLLOW sets</span></div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        followsets = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a119230a1088785ac61eacfd09dd59a80">compute_follow_sets</a>(trans, readsets, included)</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;        <span class="comment"># Add all of the lookaheads</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a8115d9e3176a70c4c88c57e70b533210">add_lookaheads</a>(lookd, followsets)</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    <span class="comment"># lr_parse_table()</span></div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <span class="comment"># This function constructs the parse tables for SLR or LALR</span></div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02515"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#abfa4f2bf45f6072bd0c1405edc58b6e1"> 2515</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#abfa4f2bf45f6072bd0c1405edc58b6e1">lr_parse_table</a>(self):</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        Productions = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.Productions</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;        Precedence  = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.Precedence</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;        goto   = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aef170b5fd7a315e2ab213eea43269f84">lr_goto</a>         <span class="comment"># Goto array</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        action = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a81d2d8ed601c9d54c987b51b574f6b50">lr_action</a>       <span class="comment"># Action array</span></div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;        log    = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae5fd31f431ab6a6dc0931f41b7a4546d">log</a>             <span class="comment"># Logger for output</span></div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;        actionp = {}                  <span class="comment"># Action production array (temporary)</span></div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        log.info(<span class="stringliteral">&#39;Parsing method: %s&#39;</span>, self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a17207436b1446559db7043c7520057ae">lr_method</a>)</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;        <span class="comment"># Step 1: Construct C = { I0, I1, ... IN}, collection of LR(0) items</span></div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;        <span class="comment"># This determines the number of states</span></div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;        C = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#af3f028a894dcb872b0119f1073c5824f">lr0_items</a>()</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a17207436b1446559db7043c7520057ae">lr_method</a> == <span class="stringliteral">&#39;LALR&#39;</span>:</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae6f012aa814e5294fd049928f3ac4ef5">add_lalr_lookaheads</a>(C)</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        <span class="comment"># Build the parser table, state by state</span></div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;        st = 0</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;        <span class="keywordflow">for</span> I <span class="keywordflow">in</span> C:</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;            <span class="comment"># Loop over each production in I</span></div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;            actlist = []              <span class="comment"># List of actions</span></div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;            st_action  = {}</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;            st_actionp = {}</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;            st_goto    = {}</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;            log.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;            log.info(<span class="stringliteral">&#39;state %d&#39;</span>, st)</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;            log.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;            <span class="keywordflow">for</span> p <span class="keywordflow">in</span> I:</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                log.info(<span class="stringliteral">&#39;    (%d) %s&#39;</span>, p.number, p)</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;            log.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;            <span class="keywordflow">for</span> p <span class="keywordflow">in</span> I:</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;                    <span class="keywordflow">if</span> p.len == p.lr_index + 1:</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;                        <span class="keywordflow">if</span> p.name == <span class="stringliteral">&quot;S&#39;&quot;</span>:</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;                            <span class="comment"># Start symbol. Accept!</span></div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                            st_action[<span class="stringliteral">&#39;$end&#39;</span>] = 0</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;                            st_actionp[<span class="stringliteral">&#39;$end&#39;</span>] = p</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;                        <span class="keywordflow">else</span>:</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;                            <span class="comment"># We are at the end of a production.  Reduce!</span></div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                            <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a17207436b1446559db7043c7520057ae">lr_method</a> == <span class="stringliteral">&#39;LALR&#39;</span>:</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                                laheads = p.lookaheads[st]</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                            <span class="keywordflow">else</span>:</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;                                laheads = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.Follow[p.name]</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;                            <span class="keywordflow">for</span> a <span class="keywordflow">in</span> laheads:</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;                                actlist.append((a, p, <span class="stringliteral">&#39;reduce using rule %d (%s)&#39;</span> % (p.number, p)))</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;                                r = st_action.get(a)</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;                                <span class="keywordflow">if</span> r <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;                                    <span class="comment"># Whoa. Have a shift/reduce or reduce/reduce conflict</span></div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;                                    <span class="keywordflow">if</span> r &gt; 0:</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;                                        <span class="comment"># Need to decide on shift or reduce here</span></div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;                                        <span class="comment"># By default we favor shifting. Need to add</span></div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                                        <span class="comment"># some precedence rules here.</span></div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;                                        sprec, slevel = Productions[st_actionp[a].number].prec</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;                                        rprec, rlevel = Precedence.get(a, (<span class="stringliteral">&#39;right&#39;</span>, 0))</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;                                        <span class="keywordflow">if</span> (slevel &lt; rlevel) <span class="keywordflow">or</span> ((slevel == rlevel) <span class="keywordflow">and</span> (rprec == <span class="stringliteral">&#39;left&#39;</span>)):</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                                            <span class="comment"># We really need to reduce here.</span></div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                                            st_action[a] = -p.number</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                                            st_actionp[a] = p</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                                            <span class="keywordflow">if</span> <span class="keywordflow">not</span> slevel <span class="keywordflow">and</span> <span class="keywordflow">not</span> rlevel:</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;                                                log.info(<span class="stringliteral">&#39;  ! shift/reduce conflict for %s resolved as reduce&#39;</span>, a)</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;                                                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a219d0a73babfaec45a3fa3ef47e30290">sr_conflicts</a>.append((st, a, <span class="stringliteral">&#39;reduce&#39;</span>))</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;                                            Productions[p.number].reduced += 1</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;                                        <span class="keywordflow">elif</span> (slevel == rlevel) <span class="keywordflow">and</span> (rprec == <span class="stringliteral">&#39;nonassoc&#39;</span>):</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;                                            st_action[a] = <span class="keywordtype">None</span></div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;                                        <span class="keywordflow">else</span>:</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;                                            <span class="comment"># Hmmm. Guess we&#39;ll keep the shift</span></div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;                                            <span class="keywordflow">if</span> <span class="keywordflow">not</span> rlevel:</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;                                                log.info(<span class="stringliteral">&#39;  ! shift/reduce conflict for %s resolved as shift&#39;</span>, a)</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;                                                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a219d0a73babfaec45a3fa3ef47e30290">sr_conflicts</a>.append((st, a, <span class="stringliteral">&#39;shift&#39;</span>))</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                                    <span class="keywordflow">elif</span> r &lt; 0:</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;                                        <span class="comment"># Reduce/reduce conflict.   In this case, we favor the rule</span></div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;                                        <span class="comment"># that was defined first in the grammar file</span></div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                                        oldp = Productions[-r]</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                                        pp = Productions[p.number]</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;                                        <span class="keywordflow">if</span> oldp.line &gt; pp.line:</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                                            st_action[a] = -p.number</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                                            st_actionp[a] = p</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;                                            chosenp, rejectp = pp, oldp</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                                            Productions[p.number].reduced += 1</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                                            Productions[oldp.number].reduced -= 1</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                                        <span class="keywordflow">else</span>:</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                                            chosenp, rejectp = oldp, pp</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;                                        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a5960fea09eaca58e0947002ab873eff9">rr_conflicts</a>.append((st, chosenp, rejectp))</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;                                        log.info(<span class="stringliteral">&#39;  ! reduce/reduce conflict for %s resolved using rule %d (%s)&#39;</span>,</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;                                                 a, st_actionp[a].number, st_actionp[a])</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;                                        <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_a_l_r_error.html">LALRError</a>(<span class="stringliteral">&#39;Unknown conflict in state %d&#39;</span> % st)</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;                                <span class="keywordflow">else</span>:</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;                                    st_action[a] = -p.number</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;                                    st_actionp[a] = p</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;                                    Productions[p.number].reduced += 1</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;                        i = p.lr_index</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;                        a = p.prod[i+1]       <span class="comment"># Get symbol right after the &quot;.&quot;</span></div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;                        <span class="keywordflow">if</span> a <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.Terminals:</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;                            g = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ad9ce2e91dde5683ee32f1debb5116611">lr0_goto</a>(I, a)</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;                            j = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a063a286b1cdc6a2e884c503613e9b334">lr0_cidhash</a>.get(id(g), -1)</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;                            <span class="keywordflow">if</span> j &gt;= 0:</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;                                <span class="comment"># We are in a shift state</span></div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                                actlist.append((a, p, <span class="stringliteral">&#39;shift and go to state %d&#39;</span> % j))</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;                                r = st_action.get(a)</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;                                <span class="keywordflow">if</span> r <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;                                    <span class="comment"># Whoa have a shift/reduce or shift/shift conflict</span></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;                                    <span class="keywordflow">if</span> r &gt; 0:</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                                        <span class="keywordflow">if</span> r != j:</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;                                            <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_a_l_r_error.html">LALRError</a>(<span class="stringliteral">&#39;Shift/shift conflict in state %d&#39;</span> % st)</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;                                    <span class="keywordflow">elif</span> r &lt; 0:</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;                                        <span class="comment"># Do a precedence check.</span></div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                                        <span class="comment">#   -  if precedence of reduce rule is higher, we reduce.</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;                                        <span class="comment">#   -  if precedence of reduce is same and left assoc, we reduce.</span></div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;                                        <span class="comment">#   -  otherwise we shift</span></div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;                                        rprec, rlevel = Productions[st_actionp[a].number].prec</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                                        sprec, slevel = Precedence.get(a, (<span class="stringliteral">&#39;right&#39;</span>, 0))</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                                        <span class="keywordflow">if</span> (slevel &gt; rlevel) <span class="keywordflow">or</span> ((slevel == rlevel) <span class="keywordflow">and</span> (rprec == <span class="stringliteral">&#39;right&#39;</span>)):</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;                                            <span class="comment"># We decide to shift here... highest precedence to shift</span></div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;                                            Productions[st_actionp[a].number].reduced -= 1</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;                                            st_action[a] = j</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;                                            st_actionp[a] = p</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;                                            <span class="keywordflow">if</span> <span class="keywordflow">not</span> rlevel:</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;                                                log.info(<span class="stringliteral">&#39;  ! shift/reduce conflict for %s resolved as shift&#39;</span>, a)</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;                                                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a219d0a73babfaec45a3fa3ef47e30290">sr_conflicts</a>.append((st, a, <span class="stringliteral">&#39;shift&#39;</span>))</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;                                        <span class="keywordflow">elif</span> (slevel == rlevel) <span class="keywordflow">and</span> (rprec == <span class="stringliteral">&#39;nonassoc&#39;</span>):</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;                                            st_action[a] = <span class="keywordtype">None</span></div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;                                        <span class="keywordflow">else</span>:</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;                                            <span class="comment"># Hmmm. Guess we&#39;ll keep the reduce</span></div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;                                            <span class="keywordflow">if</span> <span class="keywordflow">not</span> slevel <span class="keywordflow">and</span> <span class="keywordflow">not</span> rlevel:</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;                                                log.info(<span class="stringliteral">&#39;  ! shift/reduce conflict for %s resolved as reduce&#39;</span>, a)</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;                                                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a219d0a73babfaec45a3fa3ef47e30290">sr_conflicts</a>.append((st, a, <span class="stringliteral">&#39;reduce&#39;</span>))</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;                                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;                                        <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_a_l_r_error.html">LALRError</a>(<span class="stringliteral">&#39;Unknown conflict in state %d&#39;</span> % st)</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;                                <span class="keywordflow">else</span>:</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;                                    st_action[a] = j</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;                                    st_actionp[a] = p</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;            <span class="comment"># Print the actions associated with each terminal</span></div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;            _actprint = {}</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;            <span class="keywordflow">for</span> a, p, m <span class="keywordflow">in</span> actlist:</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;                <span class="keywordflow">if</span> a <span class="keywordflow">in</span> st_action:</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;                    <span class="keywordflow">if</span> p <span class="keywordflow">is</span> st_actionp[a]:</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;                        log.info(<span class="stringliteral">&#39;    %-15s %s&#39;</span>, a, m)</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;                        _actprint[(a, m)] = 1</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;            log.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;            <span class="comment"># Print the actions that were not used. (debugging)</span></div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;            not_used = 0</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;            <span class="keywordflow">for</span> a, p, m <span class="keywordflow">in</span> actlist:</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;                <span class="keywordflow">if</span> a <span class="keywordflow">in</span> st_action:</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;                    <span class="keywordflow">if</span> p <span class="keywordflow">is</span> <span class="keywordflow">not</span> st_actionp[a]:</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;                        <span class="keywordflow">if</span> <span class="keywordflow">not</span> (a, m) <span class="keywordflow">in</span> _actprint:</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                            log.debug(<span class="stringliteral">&#39;  ! %-15s [ %s ]&#39;</span>, a, m)</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;                            not_used = 1</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;                            _actprint[(a, m)] = 1</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;            <span class="keywordflow">if</span> not_used:</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;                log.debug(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;            <span class="comment"># Construct the goto table for this state</span></div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;            nkeys = {}</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;            <span class="keywordflow">for</span> ii <span class="keywordflow">in</span> I:</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;                <span class="keywordflow">for</span> s <span class="keywordflow">in</span> ii.usyms:</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;                    <span class="keywordflow">if</span> s <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">grammar</a>.Nonterminals:</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;                        nkeys[s] = <span class="keywordtype">None</span></div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;            <span class="keywordflow">for</span> n <span class="keywordflow">in</span> nkeys:</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;                g = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ad9ce2e91dde5683ee32f1debb5116611">lr0_goto</a>(I, n)</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;                j = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a063a286b1cdc6a2e884c503613e9b334">lr0_cidhash</a>.get(id(g), -1)</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;                <span class="keywordflow">if</span> j &gt;= 0:</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                    st_goto[n] = j</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;                    log.info(<span class="stringliteral">&#39;    %-30s shift and go to state %d&#39;</span>, n, j)</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;            action[st] = st_action</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;            actionp[st] = st_actionp</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;            goto[st] = st_goto</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;            st += 1</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="comment"># write()</span></div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="comment"># This function writes the LR parsing tables to a file</span></div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;</div><div class="line"><a name="l02698"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#aa673524fb42a1545418b73a8fa291cf6"> 2698</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#aa673524fb42a1545418b73a8fa291cf6">write_table</a>(self, tabmodule, outputdir=&#39;&#39;, signature=&#39;&#39;):</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <span class="keywordflow">if</span> isinstance(tabmodule, types.ModuleType):</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;            <span class="keywordflow">raise</span> IOError(<span class="stringliteral">&quot;Won&#39;t overwrite existing tabmodule&quot;</span>)</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;        basemodulename = tabmodule.split(<span class="stringliteral">&#39;.&#39;</span>)[-1]</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;        filename = os.path.join(outputdir, basemodulename) + <span class="stringliteral">&#39;.py&#39;</span></div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;            f = open(filename, <span class="stringliteral">&#39;w&#39;</span>)</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;            f.write(<span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;<span class="stringliteral"># %s</span></div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;<span class="stringliteral"># This file is automatically generated. Do not edit.</span></div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;<span class="stringliteral">_tabversion = %r</span></div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;<span class="stringliteral">_lr_method = %r</span></div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;<span class="stringliteral">_lr_signature = %r</span></div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span> % (os.path.basename(filename), __tabversion__, self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a17207436b1446559db7043c7520057ae">lr_method</a>, signature))</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;            <span class="comment"># Change smaller to 0 to go back to original tables</span></div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;            smaller = 1</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;            <span class="comment"># Factor out names to try and make smaller</span></div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;            <span class="keywordflow">if</span> smaller:</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;                items = {}</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;                <span class="keywordflow">for</span> s, nd <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a81d2d8ed601c9d54c987b51b574f6b50">lr_action</a>.<a class="code" href="namespacetapps_1_1copads_1_1operations.html#ae0cdacee222fb11c0bd0bbe980fb6105">items</a>():</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;                    <span class="keywordflow">for</span> name, v <span class="keywordflow">in</span> nd.items():</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;                        i = items.get(name)</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;                        <span class="keywordflow">if</span> <span class="keywordflow">not</span> i:</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;                            i = ([], [])</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;                            items[name] = i</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;                        i[0].append(s)</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;                        i[1].append(v)</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;                f.write(<span class="stringliteral">&#39;\n_lr_action_items = {&#39;</span>)</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;                <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> items.items():</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;                    f.write(<span class="stringliteral">&#39;%r:([&#39;</span> % k)</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;                    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> v[0]:</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;                        f.write(<span class="stringliteral">&#39;%r,&#39;</span> % i)</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;                    f.write(<span class="stringliteral">&#39;],[&#39;</span>)</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;                    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> v[1]:</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;                        f.write(<span class="stringliteral">&#39;%r,&#39;</span> % i)</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;                    f.write(<span class="stringliteral">&#39;]),&#39;</span>)</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;                f.write(<span class="stringliteral">&#39;}\n&#39;</span>)</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;                f.write(<span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;<span class="stringliteral">_lr_action = {}</span></div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;<span class="stringliteral">for _k, _v in _lr_action_items.items():</span></div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;<span class="stringliteral">   for _x,_y in zip(_v[0],_v[1]):</span></div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;<span class="stringliteral">      if not _x in _lr_action:  _lr_action[_x] = {}</span></div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;<span class="stringliteral">      _lr_action[_x][_k] = _y</span></div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;<span class="stringliteral">del _lr_action_items</span></div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;<span class="stringliteral">&#39;&#39;&#39;</span>)</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;                f.write(<span class="stringliteral">&#39;\n_lr_action = { &#39;</span>)</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;                <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a81d2d8ed601c9d54c987b51b574f6b50">lr_action</a>.<a class="code" href="namespacetapps_1_1copads_1_1operations.html#ae0cdacee222fb11c0bd0bbe980fb6105">items</a>():</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;                    f.write(<span class="stringliteral">&#39;(%r,%r):%r,&#39;</span> % (k[0], k[1], v))</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;                f.write(<span class="stringliteral">&#39;}\n&#39;</span>)</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;            <span class="keywordflow">if</span> smaller:</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;                <span class="comment"># Factor out names to try and make smaller</span></div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;                items = {}</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;                <span class="keywordflow">for</span> s, nd <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aef170b5fd7a315e2ab213eea43269f84">lr_goto</a>.<a class="code" href="namespacetapps_1_1copads_1_1operations.html#ae0cdacee222fb11c0bd0bbe980fb6105">items</a>():</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;                    <span class="keywordflow">for</span> name, v <span class="keywordflow">in</span> nd.items():</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;                        i = items.get(name)</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;                        <span class="keywordflow">if</span> <span class="keywordflow">not</span> i:</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;                            i = ([], [])</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;                            items[name] = i</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;                        i[0].append(s)</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;                        i[1].append(v)</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;                f.write(<span class="stringliteral">&#39;\n_lr_goto_items = {&#39;</span>)</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;                <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> items.items():</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;                    f.write(<span class="stringliteral">&#39;%r:([&#39;</span> % k)</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;                    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> v[0]:</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;                        f.write(<span class="stringliteral">&#39;%r,&#39;</span> % i)</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;                    f.write(<span class="stringliteral">&#39;],[&#39;</span>)</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;                    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> v[1]:</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;                        f.write(<span class="stringliteral">&#39;%r,&#39;</span> % i)</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;                    f.write(<span class="stringliteral">&#39;]),&#39;</span>)</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;                f.write(<span class="stringliteral">&#39;}\n&#39;</span>)</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;                f.write(<span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;<span class="stringliteral">_lr_goto = {}</span></div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;<span class="stringliteral">for _k, _v in _lr_goto_items.items():</span></div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;<span class="stringliteral">   for _x, _y in zip(_v[0], _v[1]):</span></div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;<span class="stringliteral">       if not _x in _lr_goto: _lr_goto[_x] = {}</span></div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;<span class="stringliteral">       _lr_goto[_x][_k] = _y</span></div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;<span class="stringliteral">del _lr_goto_items</span></div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;<span class="stringliteral">&#39;&#39;&#39;</span>)</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;                f.write(<span class="stringliteral">&#39;\n_lr_goto = { &#39;</span>)</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;                <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aef170b5fd7a315e2ab213eea43269f84">lr_goto</a>.<a class="code" href="namespacetapps_1_1copads_1_1operations.html#ae0cdacee222fb11c0bd0bbe980fb6105">items</a>():</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;                    f.write(<span class="stringliteral">&#39;(%r,%r):%r,&#39;</span> % (k[0], k[1], v))</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;                f.write(<span class="stringliteral">&#39;}\n&#39;</span>)</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;            <span class="comment"># Write production table</span></div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;            f.write(<span class="stringliteral">&#39;_lr_productions = [\n&#39;</span>)</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;            <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a458a786cdeb5a766723c54c1f9742c44">lr_productions</a>:</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;                <span class="keywordflow">if</span> p.func:</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;                    f.write(<span class="stringliteral">&#39;  (%r,%r,%d,%r,%r,%d),\n&#39;</span> % (p.str, p.name, p.len,</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;                                                          p.func, os.path.basename(p.file), p.line))</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;                    f.write(<span class="stringliteral">&#39;  (%r,%r,%d,None,None,None),\n&#39;</span> % (str(p), p.name, p.len))</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;            f.write(<span class="stringliteral">&#39;]\n&#39;</span>)</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;            f.close()</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;        <span class="keywordflow">except</span> IOError <span class="keyword">as</span> e:</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;            <span class="keywordflow">raise</span></div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    <span class="comment"># pickle_table()</span></div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <span class="comment"># This function pickles the LR parsing tables to a supplied file object</span></div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;</div><div class="line"><a name="l02820"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a9950a91c81b56a2f177d06fe8bf9677c"> 2820</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a9950a91c81b56a2f177d06fe8bf9677c">pickle_table</a>(self, filename, signature=&#39;&#39;):</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;            <span class="keyword">import</span> cPickle <span class="keyword">as</span> pickle</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;        <span class="keywordflow">except</span> ImportError:</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;            <span class="keyword">import</span> pickle</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        with open(filename, <span class="stringliteral">&#39;wb&#39;</span>) <span class="keyword">as</span> outf:</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;            pickle.dump(__tabversion__, outf, pickle_protocol)</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;            pickle.dump(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a17207436b1446559db7043c7520057ae">lr_method</a>, outf, pickle_protocol)</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;            pickle.dump(signature, outf, pickle_protocol)</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;            pickle.dump(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a81d2d8ed601c9d54c987b51b574f6b50">lr_action</a>, outf, pickle_protocol)</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;            pickle.dump(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aef170b5fd7a315e2ab213eea43269f84">lr_goto</a>, outf, pickle_protocol)</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;            outp = []</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;            <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a458a786cdeb5a766723c54c1f9742c44">lr_productions</a>:</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;                <span class="keywordflow">if</span> p.func:</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;                    outp.append((p.str, p.name, p.len, p.func, os.path.basename(p.file), p.line))</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;                    outp.append((str(p), p.name, p.len, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>))</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;            pickle.dump(outp, outf, pickle_protocol)</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;<span class="comment">#                            === INTROSPECTION ===</span></div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;<span class="comment"># The following functions and classes are used to implement the PLY</span></div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;<span class="comment"># introspection features followed by the yacc() function itself.</span></div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;<span class="comment"># get_caller_module_dict()</span></div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;<span class="comment"># This function returns a dictionary containing all of the symbols defined within</span></div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;<span class="comment"># a caller further down the call stack.  This is used to get the environment</span></div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;<span class="comment"># associated with the yacc() call if none was provided.</span></div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;</div><div class="line"><a name="l02855"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#a266c1067c60b34a5ab2b9202c47e3aae"> 2855</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetapps_1_1ply_1_1yacc.html#a266c1067c60b34a5ab2b9202c47e3aae">get_caller_module_dict</a>(levels):</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    f = sys._getframe(levels)</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    ldict = f.f_globals.copy()</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <span class="keywordflow">if</span> f.f_globals != f.f_locals:</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;        ldict.update(f.f_locals)</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    <span class="keywordflow">return</span> ldict</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="comment"># parse_grammar()</span></div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;<span class="comment"># This takes a raw grammar rule string and parses it into production data</span></div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02867"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#a852ecfd23656aae7096b7448c779d2f6"> 2867</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetapps_1_1ply_1_1yacc.html#a852ecfd23656aae7096b7448c779d2f6">parse_grammar</a>(doc, file, line):</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    grammar = []</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    <span class="comment"># Split the doc string into lines</span></div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    pstrings = doc.splitlines()</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    lastp = <span class="keywordtype">None</span></div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;    dline = line</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;    <span class="keywordflow">for</span> ps <span class="keywordflow">in</span> pstrings:</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;        dline += 1</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;        p = ps.split()</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> p:</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;            <span class="keywordflow">continue</span></div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;            <span class="keywordflow">if</span> p[0] == <span class="stringliteral">&#39;|&#39;</span>:</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;                <span class="comment"># This is a continuation of a previous rule</span></div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> lastp:</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;                    <span class="keywordflow">raise</span> SyntaxError(<span class="stringliteral">&quot;%s:%d: Misplaced &#39;|&#39;&quot;</span> % (file, dline))</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;                prodname = lastp</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;                syms = p[1:]</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;                prodname = p[0]</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;                lastp = prodname</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;                syms   = p[2:]</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;                assign = p[1]</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;                <span class="keywordflow">if</span> assign != <span class="stringliteral">&#39;:&#39;</span> <span class="keywordflow">and</span> assign != <span class="stringliteral">&#39;::=&#39;</span>:</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;                    <span class="keywordflow">raise</span> SyntaxError(<span class="stringliteral">&quot;%s:%d: Syntax error. Expected &#39;:&#39;&quot;</span> % (file, dline))</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;            grammar.append((file, dline, prodname, syms))</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;        <span class="keywordflow">except</span> SyntaxError:</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;            <span class="keywordflow">raise</span></div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;        <span class="keywordflow">except</span> Exception:</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;            <span class="keywordflow">raise</span> SyntaxError(<span class="stringliteral">&#39;%s:%d: Syntax error in rule %r&#39;</span> % (file, dline, ps.strip()))</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    <span class="keywordflow">return</span> grammar</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;<span class="comment"># ParserReflect()</span></div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;<span class="comment"># This class represents information extracted for building a parser including</span></div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;<span class="comment"># start symbol, error function, tokens, precedence list, action functions,</span></div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;<span class="comment"># etc.</span></div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02908"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html"> 2908</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html">ParserReflect</a>(object):</div><div class="line"><a name="l02909"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#aa6d252be89dc5605a7511d79140924e2"> 2909</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#aa6d252be89dc5605a7511d79140924e2">__init__</a>(self, pdict, log=None):</div><div class="line"><a name="l02910"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac9b47c0611ea60c8c53f81f83d3950b8"> 2910</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac9b47c0611ea60c8c53f81f83d3950b8">pdict</a>      = pdict</div><div class="line"><a name="l02911"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a882df8379f346bd5c356a7e2ed108edc"> 2911</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a882df8379f346bd5c356a7e2ed108edc">start</a>      = <span class="keywordtype">None</span></div><div class="line"><a name="l02912"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a0e9114c7e2c8b6f7ce57627995c447e9"> 2912</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a0e9114c7e2c8b6f7ce57627995c447e9">error_func</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l02913"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6dde8b4efc7677626d14d4e99ad2e5ef"> 2913</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6dde8b4efc7677626d14d4e99ad2e5ef">tokens</a>     = <span class="keywordtype">None</span></div><div class="line"><a name="l02914"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac38300692be8586cd355240f86b56c12"> 2914</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac38300692be8586cd355240f86b56c12">modules</a>    = set()</div><div class="line"><a name="l02915"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6ec1c543c462afd6ceaea587ae5ca75a"> 2915</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6ec1c543c462afd6ceaea587ae5ca75a">grammar</a>    = []</div><div class="line"><a name="l02916"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69"> 2916</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>      = <span class="keyword">False</span></div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;        <span class="keywordflow">if</span> log <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l02919"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872"> 2919</a></span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a> = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html">PlyLogger</a>(sys.stderr)</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a> = log</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;    <span class="comment"># Get all of the basic information</span></div><div class="line"><a name="l02924"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a8f6a575b142f993baa83634b84b6d0a3"> 2924</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a8f6a575b142f993baa83634b84b6d0a3">get_all</a>(self):</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a60825382549927890ef4fadbfbc75042">get_start</a>()</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a8c10ddd088710e81a5c621660cb5cb3e">get_error_func</a>()</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#afc02fa4ec2859511a8b16d77f36f0c90">get_tokens</a>()</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a87bf0839da22ad03c392f00735ec9f41">get_precedence</a>()</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#af9df62d1e2a89c3da51000009117b110">get_pfunctions</a>()</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    <span class="comment"># Validate all of the information</span></div><div class="line"><a name="l02932"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a21aea0327498eebaaafaa0d55cb4fb08"> 2932</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a21aea0327498eebaaafaa0d55cb4fb08">validate_all</a>(self):</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#af81bfe5942b7bd3c9efe0ede9ad9b6b4">validate_start</a>()</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a45231d62ab7dbebbdb950fa4108118de">validate_error_func</a>()</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6e99db82cd48b05e2987776d780b429e">validate_tokens</a>()</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#afafee046291cb1b01851c3c95223cb03">validate_precedence</a>()</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a7bdcfb132892f5daf0d364f13ad3a2f6">validate_pfunctions</a>()</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a52b5f767b849f6faeb96fc3ce31efa5b">validate_modules</a>()</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a></div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    <span class="comment"># Compute a signature over the grammar</span></div><div class="line"><a name="l02942"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae1664c1f0200bbf984c54ed76ff4c9b0"> 2942</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae1664c1f0200bbf984c54ed76ff4c9b0">signature</a>(self):</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;            <span class="keyword">from</span> hashlib <span class="keyword">import</span> md5</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;        <span class="keywordflow">except</span> ImportError:</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;            <span class="keyword">from</span> md5 <span class="keyword">import</span> md5</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;            sig = md5()</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;            <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a882df8379f346bd5c356a7e2ed108edc">start</a>:</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;                sig.update(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a882df8379f346bd5c356a7e2ed108edc">start</a>.encode(<span class="stringliteral">&#39;latin-1&#39;</span>))</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;            <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a5355afa7d1fee6eb833b979d2b812f61">prec</a>:</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;                sig.update(<span class="stringliteral">&#39;&#39;</span>.join([<span class="stringliteral">&#39;&#39;</span>.join(p) <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a5355afa7d1fee6eb833b979d2b812f61">prec</a>]).encode(<span class="stringliteral">&#39;latin-1&#39;</span>))</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;            <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6dde8b4efc7677626d14d4e99ad2e5ef">tokens</a>:</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;                sig.update(<span class="stringliteral">&#39; &#39;</span>.join(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6dde8b4efc7677626d14d4e99ad2e5ef">tokens</a>).encode(<span class="stringliteral">&#39;latin-1&#39;</span>))</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;            <span class="keywordflow">for</span> f <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a730a5d93957f489b690ac198c3e6f1c2">pfuncs</a>:</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;                <span class="keywordflow">if</span> f[3]:</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;                    sig.update(f[3].encode(<span class="stringliteral">&#39;latin-1&#39;</span>))</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;        <span class="keywordflow">except</span> (TypeError, ValueError):</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;            <span class="keywordflow">pass</span></div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;        digest = base64.b16encode(sig.digest())</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;        <span class="keywordflow">if</span> sys.version_info[0] &gt;= 3:</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;            digest = digest.decode(<span class="stringliteral">&#39;latin-1&#39;</span>)</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;        <span class="keywordflow">return</span> digest</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    <span class="comment"># validate_modules()</span></div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    <span class="comment"># This method checks to see if there are duplicated p_rulename() functions</span></div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;    <span class="comment"># in the parser module file.  Without this function, it is really easy for</span></div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    <span class="comment"># users to make mistakes by cutting and pasting code fragments (and it&#39;s a real</span></div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;    <span class="comment"># bugger to try and figure out why the resulting parser doesn&#39;t work).  Therefore,</span></div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    <span class="comment"># we just do a little regular expression pattern matching of def statements</span></div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    <span class="comment"># to try and detect duplicates.</span></div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    <span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;</div><div class="line"><a name="l02977"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a52b5f767b849f6faeb96fc3ce31efa5b"> 2977</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a52b5f767b849f6faeb96fc3ce31efa5b">validate_modules</a>(self):</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;        <span class="comment"># Match def p_funcname(</span></div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;        fre = re.compile(<span class="stringliteral">r&#39;\s*def\s+(p_[a-zA-Z_0-9]*)\(&#39;</span>)</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;        <span class="keywordflow">for</span> module <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac38300692be8586cd355240f86b56c12">modules</a>:</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;            lines, linen = inspect.getsourcelines(module)</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;            counthash = {}</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;            <span class="keywordflow">for</span> linen, line <span class="keywordflow">in</span> enumerate(lines):</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;                linen += 1</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;                m = fre.match(line)</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;                <span class="keywordflow">if</span> m:</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;                    name = m.group(1)</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;                    prev = counthash.get(name)</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> prev:</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;                        counthash[name] = linen</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;                        filename = inspect.getsourcefile(module)</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;                        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.warning(<span class="stringliteral">&#39;%s:%d: Function %s redefined. Previously defined on line %d&#39;</span>,</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;                                         filename, linen, name, prev)</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    <span class="comment"># Get the start symbol</span></div><div class="line"><a name="l02999"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a60825382549927890ef4fadbfbc75042"> 2999</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a60825382549927890ef4fadbfbc75042">get_start</a>(self):</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a882df8379f346bd5c356a7e2ed108edc">start</a> = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac9b47c0611ea60c8c53f81f83d3950b8">pdict</a>.get(<span class="stringliteral">&#39;start&#39;</span>)</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    <span class="comment"># Validate the start symbol</span></div><div class="line"><a name="l03003"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#af81bfe5942b7bd3c9efe0ede9ad9b6b4"> 3003</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#af81bfe5942b7bd3c9efe0ede9ad9b6b4">validate_start</a>(self):</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a882df8379f346bd5c356a7e2ed108edc">start</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a882df8379f346bd5c356a7e2ed108edc">start</a>, string_types):</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&quot;&#39;start&#39; must be a string&quot;</span>)</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <span class="comment"># Look for error handler</span></div><div class="line"><a name="l03009"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a8c10ddd088710e81a5c621660cb5cb3e"> 3009</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a8c10ddd088710e81a5c621660cb5cb3e">get_error_func</a>(self):</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a0e9114c7e2c8b6f7ce57627995c447e9">error_func</a> = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac9b47c0611ea60c8c53f81f83d3950b8">pdict</a>.get(<span class="stringliteral">&#39;p_error&#39;</span>)</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    <span class="comment"># Validate the error function</span></div><div class="line"><a name="l03013"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a45231d62ab7dbebbdb950fa4108118de"> 3013</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a45231d62ab7dbebbdb950fa4108118de">validate_error_func</a>(self):</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a0e9114c7e2c8b6f7ce57627995c447e9">error_func</a>:</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;            <span class="keywordflow">if</span> isinstance(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a0e9114c7e2c8b6f7ce57627995c447e9">error_func</a>, types.FunctionType):</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;                ismethod = 0</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;            <span class="keywordflow">elif</span> isinstance(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a0e9114c7e2c8b6f7ce57627995c447e9">error_func</a>, types.MethodType):</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;                ismethod = 1</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&quot;&#39;p_error&#39; defined, but is not a function or method&quot;</span>)</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;                <span class="keywordflow">return</span></div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;            eline = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a0e9114c7e2c8b6f7ce57627995c447e9">error_func</a>.__code__.co_firstlineno</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;            efile = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a0e9114c7e2c8b6f7ce57627995c447e9">error_func</a>.__code__.co_filename</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;            module = inspect.getmodule(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a0e9114c7e2c8b6f7ce57627995c447e9">error_func</a>)</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac38300692be8586cd355240f86b56c12">modules</a>.add(module)</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;            argcount = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a0e9114c7e2c8b6f7ce57627995c447e9">error_func</a>.__code__.co_argcount - ismethod</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;            <span class="keywordflow">if</span> argcount != 1:</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&#39;%s:%d: p_error() requires 1 argument&#39;</span>, efile, eline)</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    <span class="comment"># Get the tokens map</span></div><div class="line"><a name="l03035"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#afc02fa4ec2859511a8b16d77f36f0c90"> 3035</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#afc02fa4ec2859511a8b16d77f36f0c90">get_tokens</a>(self):</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;        tokens = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac9b47c0611ea60c8c53f81f83d3950b8">pdict</a>.get(<span class="stringliteral">&#39;tokens&#39;</span>)</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> tokens:</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&#39;No token list is defined&#39;</span>)</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;            <span class="keywordflow">return</span></div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(tokens, (list, tuple)):</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&#39;tokens must be a list or tuple&#39;</span>)</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;            <span class="keywordflow">return</span></div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> tokens:</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&#39;tokens is empty&#39;</span>)</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;            <span class="keywordflow">return</span></div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6dde8b4efc7677626d14d4e99ad2e5ef">tokens</a> = tokens</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    <span class="comment"># Validate the tokens</span></div><div class="line"><a name="l03055"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6e99db82cd48b05e2987776d780b429e"> 3055</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6e99db82cd48b05e2987776d780b429e">validate_tokens</a>(self):</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;        <span class="comment"># Validate the tokens.</span></div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;error&#39;</span> <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6dde8b4efc7677626d14d4e99ad2e5ef">tokens</a>:</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&quot;Illegal token name &#39;error&#39;. Is a reserved word&quot;</span>)</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;            <span class="keywordflow">return</span></div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;        terminals = set()</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;        <span class="keywordflow">for</span> n <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6dde8b4efc7677626d14d4e99ad2e5ef">tokens</a>:</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;            <span class="keywordflow">if</span> n <span class="keywordflow">in</span> terminals:</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.warning(<span class="stringliteral">&#39;Token %r multiply defined&#39;</span>, n)</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;            terminals.add(n)</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;    <span class="comment"># Get the precedence map (if any)</span></div><div class="line"><a name="l03069"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a87bf0839da22ad03c392f00735ec9f41"> 3069</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a87bf0839da22ad03c392f00735ec9f41">get_precedence</a>(self):</div><div class="line"><a name="l03070"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a5355afa7d1fee6eb833b979d2b812f61"> 3070</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a5355afa7d1fee6eb833b979d2b812f61">prec</a> = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac9b47c0611ea60c8c53f81f83d3950b8">pdict</a>.get(<span class="stringliteral">&#39;precedence&#39;</span>)</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;    <span class="comment"># Validate and parse the precedence map</span></div><div class="line"><a name="l03073"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#afafee046291cb1b01851c3c95223cb03"> 3073</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#afafee046291cb1b01851c3c95223cb03">validate_precedence</a>(self):</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;        preclist = []</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a5355afa7d1fee6eb833b979d2b812f61">prec</a>:</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a5355afa7d1fee6eb833b979d2b812f61">prec</a>, (list, tuple)):</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&#39;precedence must be a list or tuple&#39;</span>)</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;                <span class="keywordflow">return</span></div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;            <span class="keywordflow">for</span> level, p <span class="keywordflow">in</span> enumerate(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a5355afa7d1fee6eb833b979d2b812f61">prec</a>):</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(p, (list, tuple)):</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&#39;Bad precedence table&#39;</span>)</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;                    <span class="keywordflow">return</span></div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;                <span class="keywordflow">if</span> len(p) &lt; 2:</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&#39;Malformed precedence entry %s. Must be (assoc, term, ..., term)&#39;</span>, p)</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;                    <span class="keywordflow">return</span></div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;                assoc = p[0]</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(assoc, string_types):</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&#39;precedence associativity must be a string&#39;</span>)</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;                    <span class="keywordflow">return</span></div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;                <span class="keywordflow">for</span> term <span class="keywordflow">in</span> p[1:]:</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(term, string_types):</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;                        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&#39;precedence items must be strings&#39;</span>)</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;                        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;                        <span class="keywordflow">return</span></div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;                    preclist.append((term, assoc, level+1))</div><div class="line"><a name="l03101"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a2550ef32080a861a191036db811f94c7"> 3101</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a2550ef32080a861a191036db811f94c7">preclist</a> = preclist</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    <span class="comment"># Get all p_functions from the grammar</span></div><div class="line"><a name="l03104"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#af9df62d1e2a89c3da51000009117b110"> 3104</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#af9df62d1e2a89c3da51000009117b110">get_pfunctions</a>(self):</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;        p_functions = []</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;        <span class="keywordflow">for</span> name, item <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac9b47c0611ea60c8c53f81f83d3950b8">pdict</a>.<a class="code" href="namespacetapps_1_1copads_1_1operations.html#ae0cdacee222fb11c0bd0bbe980fb6105">items</a>():</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> name.startswith(<span class="stringliteral">&#39;p_&#39;</span>) <span class="keywordflow">or</span> name == <span class="stringliteral">&#39;p_error&#39;</span>:</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;            <span class="keywordflow">if</span> isinstance(item, (types.FunctionType, types.MethodType)):</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;                line = item.__code__.co_firstlineno</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;                module = inspect.getmodule(item)</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;                p_functions.append((line, module, name, item.__doc__))</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;        <span class="comment"># Sort all of the actions by line number; make sure to stringify</span></div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;        <span class="comment"># modules to make them sortable, since `line` may not uniquely sort all</span></div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <span class="comment"># p functions</span></div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        p_functions.sort(key=<span class="keyword">lambda</span> p_function: (</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;            p_function[0],</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;            str(p_function[1]),</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;            p_function[2],</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;            p_function[3]))</div><div class="line"><a name="l03122"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a730a5d93957f489b690ac198c3e6f1c2"> 3122</a></span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a730a5d93957f489b690ac198c3e6f1c2">pfuncs</a> = p_functions</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    <span class="comment"># Validate all of the p_functions</span></div><div class="line"><a name="l03125"></a><span class="lineno"><a class="line" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a7bdcfb132892f5daf0d364f13ad3a2f6"> 3125</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a7bdcfb132892f5daf0d364f13ad3a2f6">validate_pfunctions</a>(self):</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;        grammar = []</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;        <span class="comment"># Check for non-empty symbols</span></div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;        <span class="keywordflow">if</span> len(self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a730a5d93957f489b690ac198c3e6f1c2">pfuncs</a>) == 0:</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&#39;no rules of the form p_rulename are defined&#39;</span>)</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;            <span class="keywordflow">return</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;        <span class="keywordflow">for</span> line, module, name, doc <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a730a5d93957f489b690ac198c3e6f1c2">pfuncs</a>:</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;            file = inspect.getsourcefile(module)</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;            func = self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac9b47c0611ea60c8c53f81f83d3950b8">pdict</a>[name]</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;            <span class="keywordflow">if</span> isinstance(func, types.MethodType):</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;                reqargs = 2</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;                reqargs = 1</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;            <span class="keywordflow">if</span> func.__code__.co_argcount &gt; reqargs:</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&#39;%s:%d: Rule %r has too many arguments&#39;</span>, file, line, func.__name__)</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;            <span class="keywordflow">elif</span> func.__code__.co_argcount &lt; reqargs:</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(<span class="stringliteral">&#39;%s:%d: Rule %r requires an argument&#39;</span>, file, line, func.__name__)</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;            <span class="keywordflow">elif</span> <span class="keywordflow">not</span> func.__doc__:</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.warning(<span class="stringliteral">&#39;%s:%d: No documentation string specified in function %r (ignored)&#39;</span>,</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;                                 file, line, func.__name__)</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;                <span class="keywordflow">try</span>:</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;                    parsed_g = <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#a852ecfd23656aae7096b7448c779d2f6">parse_grammar</a>(doc, file, line)</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;                    <span class="keywordflow">for</span> g <span class="keywordflow">in</span> parsed_g:</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;                        grammar.append((name, g))</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;                <span class="keywordflow">except</span> SyntaxError <span class="keyword">as</span> e:</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a>(str(e))</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;                    self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">error</a> = <span class="keyword">True</span></div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;                <span class="comment"># Looks like a valid grammar rule</span></div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;                <span class="comment"># Mark the file in which defined.</span></div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac38300692be8586cd355240f86b56c12">modules</a>.add(module)</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;        <span class="comment"># Secondary validation step that looks for p_ definitions that are not functions</span></div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;        <span class="comment"># or functions that look like they might be grammar rules.</span></div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;        <span class="keywordflow">for</span> n, v <span class="keywordflow">in</span> self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac9b47c0611ea60c8c53f81f83d3950b8">pdict</a>.<a class="code" href="namespacetapps_1_1copads_1_1operations.html#ae0cdacee222fb11c0bd0bbe980fb6105">items</a>():</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;            <span class="keywordflow">if</span> n.startswith(<span class="stringliteral">&#39;p_&#39;</span>) <span class="keywordflow">and</span> isinstance(v, (types.FunctionType, types.MethodType)):</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;            <span class="keywordflow">if</span> n.startswith(<span class="stringliteral">&#39;t_&#39;</span>):</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;            <span class="keywordflow">if</span> n.startswith(<span class="stringliteral">&#39;p_&#39;</span>) <span class="keywordflow">and</span> n != <span class="stringliteral">&#39;p_error&#39;</span>:</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;                self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.warning(<span class="stringliteral">&#39;%r not defined as a function&#39;</span>, n)</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;            <span class="keywordflow">if</span> ((isinstance(v, types.FunctionType) <span class="keywordflow">and</span> v.__code__.co_argcount == 1) <span class="keywordflow">or</span></div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;                   (isinstance(v, types.MethodType) <span class="keywordflow">and</span> v.__func__.__code__.co_argcount == 2)):</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;                <span class="keywordflow">if</span> v.__doc__:</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;                    <span class="keywordflow">try</span>:</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;                        doc = v.__doc__.split(<span class="stringliteral">&#39; &#39;</span>)</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;                        <span class="keywordflow">if</span> doc[1] == <span class="stringliteral">&#39;:&#39;</span>:</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;                            self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">log</a>.warning(<span class="stringliteral">&#39;%s:%d: Possible grammar rule %r defined without p_ prefix&#39;</span>,</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;                                             v.__code__.co_filename, v.__code__.co_firstlineno, n)</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;                    <span class="keywordflow">except</span> IndexError:</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;                        <span class="keywordflow">pass</span></div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;        self.<a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6ec1c543c462afd6ceaea587ae5ca75a">grammar</a> = grammar</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;<span class="comment"># yacc(module)</span></div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;<span class="comment"># Build a parser</span></div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;<span class="comment"># -----------------------------------------------------------------------------</span></div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;<span class="keyword">def </span><a class="code" href="namespacetapps_1_1ply_1_1yacc.html#a9d002c450fd75c9e306223e51f487451">yacc</a>(method=&#39;LALR&#39;, debug=yaccdebug, module=None, tabmodule=tab_module, start=None,</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;         check_recursion=True, optimize=False, write_tables=True, debugfile=debug_file,</div><div class="line"><a name="l03193"></a><span class="lineno"><a class="line" href="namespacetapps_1_1ply_1_1yacc.html#a9d002c450fd75c9e306223e51f487451"> 3193</a></span>&#160;         outputdir=None, debuglog=None, errorlog=None, picklefile=None):</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;    <span class="keywordflow">if</span> tabmodule <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;        tabmodule = tab_module</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;    <span class="comment"># Reference to the parsing method of the last built parser</span></div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;    <span class="keyword">global</span> parse</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;    <span class="comment"># If pickling is enabled, table files are not created</span></div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;    <span class="keywordflow">if</span> picklefile:</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;        write_tables = 0</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;    <span class="keywordflow">if</span> errorlog <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;        errorlog = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html">PlyLogger</a>(sys.stderr)</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;    <span class="comment"># Get the module dictionary used for the parser</span></div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    <span class="keywordflow">if</span> module:</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;        _items = [(k, getattr(module, k)) <span class="keywordflow">for</span> k <span class="keywordflow">in</span> dir(module)]</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;        pdict = dict(_items)</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;        <span class="comment"># If no __file__ attribute is available, try to obtain it from the __module__ instead</span></div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;__file__&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> pdict:</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;            pdict[<span class="stringliteral">&#39;__file__&#39;</span>] = sys.modules[pdict[<span class="stringliteral">&#39;__module__&#39;</span>]].__file__</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;        pdict = <a class="code" href="namespacetapps_1_1ply_1_1yacc.html#a266c1067c60b34a5ab2b9202c47e3aae">get_caller_module_dict</a>(2)</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <span class="keywordflow">if</span> outputdir <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;        <span class="comment"># If no output directory is set, the location of the output files</span></div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        <span class="comment"># is determined according to the following rules:</span></div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;        <span class="comment">#     - If tabmodule specifies a package, files go into that package directory</span></div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;        <span class="comment">#     - Otherwise, files go in the same directory as the specifying module</span></div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;        <span class="keywordflow">if</span> isinstance(tabmodule, types.ModuleType):</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;            srcfile = tabmodule.__file__</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;            <span class="keywordflow">if</span> <span class="stringliteral">&#39;.&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> tabmodule:</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;                srcfile = pdict[<span class="stringliteral">&#39;__file__&#39;</span>]</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;                parts = tabmodule.split(<span class="stringliteral">&#39;.&#39;</span>)</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;                pkgname = <span class="stringliteral">&#39;.&#39;</span>.join(parts[:-1])</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;                exec(<span class="stringliteral">&#39;import %s&#39;</span> % pkgname)</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;                srcfile = getattr(sys.modules[pkgname], <span class="stringliteral">&#39;__file__&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;        outputdir = os.path.dirname(srcfile)</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    <span class="comment"># Determine if the module is package of a package or not.</span></div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    <span class="comment"># If so, fix the tabmodule setting so that tables load correctly</span></div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;    pkg = pdict.get(<span class="stringliteral">&#39;__package__&#39;</span>)</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;    <span class="keywordflow">if</span> pkg <span class="keywordflow">and</span> isinstance(tabmodule, str):</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;.&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> tabmodule:</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;            tabmodule = pkg + <span class="stringliteral">&#39;.&#39;</span> + tabmodule</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    <span class="comment"># Set start symbol if it&#39;s specified directly using an argument</span></div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    <span class="keywordflow">if</span> start <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;        pdict[<span class="stringliteral">&#39;start&#39;</span>] = start</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    <span class="comment"># Collect parser information from the dictionary</span></div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;    pinfo = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html">ParserReflect</a>(pdict, log=errorlog)</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    pinfo.get_all()</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    <span class="keywordflow">if</span> pinfo.error:</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;        <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_error.html">YaccError</a>(<span class="stringliteral">&#39;Unable to build parser&#39;</span>)</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;    <span class="comment"># Check signature against table files (if any)</span></div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    signature = pinfo.signature()</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    <span class="comment"># Read the tables</span></div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    <span class="keywordflow">try</span>:</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;        lr = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html">LRTable</a>()</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;        <span class="keywordflow">if</span> picklefile:</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;            read_signature = lr.read_pickle(picklefile)</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;            read_signature = lr.read_table(tabmodule)</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;        <span class="keywordflow">if</span> optimize <span class="keywordflow">or</span> (read_signature == signature):</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;            <span class="keywordflow">try</span>:</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;                lr.bind_callables(pinfo.pdict)</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;                parser = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html">LRParser</a>(lr, pinfo.error_func)</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;                parse = parser.parse</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;                <span class="keywordflow">return</span> parser</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;            <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;                errorlog.warning(<span class="stringliteral">&#39;There was a problem loading the table file: %r&#39;</span>, e)</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;    <span class="keywordflow">except</span> VersionError <span class="keyword">as</span> e:</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;        errorlog.warning(str(e))</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;    <span class="keywordflow">except</span> ImportError:</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;        <span class="keywordflow">pass</span></div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    <span class="keywordflow">if</span> debuglog <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;        <span class="keywordflow">if</span> debug:</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;            <span class="keywordflow">try</span>:</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;                debuglog = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html">PlyLogger</a>(open(os.path.join(outputdir, debugfile), <span class="stringliteral">&#39;w&#39;</span>))</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;            <span class="keywordflow">except</span> IOError <span class="keyword">as</span> e:</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;                errorlog.warning(<span class="stringliteral">&quot;Couldn&#39;t open %r. %s&quot;</span> % (debugfile, e))</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;                debuglog = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_null_logger.html">NullLogger</a>()</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;            debuglog = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_null_logger.html">NullLogger</a>()</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    debuglog.info(<span class="stringliteral">&#39;Created by PLY version %s (http://www.dabeaz.com/ply)&#39;</span>, __version__)</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;    errors = <span class="keyword">False</span></div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    <span class="comment"># Validate the parser information</span></div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;    <span class="keywordflow">if</span> pinfo.validate_all():</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;        <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_error.html">YaccError</a>(<span class="stringliteral">&#39;Unable to build parser&#39;</span>)</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;    <span class="keywordflow">if</span> <span class="keywordflow">not</span> pinfo.error_func:</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;        errorlog.warning(<span class="stringliteral">&#39;no p_error() function is defined&#39;</span>)</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    <span class="comment"># Create a grammar object</span></div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    grammar = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_grammar.html">Grammar</a>(pinfo.tokens)</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;    <span class="comment"># Set precedence level for terminals</span></div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;    <span class="keywordflow">for</span> term, assoc, level <span class="keywordflow">in</span> pinfo.preclist:</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;            grammar.set_precedence(term, assoc, level)</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;        <span class="keywordflow">except</span> GrammarError <span class="keyword">as</span> e:</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;            errorlog.warning(<span class="stringliteral">&#39;%s&#39;</span>, e)</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    <span class="comment"># Add productions to the grammar</span></div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    <span class="keywordflow">for</span> funcname, gram <span class="keywordflow">in</span> pinfo.grammar:</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;        file, line, prodname, syms = gram</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;            grammar.add_production(prodname, syms, funcname, file, line)</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;        <span class="keywordflow">except</span> GrammarError <span class="keyword">as</span> e:</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;            errorlog.error(<span class="stringliteral">&#39;%s&#39;</span>, e)</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;            errors = <span class="keyword">True</span></div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    <span class="comment"># Set the grammar start symbols</span></div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;    <span class="keywordflow">try</span>:</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;        <span class="keywordflow">if</span> start <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;            grammar.set_start(pinfo.start)</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;            grammar.set_start(start)</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;    <span class="keywordflow">except</span> GrammarError <span class="keyword">as</span> e:</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;        errorlog.error(str(e))</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;        errors = <span class="keyword">True</span></div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    <span class="keywordflow">if</span> errors:</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;        <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_error.html">YaccError</a>(<span class="stringliteral">&#39;Unable to build parser&#39;</span>)</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;    <span class="comment"># Verify the grammar structure</span></div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;    undefined_symbols = grammar.undefined_symbols()</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;    <span class="keywordflow">for</span> sym, prod <span class="keywordflow">in</span> undefined_symbols:</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;        errorlog.error(<span class="stringliteral">&#39;%s:%d: Symbol %r used, but not defined as a token or a rule&#39;</span>, prod.file, prod.line, sym)</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;        errors = <span class="keyword">True</span></div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;    unused_terminals = grammar.unused_terminals()</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    <span class="keywordflow">if</span> unused_terminals:</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;        debuglog.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;        debuglog.info(<span class="stringliteral">&#39;Unused terminals:&#39;</span>)</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;        debuglog.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;        <span class="keywordflow">for</span> term <span class="keywordflow">in</span> unused_terminals:</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;            errorlog.warning(<span class="stringliteral">&#39;Token %r defined, but not used&#39;</span>, term)</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;            debuglog.info(<span class="stringliteral">&#39;    %s&#39;</span>, term)</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;    <span class="comment"># Print out all productions to the debug log</span></div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;    <span class="keywordflow">if</span> debug:</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;        debuglog.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;        debuglog.info(<span class="stringliteral">&#39;Grammar&#39;</span>)</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;        debuglog.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;        <span class="keywordflow">for</span> n, p <span class="keywordflow">in</span> enumerate(grammar.Productions):</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;            debuglog.info(<span class="stringliteral">&#39;Rule %-5d %s&#39;</span>, n, p)</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;    <span class="comment"># Find unused non-terminals</span></div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;    unused_rules = grammar.unused_rules()</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;    <span class="keywordflow">for</span> prod <span class="keywordflow">in</span> unused_rules:</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;        errorlog.warning(<span class="stringliteral">&#39;%s:%d: Rule %r defined, but not used&#39;</span>, prod.file, prod.line, prod.name)</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;    <span class="keywordflow">if</span> len(unused_terminals) == 1:</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;        errorlog.warning(<span class="stringliteral">&#39;There is 1 unused token&#39;</span>)</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="keywordflow">if</span> len(unused_terminals) &gt; 1:</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;        errorlog.warning(<span class="stringliteral">&#39;There are %d unused tokens&#39;</span>, len(unused_terminals))</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    <span class="keywordflow">if</span> len(unused_rules) == 1:</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;        errorlog.warning(<span class="stringliteral">&#39;There is 1 unused rule&#39;</span>)</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <span class="keywordflow">if</span> len(unused_rules) &gt; 1:</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;        errorlog.warning(<span class="stringliteral">&#39;There are %d unused rules&#39;</span>, len(unused_rules))</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;    <span class="keywordflow">if</span> debug:</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;        debuglog.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;        debuglog.info(<span class="stringliteral">&#39;Terminals, with rules where they appear&#39;</span>)</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;        debuglog.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;        terms = list(grammar.Terminals)</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        terms.sort()</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;        <span class="keywordflow">for</span> term <span class="keywordflow">in</span> terms:</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;            debuglog.info(<span class="stringliteral">&#39;%-20s : %s&#39;</span>, term, <span class="stringliteral">&#39; &#39;</span>.join([str(s) <span class="keywordflow">for</span> s <span class="keywordflow">in</span> grammar.Terminals[term]]))</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;        debuglog.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;        debuglog.info(<span class="stringliteral">&#39;Nonterminals, with rules where they appear&#39;</span>)</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;        debuglog.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;        nonterms = list(grammar.Nonterminals)</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;        nonterms.sort()</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;        <span class="keywordflow">for</span> nonterm <span class="keywordflow">in</span> nonterms:</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;            debuglog.info(<span class="stringliteral">&#39;%-20s : %s&#39;</span>, nonterm, <span class="stringliteral">&#39; &#39;</span>.join([str(s) <span class="keywordflow">for</span> s <span class="keywordflow">in</span> grammar.Nonterminals[nonterm]]))</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;        debuglog.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;    <span class="keywordflow">if</span> check_recursion:</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;        unreachable = grammar.find_unreachable()</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;        <span class="keywordflow">for</span> u <span class="keywordflow">in</span> unreachable:</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;            errorlog.warning(<span class="stringliteral">&#39;Symbol %r is unreachable&#39;</span>, u)</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;        infinite = grammar.infinite_cycles()</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;        <span class="keywordflow">for</span> inf <span class="keywordflow">in</span> infinite:</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;            errorlog.error(<span class="stringliteral">&#39;Infinite recursion detected for symbol %r&#39;</span>, inf)</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;            errors = <span class="keyword">True</span></div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;    unused_prec = grammar.unused_precedence()</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;    <span class="keywordflow">for</span> term, assoc <span class="keywordflow">in</span> unused_prec:</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;        errorlog.error(<span class="stringliteral">&#39;Precedence rule %r defined for unknown symbol %r&#39;</span>, assoc, term)</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;        errors = <span class="keyword">True</span></div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;    <span class="keywordflow">if</span> errors:</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;        <span class="keywordflow">raise</span> <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_yacc_error.html">YaccError</a>(<span class="stringliteral">&#39;Unable to build parser&#39;</span>)</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;    <span class="comment"># Run the LRGeneratedTable on the grammar</span></div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;    <span class="keywordflow">if</span> debug:</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;        errorlog.debug(<span class="stringliteral">&#39;Generating %s tables&#39;</span>, method)</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;    lr = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html">LRGeneratedTable</a>(grammar, method, debuglog)</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;    <span class="keywordflow">if</span> debug:</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;        num_sr = len(lr.sr_conflicts)</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;        <span class="comment"># Report shift/reduce and reduce/reduce conflicts</span></div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;        <span class="keywordflow">if</span> num_sr == 1:</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;            errorlog.warning(<span class="stringliteral">&#39;1 shift/reduce conflict&#39;</span>)</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;        <span class="keywordflow">elif</span> num_sr &gt; 1:</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;            errorlog.warning(<span class="stringliteral">&#39;%d shift/reduce conflicts&#39;</span>, num_sr)</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;        num_rr = len(lr.rr_conflicts)</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;        <span class="keywordflow">if</span> num_rr == 1:</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;            errorlog.warning(<span class="stringliteral">&#39;1 reduce/reduce conflict&#39;</span>)</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;        <span class="keywordflow">elif</span> num_rr &gt; 1:</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;            errorlog.warning(<span class="stringliteral">&#39;%d reduce/reduce conflicts&#39;</span>, num_rr)</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    <span class="comment"># Write out conflicts to the output file</span></div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    <span class="keywordflow">if</span> debug <span class="keywordflow">and</span> (lr.sr_conflicts <span class="keywordflow">or</span> lr.rr_conflicts):</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;        debuglog.warning(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;        debuglog.warning(<span class="stringliteral">&#39;Conflicts:&#39;</span>)</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;        debuglog.warning(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;        <span class="keywordflow">for</span> state, tok, resolution <span class="keywordflow">in</span> lr.sr_conflicts:</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;            debuglog.warning(<span class="stringliteral">&#39;shift/reduce conflict for %s in state %d resolved as %s&#39;</span>,  tok, state, resolution)</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;        already_reported = set()</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;        <span class="keywordflow">for</span> state, rule, rejected <span class="keywordflow">in</span> lr.rr_conflicts:</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;            <span class="keywordflow">if</span> (state, id(rule), id(rejected)) <span class="keywordflow">in</span> already_reported:</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;            debuglog.warning(<span class="stringliteral">&#39;reduce/reduce conflict in state %d resolved using rule (%s)&#39;</span>, state, rule)</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;            debuglog.warning(<span class="stringliteral">&#39;rejected rule (%s) in state %d&#39;</span>, rejected, state)</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;            errorlog.warning(<span class="stringliteral">&#39;reduce/reduce conflict in state %d resolved using rule (%s)&#39;</span>, state, rule)</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;            errorlog.warning(<span class="stringliteral">&#39;rejected rule (%s) in state %d&#39;</span>, rejected, state)</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;            already_reported.add((state, id(rule), id(rejected)))</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;        warned_never = []</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;        <span class="keywordflow">for</span> state, rule, rejected <span class="keywordflow">in</span> lr.rr_conflicts:</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> rejected.reduced <span class="keywordflow">and</span> (rejected <span class="keywordflow">not</span> <span class="keywordflow">in</span> warned_never):</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;                debuglog.warning(<span class="stringliteral">&#39;Rule (%s) is never reduced&#39;</span>, rejected)</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;                errorlog.warning(<span class="stringliteral">&#39;Rule (%s) is never reduced&#39;</span>, rejected)</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;                warned_never.append(rejected)</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;    <span class="comment"># Write the table file if requested</span></div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    <span class="keywordflow">if</span> write_tables:</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;            lr.write_table(tabmodule, outputdir, signature)</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;        <span class="keywordflow">except</span> IOError <span class="keyword">as</span> e:</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;            errorlog.warning(<span class="stringliteral">&quot;Couldn&#39;t create %r. %s&quot;</span> % (tabmodule, e))</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;    <span class="comment"># Write a pickled version of the tables</span></div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;    <span class="keywordflow">if</span> picklefile:</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;            lr.pickle_table(picklefile, signature)</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;        <span class="keywordflow">except</span> IOError <span class="keyword">as</span> e:</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;            errorlog.warning(<span class="stringliteral">&quot;Couldn&#39;t create %r. %s&quot;</span> % (picklefile, e))</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;    <span class="comment"># Build the parser</span></div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    lr.bind_callables(pinfo.pdict)</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;    parser = <a class="code" href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html">LRParser</a>(lr, pinfo.error_func)</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    parse = parser.parse</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;    <span class="keywordflow">return</span> parser</div><div class="ttc" id="namespacetapps_1_1ply_1_1yacc_html_aafef6f7c39d13e4ddbda18ec818ff5cd"><div class="ttname"><a href="namespacetapps_1_1ply_1_1yacc.html#aafef6f7c39d13e4ddbda18ec818ff5cd">tapps.ply.yacc.format_stack_entry</a></div><div class="ttdeci">def format_stack_entry(r)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00149">yacc.py:149</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_abfa4f2bf45f6072bd0c1405edc58b6e1"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#abfa4f2bf45f6072bd0c1405edc58b6e1">tapps.ply.yacc.LRGeneratedTable.lr_parse_table</a></div><div class="ttdeci">def lr_parse_table(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02515">yacc.py:2515</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_item_html_a80b651b5c42a4ead29ed45d8b20a1069"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a80b651b5c42a4ead29ed45d8b20a1069">tapps.ply.yacc.LRItem.__init__</a></div><div class="ttdeci">def __init__(self, p, n)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01410">yacc.py:1410</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_ad964ac6aa11f03e1fd5f0ad273050700"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad964ac6aa11f03e1fd5f0ad273050700">tapps.ply.yacc.Production.__len__</a></div><div class="ttdeci">def __len__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01329">yacc.py:1329</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_aa1a4b0e3ab1bf948ce06d0f658d932dc"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa1a4b0e3ab1bf948ce06d0f658d932dc">tapps.ply.yacc.LRParser.errorfunc</a></div><div class="ttdeci">errorfunc</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00290">yacc.py:290</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html">tapps.ply.yacc.YaccProduction</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00233">yacc.py:233</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a8a9125c9a2d179c7f6a7b6276566b286"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a8a9125c9a2d179c7f6a7b6276566b286">tapps.ply.yacc.Grammar.undefined_symbols</a></div><div class="ttdeci">def undefined_symbols(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01718">yacc.py:1718</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_a3656db4f50681c211b38b4c270dd4ad4"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a3656db4f50681c211b38b4c270dd4ad4">tapps.ply.yacc.LRParser.restart</a></div><div class="ttdeci">def restart(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00297">yacc.py:297</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_table_html_a2ebfc64d2ce17dab26dd81a12d453b92"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a2ebfc64d2ce17dab26dd81a12d453b92">tapps.ply.yacc.LRTable.bind_callables</a></div><div class="ttdeci">def bind_callables(self, pdict)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02008">yacc.py:2008</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a477e091a9c5b59800db180c07aebbfde"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a477e091a9c5b59800db180c07aebbfde">tapps.ply.yacc.LRGeneratedTable.compute_lookback_includes</a></div><div class="ttdeci">def compute_lookback_includes(self, C, trans, nullable)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02353">yacc.py:2353</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_mini_production_html_a6a562543341d98f1cb015a02d728cb0a"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a6a562543341d98f1cb015a02d728cb0a">tapps.ply.yacc.MiniProduction.__repr__</a></div><div class="ttdeci">def __repr__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01376">yacc.py:1376</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a7c8e23089364bc3dea3afdfdbe5f08b2"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7c8e23089364bc3dea3afdfdbe5f08b2">tapps.ply.yacc.Production.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01299">yacc.py:1299</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_abec3957edf95b7ad6767f378a2f6acae"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#abec3957edf95b7ad6767f378a2f6acae">tapps.ply.yacc.YaccProduction.parser</a></div><div class="ttdeci">parser</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00238">yacc.py:238</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_af3f028a894dcb872b0119f1073c5824f"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#af3f028a894dcb872b0119f1073c5824f">tapps.ply.yacc.LRGeneratedTable.lr0_items</a></div><div class="ttdeci">def lr0_items(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02180">yacc.py:2180</a></div></div>
<div class="ttc" id="namespacetapps_1_1copads_1_1operations_html_ae0cdacee222fb11c0bd0bbe980fb6105"><div class="ttname"><a href="namespacetapps_1_1copads_1_1operations.html#ae0cdacee222fb11c0bd0bbe980fb6105">tapps.copads.operations.items</a></div><div class="ttdeci">def items(l)</div><div class="ttdef"><b>Definition:</b> <a href="operations_8py_source.html#l00072">operations.py:72</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_a3c460883a16b1e81e805f06225368834"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a3c460883a16b1e81e805f06225368834">tapps.ply.yacc.LRParser.defaulted_states</a></div><div class="ttdeci">defaulted_states</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00314">yacc.py:314</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_table_html_a81d2d8ed601c9d54c987b51b574f6b50"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a81d2d8ed601c9d54c987b51b574f6b50">tapps.ply.yacc.LRTable.lr_action</a></div><div class="ttdeci">lr_action</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01955">yacc.py:1955</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_ad1a327d60da5dcf970c7002543318dc9"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ad1a327d60da5dcf970c7002543318dc9">tapps.ply.yacc.LRParser.action</a></div><div class="ttdeci">action</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00288">yacc.py:288</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_aa12309c96eba68c45a02fcce1f5d4a12"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa12309c96eba68c45a02fcce1f5d4a12">tapps.ply.yacc.Grammar.unused_terminals</a></div><div class="ttdeci">def unused_terminals(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01735">yacc.py:1735</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a15bc4620e55f840d733f462e745f4bae"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a15bc4620e55f840d733f462e745f4bae">tapps.ply.yacc.Grammar.__init__</a></div><div class="ttdeci">def __init__(self, terminals)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01456">yacc.py:1456</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_a340b94809bf24a1ee653336ce2fd4a98"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a340b94809bf24a1ee653336ce2fd4a98">tapps.ply.yacc.LRParser.errorok</a></div><div class="ttdeci">errorok</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00292">yacc.py:292</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html">tapps.ply.yacc.ParserReflect</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02908">yacc.py:2908</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a518e1f3ac4dec6519d7dee95fed82f03"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a518e1f3ac4dec6519d7dee95fed82f03">tapps.ply.yacc.Grammar._first</a></div><div class="ttdeci">def _first(self, beta)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01783">yacc.py:1783</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_item_html_a5e4a356833fa44bc6177d71693878f73"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a5e4a356833fa44bc6177d71693878f73">tapps.ply.yacc.LRItem.__str__</a></div><div class="ttdeci">def __str__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01421">yacc.py:1421</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_ab8b0bd6c1c5d0982c022d92231460801"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ab8b0bd6c1c5d0982c022d92231460801">tapps.ply.yacc.LRParser.parsedebug</a></div><div class="ttdeci">def parsedebug(self, input=None, lexer=None, debug=False, tracking=False, tokenfunc=None)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00348">yacc.py:348</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a219d0a73babfaec45a3fa3ef47e30290"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a219d0a73babfaec45a3fa3ef47e30290">tapps.ply.yacc.LRGeneratedTable.sr_conflicts</a></div><div class="ttdeci">sr_conflicts</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02108">yacc.py:2108</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_ae94383ba4673170e1c1e737e52d37bc4"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae94383ba4673170e1c1e737e52d37bc4">tapps.ply.yacc.LRGeneratedTable.lr_goto_cache</a></div><div class="ttdeci">lr_goto_cache</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02098">yacc.py:2098</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a0431afe9e93d9feb6f4681b1ca5b24c7"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a0431afe9e93d9feb6f4681b1ca5b24c7">tapps.ply.yacc.Grammar.unused_precedence</a></div><div class="ttdeci">def unused_precedence(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01767">yacc.py:1767</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_item_html_a88ce6d85cf5cd1c2d1d77b17b4ba5e65"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a88ce6d85cf5cd1c2d1d77b17b4ba5e65">tapps.ply.yacc.LRItem.__repr__</a></div><div class="ttdeci">def __repr__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01428">yacc.py:1428</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_afc02fa4ec2859511a8b16d77f36f0c90"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#afc02fa4ec2859511a8b16d77f36f0c90">tapps.ply.yacc.ParserReflect.get_tokens</a></div><div class="ttdeci">def get_tokens(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03035">yacc.py:3035</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_af0638d6d0da5cd035c60fb9a22a5342a"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#af0638d6d0da5cd035c60fb9a22a5342a">tapps.ply.yacc.LRGeneratedTable.find_nonterminal_transitions</a></div><div class="ttdeci">def find_nonterminal_transitions(self, C)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02265">yacc.py:2265</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a0b45b216a5e385106cbe78b9e33f8cd8"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a0b45b216a5e385106cbe78b9e33f8cd8">tapps.ply.yacc.Production.__str__</a></div><div class="ttdeci">def __str__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01323">yacc.py:1323</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a140be4ab411010176640949dde63ea00"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a140be4ab411010176640949dde63ea00">tapps.ply.yacc.Grammar.Follow</a></div><div class="ttdeci">Follow</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01480">yacc.py:1480</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_a0e834f322fcee4791d9e6e1cf6ac6c4b"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a0e834f322fcee4791d9e6e1cf6ac6c4b">tapps.ply.yacc.YaccProduction.linespan</a></div><div class="ttdeci">def linespan(self, n)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00263">yacc.py:263</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_a2bb45bf8dcaff85536fa957ad8c32bc3"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a2bb45bf8dcaff85536fa957ad8c32bc3">tapps.ply.yacc.YaccProduction.__setitem__</a></div><div class="ttdeci">def __setitem__(self, n, v)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00248">yacc.py:248</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_a6da37a08175054f511105a0c8635b502"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a6da37a08175054f511105a0c8635b502">tapps.ply.yacc.YaccProduction.slice</a></div><div class="ttdeci">slice</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00235">yacc.py:235</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a72610f198c360fff53105b1761e72392"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a72610f198c360fff53105b1761e72392">tapps.ply.yacc.Grammar.__len__</a></div><div class="ttdeci">def __len__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01492">yacc.py:1492</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_af9df62d1e2a89c3da51000009117b110"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#af9df62d1e2a89c3da51000009117b110">tapps.ply.yacc.ParserReflect.get_pfunctions</a></div><div class="ttdeci">def get_pfunctions(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03104">yacc.py:3104</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a882df8379f346bd5c356a7e2ed108edc"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a882df8379f346bd5c356a7e2ed108edc">tapps.ply.yacc.ParserReflect.start</a></div><div class="ttdeci">start</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02911">yacc.py:2911</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a84076af696f8c8bcc01ff8a9b9f4e1c1"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a84076af696f8c8bcc01ff8a9b9f4e1c1">tapps.ply.yacc.Production.str</a></div><div class="ttdeci">str</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01319">yacc.py:1319</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a8f6a575b142f993baa83634b84b6d0a3"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a8f6a575b142f993baa83634b84b6d0a3">tapps.ply.yacc.ParserReflect.get_all</a></div><div class="ttdeci">def get_all(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02924">yacc.py:2924</a></div></div>
<div class="ttc" id="namespacetapps_1_1ply_1_1yacc_html_ac7b6fecdb1c97c83d7c1a0ce98261175"><div class="ttname"><a href="namespacetapps_1_1ply_1_1yacc.html#ac7b6fecdb1c97c83d7c1a0ce98261175">tapps.ply.yacc.errok</a></div><div class="ttdeci">def errok()</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00175">yacc.py:175</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_ab13faf99aeacf591ad69d8f70f2d40ce"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ab13faf99aeacf591ad69d8f70f2d40ce">tapps.ply.yacc.Grammar.compute_follow</a></div><div class="ttdeci">def compute_follow(self, start=None)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01855">yacc.py:1855</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_table_html_a17207436b1446559db7043c7520057ae"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a17207436b1446559db7043c7520057ae">tapps.ply.yacc.LRTable.lr_method</a></div><div class="ttdeci">lr_method</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01958">yacc.py:1958</a></div></div>
<div class="ttc" id="namespacetapps_1_1ply_1_1yacc_html_a9d002c450fd75c9e306223e51f487451"><div class="ttname"><a href="namespacetapps_1_1ply_1_1yacc.html#a9d002c450fd75c9e306223e51f487451">tapps.ply.yacc.yacc</a></div><div class="ttdeci">def yacc(method='LALR', debug=yaccdebug, module=None, tabmodule=tab_module, start=None, check_recursion=True, optimize=False, write_tables=True, debugfile=debug_file, outputdir=None, debuglog=None, errorlog=None, picklefile=None)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03193">yacc.py:3193</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_table_html_a458a786cdeb5a766723c54c1f9742c44"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a458a786cdeb5a766723c54c1f9742c44">tapps.ply.yacc.LRTable.lr_productions</a></div><div class="ttdeci">lr_productions</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01957">yacc.py:1957</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_ad5acdc2799af23f43e60c6fe09c153d7"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad5acdc2799af23f43e60c6fe09c153d7">tapps.ply.yacc.Production.number</a></div><div class="ttdeci">number</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01296">yacc.py:1296</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a87bf0839da22ad03c392f00735ec9f41"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a87bf0839da22ad03c392f00735ec9f41">tapps.ply.yacc.ParserReflect.get_precedence</a></div><div class="ttdeci">def get_precedence(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03069">yacc.py:3069</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_a946f7150168ffe7b218bab276066610d"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a946f7150168ffe7b218bab276066610d">tapps.ply.yacc.LRParser.__init__</a></div><div class="ttdeci">def __init__(self, lrtab, errorf)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00286">yacc.py:286</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html">tapps.ply.yacc.YaccSymbol</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00217">yacc.py:217</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_mini_production_html_ad40985943ff567f2e5a94ba60d2e70aa"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#ad40985943ff567f2e5a94ba60d2e70aa">tapps.ply.yacc.MiniProduction.line</a></div><div class="ttdeci">line</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01370">yacc.py:1370</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_ae1664c1f0200bbf984c54ed76ff4c9b0"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae1664c1f0200bbf984c54ed76ff4c9b0">tapps.ply.yacc.ParserReflect.signature</a></div><div class="ttdeci">def signature(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02942">yacc.py:2942</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_mini_production_html_a9413932c3166e787bbc84bdb437f50db"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a9413932c3166e787bbc84bdb437f50db">tapps.ply.yacc.MiniProduction.str</a></div><div class="ttdeci">str</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01371">yacc.py:1371</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_ad95d6e1f87e7a544e417d108fa72a295"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad95d6e1f87e7a544e417d108fa72a295">tapps.ply.yacc.Production.len</a></div><div class="ttdeci">len</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01305">yacc.py:1305</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_ac38300692be8586cd355240f86b56c12"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac38300692be8586cd355240f86b56c12">tapps.ply.yacc.ParserReflect.modules</a></div><div class="ttdeci">modules</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02914">yacc.py:2914</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_mini_production_html_ae66fa2d9a342241c0e0b9223e1c5c1c2"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#ae66fa2d9a342241c0e0b9223e1c5c1c2">tapps.ply.yacc.MiniProduction.__init__</a></div><div class="ttdeci">def __init__(self, str, name, len, func, file, line)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01364">yacc.py:1364</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a69f085a350fb154c1ab04797269ba56d"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a69f085a350fb154c1ab04797269ba56d">tapps.ply.yacc.Grammar.__getitem__</a></div><div class="ttdeci">def __getitem__(self, index)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01495">yacc.py:1495</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_mini_production_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html">tapps.ply.yacc.MiniProduction</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01363">yacc.py:1363</a></div></div>
<div class="ttc" id="namespacetapps_1_1ply_1_1yacc_html_a631fa98d1fed91fb8fc692b4e6833a18"><div class="ttname"><a href="namespacetapps_1_1ply_1_1yacc.html#a631fa98d1fed91fb8fc692b4e6833a18">tapps.ply.yacc.token</a></div><div class="ttdeci">def token()</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00183">yacc.py:183</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_version_error_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_version_error.html">tapps.ply.yacc.VersionError</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01950">yacc.py:1950</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_ae5fd31f431ab6a6dc0931f41b7a4546d"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae5fd31f431ab6a6dc0931f41b7a4546d">tapps.ply.yacc.LRGeneratedTable.log</a></div><div class="ttdeci">log</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02092">yacc.py:2092</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_item_html_ac9d80bb8eac2f55ea01571e0d2320d08"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#ac9d80bb8eac2f55ea01571e0d2320d08">tapps.ply.yacc.LRItem.lr_index</a></div><div class="ttdeci">lr_index</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01414">yacc.py:1414</a></div></div>
<div class="ttc" id="namespacetapps_1_1ply_1_1yacc_html_ab0911ad2047883376212107c528688ea"><div class="ttname"><a href="namespacetapps_1_1ply_1_1yacc.html#ab0911ad2047883376212107c528688ea">tapps.ply.yacc.call_errorfunc</a></div><div class="ttdeci">def call_errorfunc(errorfunc, token, parser)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00188">yacc.py:188</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_a2bb5295457bae94b815d8778386086de"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a2bb5295457bae94b815d8778386086de">tapps.ply.yacc.LRParser.set_defaulted_states</a></div><div class="ttdeci">def set_defaulted_states(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00313">yacc.py:313</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_afe605efca6ae16ce3484f1fa53ebde7f"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#afe605efca6ae16ce3484f1fa53ebde7f">tapps.ply.yacc.Grammar.find_unreachable</a></div><div class="ttdeci">def find_unreachable(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01631">yacc.py:1631</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_mini_production_html_a4c4e5829cd314e50d2bc40eab889980f"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a4c4e5829cd314e50d2bc40eab889980f">tapps.ply.yacc.MiniProduction.__str__</a></div><div class="ttdeci">def __str__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01373">yacc.py:1373</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_table_html_aa924a0f990a3417b9030349eeab67533"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aa924a0f990a3417b9030349eeab67533">tapps.ply.yacc.LRTable.__init__</a></div><div class="ttdeci">def __init__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01954">yacc.py:1954</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_mini_production_html_a2285f8fe1fb5856c0a7dcb2aa1147203"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a2285f8fe1fb5856c0a7dcb2aa1147203">tapps.ply.yacc.MiniProduction.name</a></div><div class="ttdeci">name</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01365">yacc.py:1365</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a60825382549927890ef4fadbfbc75042"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a60825382549927890ef4fadbfbc75042">tapps.ply.yacc.ParserReflect.get_start</a></div><div class="ttdeci">def get_start(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02999">yacc.py:2999</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a6dde8b4efc7677626d14d4e99ad2e5ef"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6dde8b4efc7677626d14d4e99ad2e5ef">tapps.ply.yacc.ParserReflect.tokens</a></div><div class="ttdeci">tokens</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02913">yacc.py:2913</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a21aea0327498eebaaafaa0d55cb4fb08"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a21aea0327498eebaaafaa0d55cb4fb08">tapps.ply.yacc.ParserReflect.validate_all</a></div><div class="ttdeci">def validate_all(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02932">yacc.py:2932</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a9950a91c81b56a2f177d06fe8bf9677c"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a9950a91c81b56a2f177d06fe8bf9677c">tapps.ply.yacc.LRGeneratedTable.pickle_table</a></div><div class="ttdeci">def pickle_table(self, filename, signature='')</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02820">yacc.py:2820</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_aa5ed36e665c7ea7d993466a6353a9e7b"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa5ed36e665c7ea7d993466a6353a9e7b">tapps.ply.yacc.LRParser.parse</a></div><div class="ttdeci">def parse(self, input=None, lexer=None, debug=False, tracking=False, tokenfunc=None)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00323">yacc.py:323</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_ply_logger_html_a4bd815f64b6555735cbdf8df60b6e02b"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a4bd815f64b6555735cbdf8df60b6e02b">tapps.ply.yacc.PlyLogger.f</a></div><div class="ttdeci">f</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00111">yacc.py:111</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_abd49d2cdc51890345ff9192d7b632caf"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#abd49d2cdc51890345ff9192d7b632caf">tapps.ply.yacc.LRGeneratedTable.lr0_closure</a></div><div class="ttdeci">def lr0_closure(self, I)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02119">yacc.py:2119</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_af81bfe5942b7bd3c9efe0ede9ad9b6b4"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#af81bfe5942b7bd3c9efe0ede9ad9b6b4">tapps.ply.yacc.ParserReflect.validate_start</a></div><div class="ttdeci">def validate_start(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03003">yacc.py:3003</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_ae6f012aa814e5294fd049928f3ac4ef5"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ae6f012aa814e5294fd049928f3ac4ef5">tapps.ply.yacc.LRGeneratedTable.add_lalr_lookaheads</a></div><div class="ttdeci">def add_lalr_lookaheads(self, C)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02491">yacc.py:2491</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_aa1356bc40cddc109b378156b85851fd0"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aa1356bc40cddc109b378156b85851fd0">tapps.ply.yacc.Grammar.Prodnames</a></div><div class="ttdeci">Prodnames</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01461">yacc.py:1461</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_ply_logger_html_a3748a827dbd1a01ab398fc2509744a1d"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a3748a827dbd1a01ab398fc2509744a1d">tapps.ply.yacc.PlyLogger.warning</a></div><div class="ttdeci">def warning(self, msg, args, kwargs)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00118">yacc.py:118</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a7e544be21abde764f7369d8971d05fe0"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7e544be21abde764f7369d8971d05fe0">tapps.ply.yacc.Production.bind</a></div><div class="ttdeci">def bind(self, pdict)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01355">yacc.py:1355</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_aab137e68ee5406343349eefe80e89423"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#aab137e68ee5406343349eefe80e89423">tapps.ply.yacc.Production.name</a></div><div class="ttdeci">name</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01294">yacc.py:1294</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a5d6e2ee7b8da81f7829441d365868b93"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a5d6e2ee7b8da81f7829441d365868b93">tapps.ply.yacc.Grammar.Prodmap</a></div><div class="ttdeci">Prodmap</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01464">yacc.py:1464</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_ply_logger_html_af95b84825ed397a9dc93f00445c907db"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#af95b84825ed397a9dc93f00445c907db">tapps.ply.yacc.PlyLogger.error</a></div><div class="ttdeci">def error(self, msg, args, kwargs)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00121">yacc.py:121</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_a8abfcebcadb7cfd44faf521c7c3fa57a"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a8abfcebcadb7cfd44faf521c7c3fa57a">tapps.ply.yacc.YaccProduction.__init__</a></div><div class="ttdeci">def __init__(self, s, stack=None)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00234">yacc.py:234</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol_html_afac400c6f473209ac91fe26fe9c20e47"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html#afac400c6f473209ac91fe26fe9c20e47">tapps.ply.yacc.YaccSymbol.__repr__</a></div><div class="ttdeci">def __repr__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00221">yacc.py:221</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_aa6d252be89dc5605a7511d79140924e2"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#aa6d252be89dc5605a7511d79140924e2">tapps.ply.yacc.ParserReflect.__init__</a></div><div class="ttdeci">def __init__(self, pdict, log=None)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02909">yacc.py:2909</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_a300dc8e26bda1e29242b6f8ea5e8a599"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a300dc8e26bda1e29242b6f8ea5e8a599">tapps.ply.yacc.YaccProduction.lineno</a></div><div class="ttdeci">def lineno(self, n)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00257">yacc.py:257</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_afca9216d04191a79227ad243692d747a"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#afca9216d04191a79227ad243692d747a">tapps.ply.yacc.YaccProduction.lexspan</a></div><div class="ttdeci">def lexspan(self, n)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00271">yacc.py:271</a></div></div>
<div class="ttc" id="namespacetapps_1_1ply_1_1yacc_html_a1db9e7cad1226d6d8b4a8db63dfab46d"><div class="ttname"><a href="namespacetapps_1_1ply_1_1yacc.html#a1db9e7cad1226d6d8b4a8db63dfab46d">tapps.ply.yacc.restart</a></div><div class="ttdeci">def restart()</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00179">yacc.py:179</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_table_html_a5bfb36b6a8534a0539ecd577ca97c4b0"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a5bfb36b6a8534a0539ecd577ca97c4b0">tapps.ply.yacc.LRTable.read_pickle</a></div><div class="ttdeci">def read_pickle(self, filename)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01980">yacc.py:1980</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_item_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html">tapps.ply.yacc.LRItem</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01409">yacc.py:1409</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_ab6ec5fa6b00c25416f4890ed225e64ce"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#ab6ec5fa6b00c25416f4890ed225e64ce">tapps.ply.yacc.LRParser.parseopt</a></div><div class="ttdeci">def parseopt(self, input=None, lexer=None, debug=False, tracking=False, tokenfunc=None)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00689">yacc.py:689</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_ab94b40c01f0666797d8b96889ac32f90"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ab94b40c01f0666797d8b96889ac32f90">tapps.ply.yacc.LRGeneratedTable.__init__</a></div><div class="ttdeci">def __init__(self, grammar, method='LALR', log=None)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02082">yacc.py:2082</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a5c80738d949196c56bf3bb17d6b56977"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a5c80738d949196c56bf3bb17d6b56977">tapps.ply.yacc.Production.prec</a></div><div class="ttdeci">prec</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01301">yacc.py:1301</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_ab660d3e1f88569650326b6dc03ac2e51"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#ab660d3e1f88569650326b6dc03ac2e51">tapps.ply.yacc.YaccProduction.lexer</a></div><div class="ttdeci">lexer</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00237">yacc.py:237</a></div></div>
<div class="ttc" id="namespacetapps_1_1ply_1_1yacc_html_a6465bdebad26f3a83f74626384594b63"><div class="ttname"><a href="namespacetapps_1_1ply_1_1yacc.html#a6465bdebad26f3a83f74626384594b63">tapps.ply.yacc.traverse</a></div><div class="ttdeci">def traverse(x, N, stack, F, X, R, FP)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02048">yacc.py:2048</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_ply_logger_html_ab0823600d1370d25e4592e72de86ce22"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#ab0823600d1370d25e4592e72de86ce22">tapps.ply.yacc.PlyLogger.__init__</a></div><div class="ttdeci">def __init__(self, f)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00110">yacc.py:110</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_item_html_acfc50bb261cd53beeb1ebdb0d6e49529"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#acfc50bb261cd53beeb1ebdb0d6e49529">tapps.ply.yacc.LRItem.prod</a></div><div class="ttdeci">prod</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01412">yacc.py:1412</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_item_html_a2cbd9301939208d2e66317a4cae14370"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a2cbd9301939208d2e66317a4cae14370">tapps.ply.yacc.LRItem.lookaheads</a></div><div class="ttdeci">lookaheads</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01415">yacc.py:1415</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html">tapps.ply.yacc.LRParser</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00285">yacc.py:285</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_afb9cdc53c629d792311f76e37f8018cb"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#afb9cdc53c629d792311f76e37f8018cb">tapps.ply.yacc.Production.callable</a></div><div class="ttdeci">callable</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01298">yacc.py:1298</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_aa66f3f657c70538a5377d30582908c49"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#aa66f3f657c70538a5377d30582908c49">tapps.ply.yacc.YaccProduction.stack</a></div><div class="ttdeci">stack</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00236">yacc.py:236</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_null_logger_html_a7cda2676bf103fd06b9f7ce492b543a0"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_null_logger.html#a7cda2676bf103fd06b9f7ce492b543a0">tapps.ply.yacc.NullLogger.__getattribute__</a></div><div class="ttdeci">def __getattribute__(self, name)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00128">yacc.py:128</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html">tapps.ply.yacc.Grammar</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01455">yacc.py:1455</a></div></div>
<div class="ttc" id="namespacetapps_1_1ply_1_1yacc_html_ac2181d8e9a88efcf81d7086f24df9502"><div class="ttname"><a href="namespacetapps_1_1ply_1_1yacc.html#ac2181d8e9a88efcf81d7086f24df9502">tapps.ply.yacc.digraph</a></div><div class="ttdeci">def digraph(X, R, FP)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02037">yacc.py:2037</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_afafee046291cb1b01851c3c95223cb03"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#afafee046291cb1b01851c3c95223cb03">tapps.ply.yacc.ParserReflect.validate_precedence</a></div><div class="ttdeci">def validate_precedence(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03073">yacc.py:3073</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_a846f350c6c309c4509f65ce2f664f172"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a846f350c6c309c4509f65ce2f664f172">tapps.ply.yacc.YaccProduction.error</a></div><div class="ttdeci">def error(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00276">yacc.py:276</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_aaf79f149fb7cc7355e3d46635498c4a7"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#aaf79f149fb7cc7355e3d46635498c4a7">tapps.ply.yacc.Production.lr_next</a></div><div class="ttdeci">lr_next</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01315">yacc.py:1315</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_mini_production_html_a01e334e9ef1294c87d56d16406f27fef"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a01e334e9ef1294c87d56d16406f27fef">tapps.ply.yacc.MiniProduction.func</a></div><div class="ttdeci">func</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01367">yacc.py:1367</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_table_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html">tapps.ply.yacc.LRTable</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01953">yacc.py:1953</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a6e99db82cd48b05e2987776d780b429e"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6e99db82cd48b05e2987776d780b429e">tapps.ply.yacc.ParserReflect.validate_tokens</a></div><div class="ttdeci">def validate_tokens(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03055">yacc.py:3055</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_a6f93ab0c66031fd92351327207e78db9"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a6f93ab0c66031fd92351327207e78db9">tapps.ply.yacc.LRParser.goto</a></div><div class="ttdeci">goto</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00289">yacc.py:289</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a7cd4ec3d747522b0af018cec6df02735"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7cd4ec3d747522b0af018cec6df02735">tapps.ply.yacc.Production.line</a></div><div class="ttdeci">line</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01300">yacc.py:1300</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a85f70475269c57f9cadd1345e5fb2a20"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a85f70475269c57f9cadd1345e5fb2a20">tapps.ply.yacc.LRGeneratedTable.grammar</a></div><div class="ttdeci">grammar</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02086">yacc.py:2086</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_a16fc20e7403f56c469f4ecae9d3125eb"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a16fc20e7403f56c469f4ecae9d3125eb">tapps.ply.yacc.LRParser.statestack</a></div><div class="ttdeci">statestack</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00388">yacc.py:388</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a80032e0a6a026ace0a1c3398df8aed4d"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a80032e0a6a026ace0a1c3398df8aed4d">tapps.ply.yacc.Grammar.add_production</a></div><div class="ttdeci">def add_production(self, prodname, syms, func=None, file='', line=0)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01531">yacc.py:1531</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_a8d4a752236aa33c27bea6b77da081750"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a8d4a752236aa33c27bea6b77da081750">tapps.ply.yacc.LRParser.productions</a></div><div class="ttdeci">productions</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00287">yacc.py:287</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a6119005ba5422ef105e806fa8e900911"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a6119005ba5422ef105e806fa8e900911">tapps.ply.yacc.Production.usyms</a></div><div class="ttdeci">usyms</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01308">yacc.py:1308</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_item_html_a9056e5339a684beda3279314f8b3dd3f"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a9056e5339a684beda3279314f8b3dd3f">tapps.ply.yacc.LRItem.len</a></div><div class="ttdeci">len</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01418">yacc.py:1418</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_item_html_a8ae3b636a898945475192ded3fdca5b7"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a8ae3b636a898945475192ded3fdca5b7">tapps.ply.yacc.LRItem.usyms</a></div><div class="ttdeci">usyms</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01419">yacc.py:1419</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_error_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar_error.html">tapps.ply.yacc.GrammarError</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01452">yacc.py:1452</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a5f06ff0f2e4808f6b3b5e0b5dc6abf82"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a5f06ff0f2e4808f6b3b5e0b5dc6abf82">tapps.ply.yacc.LRGeneratedTable.dr_relation</a></div><div class="ttdeci">def dr_relation(self, C, trans, nullable)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02285">yacc.py:2285</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a017f320f91312086cd6738ac513f789e"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a017f320f91312086cd6738ac513f789e">tapps.ply.yacc.LRGeneratedTable.compute_read_sets</a></div><div class="ttdeci">def compute_read_sets(self, C, ntrans, nullable)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02433">yacc.py:2433</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a8f2087123227da17e56e09db8e4153cf"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a8f2087123227da17e56e09db8e4153cf">tapps.ply.yacc.LRGeneratedTable.sr_conflict</a></div><div class="ttdeci">sr_conflict</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02104">yacc.py:2104</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a392a2028827637fb86771eb10d244365"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a392a2028827637fb86771eb10d244365">tapps.ply.yacc.Grammar.Nonterminals</a></div><div class="ttdeci">Nonterminals</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01475">yacc.py:1475</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_af2482d3ad311ddfec2607af4a1b49b7c"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#af2482d3ad311ddfec2607af4a1b49b7c">tapps.ply.yacc.YaccProduction.lexpos</a></div><div class="ttdeci">def lexpos(self, n)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00268">yacc.py:268</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a52b5f767b849f6faeb96fc3ce31efa5b"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a52b5f767b849f6faeb96fc3ce31efa5b">tapps.ply.yacc.ParserReflect.validate_modules</a></div><div class="ttdeci">def validate_modules(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02977">yacc.py:2977</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a2d321f277fb06325fa2c448073086ac6"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a2d321f277fb06325fa2c448073086ac6">tapps.ply.yacc.LRGeneratedTable.compute_nullable_nonterminals</a></div><div class="ttdeci">def compute_nullable_nonterminals(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02236">yacc.py:2236</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_mini_production_html_a00b40653ae83bb4e256816b989de8f18"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a00b40653ae83bb4e256816b989de8f18">tapps.ply.yacc.MiniProduction.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01369">yacc.py:1369</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a55efe4afdded211dc96009d1bacc1732"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a55efe4afdded211dc96009d1bacc1732">tapps.ply.yacc.Grammar.set_start</a></div><div class="ttdeci">def set_start(self, start=None)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01615">yacc.py:1615</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_mini_production_html_a5ccdfea189a89f5c0eb29d61f084fadc"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a5ccdfea189a89f5c0eb29d61f084fadc">tapps.ply.yacc.MiniProduction.callable</a></div><div class="ttdeci">callable</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01368">yacc.py:1368</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a7034ab8e1df27949b3c9185349af8032"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7034ab8e1df27949b3c9185349af8032">tapps.ply.yacc.Production.__nonzero__</a></div><div class="ttdeci">def __nonzero__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01332">yacc.py:1332</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a071865141104e7b86f968fafead72068"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a071865141104e7b86f968fafead72068">tapps.ply.yacc.Grammar.UsedPrecedence</a></div><div class="ttdeci">UsedPrecedence</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01485">yacc.py:1485</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a7c2df473dd3a059ebb426bcd83f5515d"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a7c2df473dd3a059ebb426bcd83f5515d">tapps.ply.yacc.LRGeneratedTable.conflicts</a></div><div class="ttdeci">conflicts</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02106">yacc.py:2106</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_af700978ef56d17b46b675ed556100127"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#af700978ef56d17b46b675ed556100127">tapps.ply.yacc.Grammar.compute_first</a></div><div class="ttdeci">def compute_first(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01818">yacc.py:1818</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a3b9b2b59271e4ca367d0b120f7581557"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a3b9b2b59271e4ca367d0b120f7581557">tapps.ply.yacc.Production.__getitem__</a></div><div class="ttdeci">def __getitem__(self, index)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01335">yacc.py:1335</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_a023e833217057f834bae9d9dff0c5f4b"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a023e833217057f834bae9d9dff0c5f4b">tapps.ply.yacc.YaccProduction.set_lineno</a></div><div class="ttdeci">def set_lineno(self, n, lineno)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00260">yacc.py:260</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_ply_logger_html_a276e8cc86604d0b6d66ae51356eed7c5"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html#a276e8cc86604d0b6d66ae51356eed7c5">tapps.ply.yacc.PlyLogger.debug</a></div><div class="ttdeci">def debug(self, msg, args, kwargs)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00113">yacc.py:113</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a2550ef32080a861a191036db811f94c7"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a2550ef32080a861a191036db811f94c7">tapps.ply.yacc.ParserReflect.preclist</a></div><div class="ttdeci">preclist</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03101">yacc.py:3101</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_table_html_a2edf84ad6f7583961193059ef59b54ac"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#a2edf84ad6f7583961193059ef59b54ac">tapps.ply.yacc.LRTable.read_table</a></div><div class="ttdeci">def read_table(self, module)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01960">yacc.py:1960</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_aa673524fb42a1545418b73a8fa291cf6"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#aa673524fb42a1545418b73a8fa291cf6">tapps.ply.yacc.LRGeneratedTable.write_table</a></div><div class="ttdeci">def write_table(self, tabmodule, outputdir='', signature='')</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02698">yacc.py:2698</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a8115d9e3176a70c4c88c57e70b533210"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a8115d9e3176a70c4c88c57e70b533210">tapps.ply.yacc.LRGeneratedTable.add_lookaheads</a></div><div class="ttdeci">def add_lookaheads(self, lookbacks, followset)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02473">yacc.py:2473</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_item_html_a487101c9cddf8a77a0eccd1bb5a39cf2"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a487101c9cddf8a77a0eccd1bb5a39cf2">tapps.ply.yacc.LRItem.name</a></div><div class="ttdeci">name</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01411">yacc.py:1411</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_table_html_aef170b5fd7a315e2ab213eea43269f84"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_table.html#aef170b5fd7a315e2ab213eea43269f84">tapps.ply.yacc.LRTable.lr_goto</a></div><div class="ttdeci">lr_goto</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01956">yacc.py:1956</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_a6b0bff192e9eb162005c54cad7bb1f92"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a6b0bff192e9eb162005c54cad7bb1f92">tapps.ply.yacc.LRParser.errok</a></div><div class="ttdeci">def errok(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00294">yacc.py:294</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_acbbeced44924f5a80b656f9ccb54efd9"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#acbbeced44924f5a80b656f9ccb54efd9">tapps.ply.yacc.LRParser.disable_defaulted_states</a></div><div class="ttdeci">def disable_defaulted_states(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00320">yacc.py:320</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a063a286b1cdc6a2e884c503613e9b334"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a063a286b1cdc6a2e884c503613e9b334">tapps.ply.yacc.LRGeneratedTable.lr0_cidhash</a></div><div class="ttdeci">lr0_cidhash</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02099">yacc.py:2099</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_aff3efd647fb2f84ba67a4ca32b84100e"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#aff3efd647fb2f84ba67a4ca32b84100e">tapps.ply.yacc.Grammar.Start</a></div><div class="ttdeci">Start</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01489">yacc.py:1489</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_aa512c95efb3b8cf6956c6c85c15098dc"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#aa512c95efb3b8cf6956c6c85c15098dc">tapps.ply.yacc.LRParser.token</a></div><div class="ttdeci">token</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00383">yacc.py:383</a></div></div>
<div class="ttc" id="namespacetapps_1_1ply_1_1yacc_html_a266c1067c60b34a5ab2b9202c47e3aae"><div class="ttname"><a href="namespacetapps_1_1ply_1_1yacc.html#a266c1067c60b34a5ab2b9202c47e3aae">tapps.ply.yacc.get_caller_module_dict</a></div><div class="ttdeci">def get_caller_module_dict(levels)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02855">yacc.py:2855</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_null_logger_html_afe0989f1c2b3c4f3297a19408a33f21d"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_null_logger.html#afe0989f1c2b3c4f3297a19408a33f21d">tapps.ply.yacc.NullLogger.__call__</a></div><div class="ttdeci">def __call__(self, args, kwargs)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00131">yacc.py:131</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a61eea3de3d019f2ce1b8a081250d223e"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a61eea3de3d019f2ce1b8a081250d223e">tapps.ply.yacc.LRGeneratedTable.rr_conflict</a></div><div class="ttdeci">rr_conflict</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02105">yacc.py:2105</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_ply_logger_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_ply_logger.html">tapps.ply.yacc.PlyLogger</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00109">yacc.py:109</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a119230a1088785ac61eacfd09dd59a80"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a119230a1088785ac61eacfd09dd59a80">tapps.ply.yacc.LRGeneratedTable.compute_follow_sets</a></div><div class="ttdeci">def compute_follow_sets(self, ntrans, readsets, inclsets)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02455">yacc.py:2455</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html">tapps.ply.yacc.LRGeneratedTable</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02081">yacc.py:2081</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a54e16873bc816c97a7efab59eac6173d"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a54e16873bc816c97a7efab59eac6173d">tapps.ply.yacc.Production.func</a></div><div class="ttdeci">func</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01297">yacc.py:1297</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_afaa6b2b7daf4cde0bd7db0e813557751"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#afaa6b2b7daf4cde0bd7db0e813557751">tapps.ply.yacc.LRGeneratedTable.reads_relation</a></div><div class="ttdeci">def reads_relation(self, C, trans, empty)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02310">yacc.py:2310</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_null_logger_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_null_logger.html">tapps.ply.yacc.NullLogger</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00127">yacc.py:127</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_a274e5eb3e473dd18273ffe653dedf714"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a274e5eb3e473dd18273ffe653dedf714">tapps.ply.yacc.YaccProduction.__getitem__</a></div><div class="ttdeci">def __getitem__(self, n)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00240">yacc.py:240</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_mini_production_html_abb59e74462872f23afea56498a8472ed"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#abb59e74462872f23afea56498a8472ed">tapps.ply.yacc.MiniProduction.len</a></div><div class="ttdeci">len</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01366">yacc.py:1366</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a45231d62ab7dbebbdb950fa4108118de"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a45231d62ab7dbebbdb950fa4108118de">tapps.ply.yacc.ParserReflect.validate_error_func</a></div><div class="ttdeci">def validate_error_func(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03013">yacc.py:3013</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_a243dbfb4d4987ccab927298caf6b6773"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#a243dbfb4d4987ccab927298caf6b6773">tapps.ply.yacc.YaccProduction.__getslice__</a></div><div class="ttdeci">def __getslice__(self, i, j)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00251">yacc.py:251</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_production_html_ab443e91f7e6c34fdfd6c8e114ba33abf"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_production.html#ab443e91f7e6c34fdfd6c8e114ba33abf">tapps.ply.yacc.YaccProduction.__len__</a></div><div class="ttdeci">def __len__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00254">yacc.py:254</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a5960fea09eaca58e0947002ab873eff9"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a5960fea09eaca58e0947002ab873eff9">tapps.ply.yacc.LRGeneratedTable.rr_conflicts</a></div><div class="ttdeci">rr_conflicts</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02109">yacc.py:2109</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a7d7e6634a0979131c2c15c595343a91f"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a7d7e6634a0979131c2c15c595343a91f">tapps.ply.yacc.Production.__repr__</a></div><div class="ttdeci">def __repr__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01326">yacc.py:1326</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_ad8b611f5cf87fe11dbd97a11ec2c3372"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#ad8b611f5cf87fe11dbd97a11ec2c3372">tapps.ply.yacc.Production.prod</a></div><div class="ttdeci">prod</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01295">yacc.py:1295</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_a4ff9b87ed49344d817147e0d29456369"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a4ff9b87ed49344d817147e0d29456369">tapps.ply.yacc.LRParser.parseopt_notrack</a></div><div class="ttdeci">def parseopt_notrack(self, input=None, lexer=None, debug=False, tracking=False, tokenfunc=None)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00989">yacc.py:989</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol_html_a8cd78b156145844b5283cb7796354979"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_symbol.html#a8cd78b156145844b5283cb7796354979">tapps.ply.yacc.YaccSymbol.__str__</a></div><div class="ttdeci">def __str__(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00218">yacc.py:218</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_acb02976ea86f5c5046ccdc0de66f59c2"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#acb02976ea86f5c5046ccdc0de66f59c2">tapps.ply.yacc.Grammar.Productions</a></div><div class="ttdeci">Productions</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01457">yacc.py:1457</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a0e9114c7e2c8b6f7ce57627995c447e9"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a0e9114c7e2c8b6f7ce57627995c447e9">tapps.ply.yacc.ParserReflect.error_func</a></div><div class="ttdeci">error_func</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02912">yacc.py:2912</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_ae132f7a17ef8cfbdcae3fddc6239a720"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae132f7a17ef8cfbdcae3fddc6239a720">tapps.ply.yacc.Grammar.unused_rules</a></div><div class="ttdeci">def unused_rules(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01750">yacc.py:1750</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a9ed3051d330bfb757c19a8f268784991"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a9ed3051d330bfb757c19a8f268784991">tapps.ply.yacc.Grammar.First</a></div><div class="ttdeci">First</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01478">yacc.py:1478</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a5355afa7d1fee6eb833b979d2b812f61"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a5355afa7d1fee6eb833b979d2b812f61">tapps.ply.yacc.ParserReflect.prec</a></div><div class="ttdeci">prec</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03070">yacc.py:3070</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_a55b4729fee1a416affe038771320089f"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#a55b4729fee1a416affe038771320089f">tapps.ply.yacc.LRGeneratedTable._add_count</a></div><div class="ttdeci">_add_count</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02101">yacc.py:2101</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_yacc_error_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_yacc_error.html">tapps.ply.yacc.YaccError</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00135">yacc.py:135</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_ae6e02e315b18712a47aa311a1ebdcd69"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ae6e02e315b18712a47aa311a1ebdcd69">tapps.ply.yacc.ParserReflect.error</a></div><div class="ttdeci">error</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02916">yacc.py:2916</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a8c10ddd088710e81a5c621660cb5cb3e"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a8c10ddd088710e81a5c621660cb5cb3e">tapps.ply.yacc.ParserReflect.get_error_func</a></div><div class="ttdeci">def get_error_func(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03009">yacc.py:3009</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a82ec2d1b4af4de7beca960951a2781fc"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a82ec2d1b4af4de7beca960951a2781fc">tapps.ply.yacc.Production.__init__</a></div><div class="ttdeci">def __init__(self, number, name, prod, precedence=('right', 0), func=None, file='', line=0)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01293">yacc.py:1293</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_a_l_r_error_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_a_l_r_error.html">tapps.ply.yacc.LALRError</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02071">yacc.py:2071</a></div></div>
<div class="ttc" id="namespacetapps_1_1ply_1_1yacc_html_ac0f2d1a87f5c536f171f20db0bd71ad9"><div class="ttname"><a href="namespacetapps_1_1ply_1_1yacc.html#ac0f2d1a87f5c536f171f20db0bd71ad9">tapps.ply.yacc.rightmost_terminal</a></div><div class="ttdeci">def rightmost_terminal(symbols, terminals)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01436">yacc.py:1436</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table_html_ad9ce2e91dde5683ee32f1debb5116611"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_generated_table.html#ad9ce2e91dde5683ee32f1debb5116611">tapps.ply.yacc.LRGeneratedTable.lr0_goto</a></div><div class="ttdeci">def lr0_goto(self, I, x)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02145">yacc.py:2145</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_mini_production_html_a6c4e6fbffdd09ad15b052b28d9ee0bd3"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_mini_production.html#a6c4e6fbffdd09ad15b052b28d9ee0bd3">tapps.ply.yacc.MiniProduction.bind</a></div><div class="ttdeci">def bind(self, pdict)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01380">yacc.py:1380</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a49a5c91caacbdcd6c8032035d9e8bd19"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a49a5c91caacbdcd6c8032035d9e8bd19">tapps.ply.yacc.Grammar.build_lritems</a></div><div class="ttdeci">def build_lritems(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01914">yacc.py:1914</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a730a5d93957f489b690ac198c3e6f1c2"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a730a5d93957f489b690ac198c3e6f1c2">tapps.ply.yacc.ParserReflect.pfuncs</a></div><div class="ttdeci">pfuncs</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03122">yacc.py:3122</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_ac9b47c0611ea60c8c53f81f83d3950b8"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#ac9b47c0611ea60c8c53f81f83d3950b8">tapps.ply.yacc.ParserReflect.pdict</a></div><div class="ttdeci">pdict</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02910">yacc.py:2910</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a23070aca1661004541dc7db89e9277d0"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a23070aca1661004541dc7db89e9277d0">tapps.ply.yacc.Grammar.infinite_cycles</a></div><div class="ttdeci">def infinite_cycles(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01654">yacc.py:1654</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_parser_html_a778ec68fe40939c1cd7c53ce31803731"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_parser.html#a778ec68fe40939c1cd7c53ce31803731">tapps.ply.yacc.LRParser.symstack</a></div><div class="ttdeci">symstack</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00390">yacc.py:390</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a072fe0cf6b141eb2ce41d1be633b84ad"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a072fe0cf6b141eb2ce41d1be633b84ad">tapps.ply.yacc.Grammar.Precedence</a></div><div class="ttdeci">Precedence</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01482">yacc.py:1482</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a1e6aab8f9a5e8ef7cb2367fc384bebe5"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a1e6aab8f9a5e8ef7cb2367fc384bebe5">tapps.ply.yacc.Production.lr_item</a></div><div class="ttdeci">def lr_item(self, n)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01339">yacc.py:1339</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a7bdcfb132892f5daf0d364f13ad3a2f6"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a7bdcfb132892f5daf0d364f13ad3a2f6">tapps.ply.yacc.ParserReflect.validate_pfunctions</a></div><div class="ttdeci">def validate_pfunctions(self)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l03125">yacc.py:3125</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_l_r_item_html_a54e6b82dc6585b1000d4e3ebf3be7dbf"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_l_r_item.html#a54e6b82dc6585b1000d4e3ebf3be7dbf">tapps.ply.yacc.LRItem.number</a></div><div class="ttdeci">number</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01413">yacc.py:1413</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_a6a95179ef39ea4e9d9df4d739a99b717"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#a6a95179ef39ea4e9d9df4d739a99b717">tapps.ply.yacc.Grammar.set_precedence</a></div><div class="ttdeci">def set_precedence(self, term, assoc, level)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01506">yacc.py:1506</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_acacb66580148716287452d85e977b872"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#acacb66580148716287452d85e977b872">tapps.ply.yacc.ParserReflect.log</a></div><div class="ttdeci">log</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02919">yacc.py:2919</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html_a82956ab85296ec1d898be66db2ac1115"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html#a82956ab85296ec1d898be66db2ac1115">tapps.ply.yacc.Production.lr_items</a></div><div class="ttdeci">lr_items</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01314">yacc.py:1314</a></div></div>
<div class="ttc" id="namespacetapps_1_1ply_1_1yacc_html_adc73e296a1379d14f16ce289adcd520a"><div class="ttname"><a href="namespacetapps_1_1ply_1_1yacc.html#adc73e296a1379d14f16ce289adcd520a">tapps.ply.yacc.format_result</a></div><div class="ttdeci">def format_result(r)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l00139">yacc.py:139</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_production_html"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_production.html">tapps.ply.yacc.Production</a></div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01291">yacc.py:1291</a></div></div>
<div class="ttc" id="namespacetapps_1_1ply_1_1yacc_html_a852ecfd23656aae7096b7448c779d2f6"><div class="ttname"><a href="namespacetapps_1_1ply_1_1yacc.html#a852ecfd23656aae7096b7448c779d2f6">tapps.ply.yacc.parse_grammar</a></div><div class="ttdeci">def parse_grammar(doc, file, line)</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02867">yacc.py:2867</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_grammar_html_ae17dac2b52cb14e2fe9753f918add208"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_grammar.html#ae17dac2b52cb14e2fe9753f918add208">tapps.ply.yacc.Grammar.Terminals</a></div><div class="ttdeci">Terminals</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l01467">yacc.py:1467</a></div></div>
<div class="ttc" id="classtapps_1_1ply_1_1yacc_1_1_parser_reflect_html_a6ec1c543c462afd6ceaea587ae5ca75a"><div class="ttname"><a href="classtapps_1_1ply_1_1yacc_1_1_parser_reflect.html#a6ec1c543c462afd6ceaea587ae5ca75a">tapps.ply.yacc.ParserReflect.grammar</a></div><div class="ttdeci">grammar</div><div class="ttdef"><b>Definition:</b> <a href="yacc_8py_source.html#l02915">yacc.py:2915</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b942a6ebccaf7e00306810db417dfd81.html">ply</a></li><li class="navelem"><a class="el" href="yacc_8py.html">yacc.py</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
